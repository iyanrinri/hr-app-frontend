import{_ as R}from"./BfigT44c.js";import{_ as C}from"./B9YZYzJt.js";import{b as E,c as P}from"./Dd9ky5bk.js";import{_ as D}from"./BIZB8tPr.js";import{A as c,O as g,a as _}from"./BlBPs-ZZ.js";import{g as j,c as l,a as t,b as n,w as v,o as p,k as a,F as f,l as h,P as M,U as O,t as i,C as N,Z as T}from"./DX_cbf2s.js";import{f as x}from"./DEBy37vB.js";import"./uRmCsCMF.js";import"./H1PkYqcn.js";import"./czVTDFG8.js";const H={class:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},$={class:"overflow-x-auto"},V={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},S={key:1},U={colspan:"6",class:"px-6 py-12 text-center text-gray-500"},B={class:"flex flex-col items-center justify-center"},F={class:"px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},L={class:"h-8 w-8 rounded-full bg-brand-navy/10 flex items-center justify-center text-brand-navy mr-3"},J={class:"text-sm font-medium text-gray-900"},X={class:"text-xs text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"text-sm text-gray-900"},z={class:"px-6 py-4"},K=["title"],Q={class:"text-xs text-gray-500 mt-0.5"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},q={class:"px-6 py-4 whitespace-nowrap"},tt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},et={class:"flex justify-end gap-2"},st=["onClick"],at=["onClick"],ut=j({__name:"index",setup(ot){const{data:m,loading:w,refresh:y}=E(),{mutate:u}=P(),A=async(d,s)=>{let r=c.MANAGER;s===g.MANAGER_APPROVED&&(r=c.HR);const o=prompt("Optional: Add approval comments");o!==null&&(await u({requestId:d,status:_.APPROVED,approverType:r,comments:o}),y())},b=async(d,s)=>{let r=c.MANAGER;s===g.MANAGER_APPROVED&&(r=c.HR);const o=prompt("Please provide a reason for rejection (Required)");o?(await u({requestId:d,status:_.REJECTED,approverType:r,rejectionReason:o}),y()):o===""&&alert("Rejection reason is required")};return(d,s)=>{const r=R,o=C;return p(),l("div",H,[s[4]||(s[4]=t("div",{class:"md:flex md:items-center md:justify-between"},[t("div",{class:"flex-1 min-w-0"},[t("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Pending Approvals "),t("p",{class:"mt-1 text-sm text-gray-500"}," Review and manage overtime requests requiring your approval ")])],-1)),n(o,null,{default:v(()=>[n(r,{class:"p-0 overflow-hidden"},{default:v(()=>[t("div",$,[t("table",V,[s[3]||(s[3]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reason & Time "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",G,[a(w)?(p(),l(f,{key:0},h(3,e=>t("tr",{key:e},[...s[0]||(s[0]=[t("td",{class:"px-6 py-4"},[t("div",{class:"h-4 bg-gray-100 rounded w-3/4 animate-pulse"})],-1),t("td",{class:"px-6 py-4"},[t("div",{class:"h-4 bg-gray-100 rounded w-1/2 animate-pulse"})],-1),t("td",{class:"px-6 py-4"},[t("div",{class:"h-4 bg-gray-100 rounded w-3/4 animate-pulse"})],-1),t("td",{class:"px-6 py-4"},[t("div",{class:"h-4 bg-gray-100 rounded w-1/4 animate-pulse"})],-1),t("td",{class:"px-6 py-4"},[t("div",{class:"h-4 bg-gray-100 rounded w-1/4 animate-pulse"})],-1),t("td",{class:"px-6 py-4"},null,-1)])])),64)):!a(m)||a(m).length===0?(p(),l("tr",S,[t("td",U,[t("div",B,[n(a(M),{class:"w-12 h-12 text-gray-300 mb-3"}),s[1]||(s[1]=t("p",{class:"text-lg font-medium text-gray-900"},"No pending approvals",-1)),s[2]||(s[2]=t("p",{class:"text-sm text-gray-500 mt-1"},"You're all caught up!",-1))])])])):(p(!0),l(f,{key:2},h(a(m),e=>(p(),l("tr",{key:e.id,class:"hover:bg-gray-50 transition-colors"},[t("td",F,[t("div",I,[t("div",L,[n(a(O),{class:"w-4 h-4"})]),t("div",null,[t("div",J,i(e.employee?.name||`Emp #${e.employeeId}`),1),t("div",X,i(e.employee?.email),1)])])]),t("td",Y,[t("div",Z,i(a(x)(new Date(e.date),"MMM d, yyyy")),1)]),t("td",z,[t("div",{class:"text-sm text-gray-900 truncate max-w-xs",title:e.reason},i(e.reason),9,K),t("div",Q,i(a(x)(new Date(e.startTime),"HH:mm"))+" - "+i(a(x)(new Date(e.endTime),"HH:mm")),1)]),t("td",W,i((e.totalMinutes/60).toFixed(1))+" hrs ",1),t("td",q,[n(D,{status:e.status,managerApprovedAt:e.managerApprovedAt,hrApprovedAt:e.hrApprovedAt},null,8,["status","managerApprovedAt","hrApprovedAt"])]),t("td",tt,[t("div",et,[t("button",{onClick:k=>A(e.id,e.status),class:"p-1 rounded-full text-green-600 hover:bg-green-50 transition-colors",title:"Approve"},[n(a(N),{class:"w-5 h-5"})],8,st),t("button",{onClick:k=>b(e.id,e.status),class:"p-1 rounded-full text-red-600 hover:bg-red-50 transition-colors",title:"Reject"},[n(a(T),{class:"w-5 h-5"})],8,at)])])]))),128))])])])]),_:1})]),_:1})])}}});export{ut as default};
