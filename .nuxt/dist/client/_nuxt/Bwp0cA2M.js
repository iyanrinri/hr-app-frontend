import{_ as T}from"./CrVLMR1u.js";import{_ as P}from"./v2qKE77T.js";import{_ as M}from"./C10QL-Xb.js";import{_ as F,a as H}from"./DHooiG8A.js";import{_ as j,a as O}from"./C2WlNZHx.js";import{g as z,y as W,z as X,j as x,c as r,a as t,b as a,p,w as i,k as u,t as l,E as N,o as n,d as y,D as G,G as q,$ as J,a0 as K,F as Q,l as Y,I as Z,a1 as tt}from"./CgE31YDV.js";import{u as et}from"./xpWVAs-B.js";import{e as st}from"./SxwX5CpG.js";import{_ as ot}from"./C5BJMy6C.js";import"./Dtjc6EhN.js";import"./BJ2ClxiI.js";const lt={class:"space-y-6"},at={class:"flex justify-between items-center"},nt={class:"space-y-4"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},it={class:"relative"},dt={class:"flex items-end gap-2"},ut={key:0,class:"flex flex-col items-center justify-center py-12"},pt={key:1,class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-gray-50"},xt={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yt={class:"bg-white divide-y divide-gray-200"},ct={key:0},gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"flex items-center"},ft={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate"},ht={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},St={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ct={class:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Et={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},Nt={class:"p-6 space-y-6"},At={key:0,class:"bg-gray-50 p-4 rounded-lg"},It={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ut={class:"font-medium text-gray-900"},Lt={class:"font-medium text-gray-900"},Vt={class:"font-medium text-gray-900"},$t={class:"font-medium text-gray-900"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Bt={class:"text-gray-900"},Tt={class:"text-gray-900"},Pt={class:"text-gray-900"},Mt={class:"text-gray-900"},Ft={class:"text-gray-900"},Ht={key:0,class:"md:col-span-2"},jt={class:"text-gray-900"},Ot={key:1,class:"bg-gray-50 border border-gray-200 rounded p-4 text-center"},zt={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200"},ae=z({__name:"index",setup(Wt){const D=W().params.tenant_slug,A=et(),d=X(()=>A.user),g=x(""),v=x(""),f=x(""),b=x(""),_=x({employeeId:"",startDate:"",endDate:"",status:""}),I=()=>{_.value={employeeId:g.value,startDate:v.value,endDate:f.value,status:b.value}},U=()=>{g.value="",v.value="",f.value="",b.value="",_.value={employeeId:"",startDate:"",endDate:"",status:""}},{data:k,loading:L}=st(1,10,_.value),s=x(null),h=m=>({PRESENT:"bg-green-100 text-green-800",LATE:"bg-yellow-100 text-yellow-800",ABSENT:"bg-red-100 text-red-800",EXCUSED:"bg-blue-100 text-blue-800"})[m||""]||"bg-gray-100 text-gray-800",w=m=>m?new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"-",V=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(m,e)=>{const c=T,$=P,S=M,C=H,E=F,R=O,B=j;return n(),r("div",lt,[t("div",at,[e[7]||(e[7]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Attendance History",-1)),a($,{to:u(D)?`/${u(D)}/dashboard/attendance`:"/dashboard/attendance"},{default:i(()=>[a(c,{variant:"secondary"},{default:i(()=>[...e[6]||(e[6]=[y("Back to Attendance",-1)])]),_:1})]),_:1},8,["to"])]),a(E,null,{default:i(()=>[a(C,{class:"pt-6"},{default:i(()=>[t("div",nt,[d.value?.role==="HR"||d.value?.role==="SUPER"||d.value?.role==="ADMIN"?(n(),G(ot,{key:0,modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o)},null,8,["modelValue"])):p("",!0),t("div",rt,[a(S,{label:"Start Date",type:"date",modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),class:"bg-white border-gray-600"},null,8,["modelValue"]),a(S,{label:"End Date",type:"date",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),class:"bg-white border-gray-600"},null,8,["modelValue"]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-bold text-gray-900 mb-2"},"Status",-1)),t("div",it,[q(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),class:"w-full appearance-none px-4 py-2 pr-10 border border-gray-600 rounded-md focus:outline-none focus:ring-brand-cyan focus:border-brand-cyan bg-white text-black cursor-pointer"},[...e[8]||(e[8]=[t("option",{value:""},"All Status",-1),t("option",{value:"PRESENT"},"Present",-1),t("option",{value:"LATE"},"Late",-1),t("option",{value:"ABSENT"},"Absent",-1),t("option",{value:"EXCUSED"},"Excused",-1)])],512),[[J,b.value]]),e[9]||(e[9]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{class:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})])],-1))])]),t("div",dt,[a(c,{onClick:I,class:"flex-1"},{default:i(()=>[a(u(K),{class:"w-4 h-4 mr-2"}),e[11]||(e[11]=y(" Apply ",-1))]),_:1}),a(c,{variant:"secondary",onClick:U,class:"flex-1"},{default:i(()=>[...e[12]||(e[12]=[y(" Reset ",-1)])]),_:1})])])])]),_:1})]),_:1}),a(E,null,{default:i(()=>[a(B,null,{default:i(()=>[a(R,null,{default:i(()=>[...e[13]||(e[13]=[y("Attendance Records",-1)])]),_:1})]),_:1}),a(C,{class:"overflow-x-auto"},{default:i(()=>[u(L)?(n(),r("div",ut,[...e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-navy mb-4"},null,-1),t("p",{class:"text-gray-600"},"Loading attendance history...",-1)])])):(n(),r("table",pt,[t("thead",mt,[t("tr",null,[e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date",-1)),d.value?.role==="HR"||d.value?.role==="SUPER"||d.value?.role==="ADMIN"?(n(),r("th",xt,"Employee")):p("",!0),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clock In",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Clock Out",-1)),e[18]||(e[18]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Hours",-1)),e[19]||(e[19]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes",-1)),e[21]||(e[21]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),t("tbody",yt,[!u(k)?.data||u(k).data.length===0?(n(),r("tr",ct,[...e[22]||(e[22]=[t("td",{colspan:"8",class:"px-6 py-8 text-center text-gray-500"}," No attendance records found ",-1)])])):p("",!0),(n(!0),r(Q,null,Y(u(k)?.data,o=>(n(),r("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",gt,[t("div",vt,[a(u(Z),{class:"w-4 h-4 mr-2 text-gray-400"}),y(" "+l(new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),1)])]),d.value?.role==="HR"||d.value?.role==="SUPER"||d.value?.role==="ADMIN"?(n(),r("td",ft,l(o.employee?.firstName)+" "+l(o.employee?.lastName),1)):p("",!0),t("td",bt,l(w(o.checkIn)),1),t("td",wt,l(w(o.checkOut)),1),t("td",_t,l(o.workDuration?`${(o.workDuration/60).toFixed(1)}h`:"-"),1),t("td",kt,[t("span",{class:N(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",h(o.status)])},l(o.status),3)]),t("td",Dt,l(o.notes||"-"),1),t("td",ht,[a(c,{variant:"secondary",class:"p-2",onClick:Gt=>s.value=o,title:"View Details"},{default:i(()=>[a(u(tt),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])]))]),_:1})]),_:1}),s.value?(n(),r("div",St,[t("div",Ct,[t("div",Et,[e[24]||(e[24]=t("h3",{class:"text-xl font-bold text-gray-900"},"Attendance Details",-1)),t("button",{onClick:e[4]||(e[4]=o=>s.value=null),class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[...e[23]||(e[23]=[t("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Nt,[s.value.employee?(n(),r("div",At,[e[29]||(e[29]=t("h4",{class:"font-bold text-gray-900 mb-2"},"Employee Information",-1)),t("div",It,[t("div",null,[e[25]||(e[25]=t("p",{class:"text-gray-600"},"Name",-1)),t("p",Ut,l(s.value.employee.firstName)+" "+l(s.value.employee.lastName),1)]),t("div",null,[e[26]||(e[26]=t("p",{class:"text-gray-600"},"Email",-1)),t("p",Lt,l(s.value.employee.user.email),1)]),t("div",null,[e[27]||(e[27]=t("p",{class:"text-gray-600"},"Position",-1)),t("p",Vt,l(s.value.employee.position),1)]),t("div",null,[e[28]||(e[28]=t("p",{class:"text-gray-600"},"Department",-1)),t("p",$t,l(s.value.employee.department),1)])])])):p("",!0),t("div",Rt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Date",-1)),t("p",Bt,l(V(s.value.date)),1)]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Status",-1)),t("span",{class:N(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",h(s.value.status)])},l(s.value.status),3)]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Check In",-1)),t("p",Tt,l(w(s.value.checkIn)),1)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Check Out",-1)),t("p",Pt,l(w(s.value.checkOut)),1)]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Work Duration",-1)),t("p",Mt,l(s.value.workDuration?`${(s.value.workDuration/60).toFixed(1)} hours`:"-"),1)]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Period",-1)),t("p",Ft,l(s.value.attendancePeriod?.name||"-"),1)]),s.value.notes?(n(),r("div",Ht,[e[36]||(e[36]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Notes",-1)),t("p",jt,l(s.value.notes),1)])):p("",!0)]),s.value.checkInLocation||s.value.checkOutLocation?(n(),r("div",Ot,[...e[37]||(e[37]=[t("p",{class:"text-sm text-gray-500"},"Map view is not available yet.",-1)])])):p("",!0)]),t("div",zt,[a(c,{onClick:e[5]||(e[5]=o=>s.value=null),variant:"secondary",class:"w-full"},{default:i(()=>[...e[38]||(e[38]=[y(" Close ",-1)])]),_:1})])])])):p("",!0)])}}});export{ae as default};
