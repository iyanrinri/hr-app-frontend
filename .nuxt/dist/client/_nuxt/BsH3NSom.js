import{_ as Y}from"./Zw0ZmG7K.js";import{_ as K}from"./BV-bnHA6.js";import{_ as Z}from"./PIMMusR-.js";import{_ as G}from"./Cb5BKmlr.js";import{_ as J,a as tt}from"./DNko07Iw.js";import{g as et,x as st,j as x,K as W,c as l,a as t,b as a,p as g,w as o,k as i,t as n,v as b,o as r,d as y,a1 as at,V as N,aq as nt,Y as lt,$ as ot,aV as rt,F as C,l as F,D as it,Z as dt,E as ut,ao as ct,H as yt,z as gt,X as xt}from"./DEyY0kFD.js";import{b as mt,c as pt}from"./BbZJfKnN.js";import"./uRmCsCMF.js";import"./DYvQZ50l.js";import"./D8dPcGoU.js";const vt={class:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ft={class:"flex justify-between items-center"},bt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},_t={class:"relative lg:col-span-2"},wt={class:"relative"},kt={class:"flex gap-2"},ht={key:0,class:"flex flex-col items-center justify-center py-12"},Dt={key:1,class:"text-center text-red-600 py-6"},At={key:2,class:"min-w-full divide-y divide-gray-200"},Pt={class:"bg-white divide-y divide-gray-200"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ht={class:"flex justify-end space-x-2"},Vt={key:0,class:"flex flex-col items-center justify-center py-12"},Wt={key:1,class:"space-y-4"},Nt={key:0,class:"p-4 bg-brand-light border-l-4 border-brand-navy rounded"},Ft={class:"flex items-center"},Tt={class:"font-bold text-brand-navy"},Bt={class:"text-sm text-gray-600"},Et={class:"relative"},It={class:"space-y-6 ml-6"},Ot={class:"flex items-start justify-between"},zt={class:"flex-1"},Rt={class:"flex items-center gap-2 mb-2"},Mt={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},qt={key:1,class:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full"},Qt={key:2,class:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full"},Xt={key:3,class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"},Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Kt={class:"font-medium text-gray-900"},Zt={class:"font-medium text-gray-900"},Gt={class:"font-medium text-gray-900"},Jt={key:0,class:"mt-2 text-sm text-gray-600"},te={key:1,class:"text-center py-12 text-gray-500"},ee={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},se={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ae={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},ne={class:"p-6 space-y-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={class:"text-gray-900"},re={class:"text-gray-900"},ie={class:"text-gray-900"},de={class:"text-gray-900"},ue={class:"text-gray-900"},ce={class:"md:col-span-2"},ye={class:"text-gray-900"},ge={class:"text-gray-900"},xe={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200"},me={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pe={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},ve={class:"flex justify-end space-x-3"},je=et({__name:"index",setup(fe){const L=st().params.tenant_slug,_=x(""),w=x(""),S=x(""),$=x(""),j=x(1),T=x(10),{data:B,loading:U,error:E,refresh:I}=mt(j,T,S,$),{mutate:O}=pt(),d=x(null),p=x(null),z=()=>{S.value=_.value,$.value=w.value,j.value=1},R=()=>{_.value="",w.value="",S.value="",$.value="",j.value=1},M=async()=>{p.value&&(await O(p.value),p.value=null,I())},H=u=>new Date(u).toLocaleDateString(),k=u=>new Date(u).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),q=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),Q=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),h=W(()=>B.value?.data||[]),D=W(()=>h.value.find(u=>u.isActive)),A=u=>{const e=new Date(u.startDate),c=new Date(u.endDate),m=new Date,v=m>=e&&m<=c,f=m>c,P=m<e;return{isOngoing:v,isPast:f,isFuture:P}};return(u,e)=>{const c=Y,m=K,v=Z,f=G,P=tt,V=J;return r(),l("div",vt,[t("div",ft,[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Attendance Periods",-1)),a(m,{to:`/${i(L)}/dashboard/attendance-periods/create`},{default:o(()=>[a(c,null,{default:o(()=>[a(i(at),{class:"w-4 h-4 mr-2"}),e[5]||(e[5]=y(" Add Period ",-1))]),_:1})]),_:1},8,["to"])]),a(f,null,{default:o(()=>[a(v,{class:"pt-6"},{default:o(()=>[t("div",bt,[t("div",_t,[a(i(nt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),N(t("input",{type:"text",placeholder:"Search by name or year...","onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),class:"w-full pl-10 pr-4 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-brand-cyan focus:border-brand-cyan bg-white text-black"},null,512),[[lt,_.value]])]),t("div",wt,[N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),class:"w-full appearance-none px-4 py-2 pr-10 border border-gray-600 rounded-md focus:outline-none focus:ring-brand-cyan focus:border-brand-cyan bg-white text-black cursor-pointer"},[...e[7]||(e[7]=[t("option",{value:""},"All Status",-1),t("option",{value:"true"},"Active Only",-1),t("option",{value:"false"},"Inactive Only",-1)])],512),[[ot,w.value]]),e[8]||(e[8]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 9l-7 7-7-7"})])],-1))]),t("div",kt,[a(c,{onClick:z,class:"flex-1"},{default:o(()=>[a(i(rt),{class:"w-4 h-4 mr-2"}),e[9]||(e[9]=y(" Apply ",-1))]),_:1}),a(c,{variant:"secondary",onClick:R,class:"flex-1"},{default:o(()=>[...e[10]||(e[10]=[y(" Reset ",-1)])]),_:1})])])]),_:1})]),_:1}),a(f,null,{default:o(()=>[a(V,null,{default:o(()=>[a(P,null,{default:o(()=>[...e[11]||(e[11]=[y("All Periods",-1)])]),_:1})]),_:1}),a(v,{class:"overflow-x-auto"},{default:o(()=>[i(U)?(r(),l("div",ht,[...e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-navy mb-4"},null,-1),t("p",{class:"text-gray-600"},"Loading attendance periods...",-1)])])):i(E)?(r(),l("div",Dt," Error loading attendance periods ")):(r(),l("table",At,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date Range"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Working Days/Hours"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Holidays"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Pt,[(r(!0),l(C,null,F(h.value,s=>(r(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ct,n(s.name),1),t("td",St,n(H(s.startDate))+" - "+n(H(s.endDate)),1),t("td",$t,n(s.workingDaysPerWeek)+" days / "+n(s.workingHoursPerDay)+" hours ",1),t("td",jt,n(s.holidays?.length||0)+" holidays ",1),t("td",Lt,[t("span",{class:b(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},[s.isActive?(r(),l(C,{key:0},[a(i(it),{class:"w-3 h-3 mr-1"}),e[13]||(e[13]=y(" Active ",-1))],64)):(r(),l(C,{key:1},[a(i(dt),{class:"w-3 h-3 mr-1"}),e[14]||(e[14]=y(" Inactive ",-1))],64))],2)]),t("td",Ut,[t("div",Ht,[a(c,{variant:"secondary",class:"p-2",onClick:X=>d.value=s,title:"View Details"},{default:o(()=>[a(i(ut),{class:"w-4 h-4"})]),_:1},8,["onClick"]),a(m,{to:`/${i(L)}/dashboard/attendance-periods/${s.id}`},{default:o(()=>[a(c,{variant:"secondary",class:"p-2",title:"Edit Period"},{default:o(()=>[a(i(ct),{class:"w-4 h-4"})]),_:1})]),_:1},8,["to"]),a(c,{variant:"danger",class:"p-2",onClick:X=>p.value=s.id,title:"Delete Period"},{default:o(()=>[a(i(yt),{class:"w-4 h-4"})]),_:1},8,["onClick"])])])]))),128))])]))]),_:1})]),_:1}),a(f,null,{default:o(()=>[a(V,null,{default:o(()=>[a(P,null,{default:o(()=>[...e[16]||(e[16]=[y("Period Timeline",-1)])]),_:1})]),_:1}),a(v,null,{default:o(()=>[i(U)?(r(),l("div",Vt,[...e[17]||(e[17]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-navy mb-4"},null,-1),t("p",{class:"text-gray-600"},"Loading timeline...",-1)])])):(r(),l("div",Wt,[D.value?(r(),l("div",Nt,[t("div",Ft,[a(i(gt),{class:"w-5 h-5 text-brand-navy mr-2"}),t("div",null,[t("p",Tt," Active Period: "+n(D.value.name),1),t("p",Bt,n(k(D.value.startDate))+" - "+n(k(D.value.endDate)),1)])])])):g("",!0),t("div",Et,[e[21]||(e[21]=t("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-gray-200"},null,-1)),t("div",It,[(r(!0),l(C,null,F(h.value,s=>(r(),l("div",{key:s.id,class:"relative"},[t("div",{class:b(["absolute -left-7-5 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full border-2",s.isActive?"bg-brand-navy border-brand-navy":A(s).isPast?"bg-gray-300 border-gray-400":"bg-white border-brand-cyan"])},null,2),t("div",{class:b(["p-4 rounded-lg border-2",s.isActive?"border-brand-navy bg-brand-light":"border-gray-200 bg-white"])},[t("div",Ot,[t("div",zt,[t("div",Rt,[t("h4",{class:b(["font-bold",s.isActive?"text-brand-navy":"text-gray-900"])},n(s.name),3),s.isActive?(r(),l("span",Mt," Active ")):g("",!0),A(s).isOngoing&&!s.isActive?(r(),l("span",qt," Ongoing ")):g("",!0),A(s).isPast?(r(),l("span",Qt," Past ")):g("",!0),A(s).isFuture?(r(),l("span",Xt," Upcoming ")):g("",!0)]),t("div",Yt,[t("div",null,[e[18]||(e[18]=t("p",{class:"text-gray-500"},"Duration",-1)),t("p",Kt,n(q(s.startDate))+" - "+n(Q(s.endDate)),1)]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-gray-500"},"Working Schedule",-1)),t("p",Zt,n(s.workingDaysPerWeek)+" days/week, "+n(s.workingHoursPerDay)+" hrs/day ",1)]),t("div",null,[e[20]||(e[20]=t("p",{class:"text-gray-500"},"Holidays",-1)),t("p",Gt,n(s.holidays?.length||0)+" configured ",1)])]),s.description?(r(),l("p",Jt,n(s.description),1)):g("",!0)])])],2)]))),128))])]),h.value.length===0?(r(),l("div",te," No attendance periods configured yet ")):g("",!0)]))]),_:1})]),_:1}),d.value?(r(),l("div",ee,[t("div",se,[t("div",ae,[e[22]||(e[22]=t("h3",{class:"text-xl font-bold text-gray-900"},"Period Details",-1)),t("button",{onClick:e[2]||(e[2]=s=>d.value=null),class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[a(i(xt),{class:"w-5 h-5 text-gray-500"})])]),t("div",ne,[t("div",le,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Name",-1)),t("p",oe,n(d.value.name),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Status",-1)),t("span",{class:b(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",d.value.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},n(d.value.isActive?"Active":"Inactive"),3)]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Start Date",-1)),t("p",re,n(k(d.value.startDate)),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"End Date",-1)),t("p",ie,n(k(d.value.endDate)),1)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Working Days Per Week",-1)),t("p",de,n(d.value.workingDaysPerWeek)+" days",1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Working Hours Per Day",-1)),t("p",ue,n(d.value.workingHoursPerDay)+" hours",1)]),t("div",ce,[e[29]||(e[29]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Description",-1)),t("p",ye,n(d.value.description||"-"),1)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Holidays",-1)),t("p",ge,n(d.value.holidays?.length||0)+" holidays configured",1)])])]),t("div",xe,[a(c,{onClick:e[3]||(e[3]=s=>d.value=null),variant:"secondary",class:"w-full"},{default:o(()=>[...e[31]||(e[31]=[y(" Close ",-1)])]),_:1})])])])):g("",!0),p.value?(r(),l("div",me,[t("div",pe,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900 mb-2"},"Delete Attendance Period",-1)),e[35]||(e[35]=t("p",{class:"text-gray-600 mb-6"}," Are you sure you want to delete this attendance period? This action cannot be undone. ",-1)),t("div",ve,[a(c,{variant:"secondary",onClick:e[4]||(e[4]=s=>p.value=null)},{default:o(()=>[...e[32]||(e[32]=[y(" Cancel ",-1)])]),_:1}),a(c,{variant:"danger",onClick:M},{default:o(()=>[...e[33]||(e[33]=[y(" Delete ",-1)])]),_:1})])])])):g("",!0)])}}});export{je as default};
