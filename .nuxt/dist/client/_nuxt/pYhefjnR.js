import{a7 as h,x as g,aw as d,b1 as p,j as f,q as u}from"./DEyY0kFD.js";const S=()=>{h();const n=g(),r=d(),{$api:m}=p(),o=f(!1);return{login:async a=>{const t=n.params.tenant_slug;o.value=!0;try{const e=t?`/api/${t}/auth/login`:"/api/auth/login",s=await $fetch(e,{method:"POST",body:a}),{access_token:c,user:l}=s;r.setAuth(c,l);const i=t?`/${t}/dashboard`:"/dashboard";u(i)}catch(e){const s=e.data?.message||"Login failed";throw new Error(s)}finally{o.value=!1}},logout:async()=>{const a=n.params.tenant_slug;try{const t=a?`/api/${a}/auth/logout`:"/api/auth/logout";await $fetch(t,{method:"POST"})}catch(t){console.error("Logout API call failed",t)}finally{r.clearAuth();const t=a?`/${a}/auth/login`:"/auth/login";return u(t)}},loading:o}};export{S as u};
