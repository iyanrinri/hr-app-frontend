import{u as g}from"./xpWVAs-B.js";import{av as h,y as d,a4 as p,j as m,q as u}from"./CgE31YDV.js";const v=()=>{h();const n=d(),r=g(),{$api:f}=p(),o=m(!1);return{login:async a=>{const t=n.params.tenant_slug;o.value=!0;try{const s=t?`/api/${t}/auth/login`:"/api/auth/login",e=await $fetch(s,{method:"POST",body:a}),{access_token:c,user:l}=e;r.setAuth(c,l);const i=t?`/${t}/dashboard`:"/dashboard";u(i)}catch(s){const e=s.data?.message||"Login failed";throw new Error(e)}finally{o.value=!1}},logout:()=>{const a=n.params.tenant_slug;r.clearAuth();const t=a?`/${a}/auth/login`:"/auth/login";return u(t)},loading:o}};export{v as u};
