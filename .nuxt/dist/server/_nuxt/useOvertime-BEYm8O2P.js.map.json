{"file":"useOvertime-BEYm8O2P.js","mappings":"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","names":[],"sources":["../../../../composables/useOvertime.ts"],"sourcesContent":["import type { \n    OvertimeRequest, \n    OvertimeListResponse, \n    OvertimeApprovalStats, \n    OvertimeFilters, \n    ApproverType, \n    OvertimeApprovalProcessPayload,\n    EmployeeOvertimeHistoryFilters,\n    TotalHoursFilters,\n    TotalHoursResponse\n} from '@/types/overtime'\n\n// Helper to construct URL with tenant slug\nconst useTenantUrl = () => {\n    const route = useRoute()\n    const tenantSlug = route.params.tenant_slug as string\n    \n    return (path: string) => {\n      const cleanPath = path.startsWith('/') ? path : `/${path}`\n      return tenantSlug ? `/api/${tenantSlug}${cleanPath}` : `/api${cleanPath}`\n    }\n}\n\n// --- Approvals List ---\n\nexport const useOvertimeApprovals = (filters: MaybeRef<OvertimeFilters>) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const f = unref(filters)\n        const params: Record<string, any> = {}\n        if (f.skip !== undefined) params.skip = f.skip\n        if (f.take !== undefined) params.take = f.take\n        if (f.status) params.status = f.status\n        if (f.startDate) params.startDate = f.startDate\n        if (f.endDate) params.endDate = f.endDate\n        if (f.approverId) params.approverId = f.approverId\n        if (f.approverType) params.approverType = f.approverType\n        return params\n    })\n\n    const { data, pending, error, refresh } = useFetch<OvertimeListResponse>(() => getUrl('/overtime-approvals'), {\n        key: 'overtime-approvals',\n        query: queryParams,\n        watch: [queryParams],\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\n// --- Pending Approvals ---\n\nexport const usePendingOvertimeApprovals = (approverType?: MaybeRef<ApproverType>) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const type = unref(approverType)\n        return type ? { approverType: type } : {}\n    })\n\n    const { data, pending, error, refresh } = useFetch<OvertimeRequest[]>(() => getUrl('/overtime-approvals/pending'), {\n        key: `overtime-approvals-pending-${unref(approverType)}`,\n        query: queryParams,\n        watch: [queryParams],\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\n// --- Approval Statistics ---\n\nexport const useOvertimeApprovalStats = (filters?: MaybeRef<{ approverId?: number; startDate?: string; endDate?: string }>) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const f = unref(filters) || {}\n        const params: Record<string, any> = {}\n        if (f.approverId) params.approverId = f.approverId\n        if (f.startDate) params.startDate = f.startDate\n        if (f.endDate) params.endDate = f.endDate\n        return params\n    })\n\n    const { data, pending, error, refresh } = useFetch<OvertimeApprovalStats>(() => getUrl('/overtime-approvals/stats'), {\n        key: 'overtime-approvals-stats',\n        query: queryParams,\n        watch: [queryParams],\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\n// --- Process Approval (Approve/Reject) ---\n\nexport const useProcessOvertimeApproval = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async (payload: OvertimeApprovalProcessPayload) => {\n        loading.value = true\n        try {\n            await $fetch(getUrl('/overtime-approvals/process'), {\n                method: 'POST',\n                body: payload\n            })\n        } catch (error) {\n            throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n\n// --- Admin Features ---\n\nexport const useEmployeeOvertimeHistory = (\n    employeeId: MaybeRef<string | number>,\n    filters: MaybeRef<EmployeeOvertimeHistoryFilters> = {}\n) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const f = unref(filters)\n        const params: Record<string, any> = {}\n        if (f.skip !== undefined) params.skip = f.skip\n        if (f.take !== undefined) params.take = f.take\n        if (f.status) params.status = f.status\n        if (f.startDate) params.startDate = f.startDate\n        if (f.endDate) params.endDate = f.endDate\n        return params\n    })\n\n    const { data, pending, error, refresh } = useFetch<OvertimeListResponse>(() => getUrl(`/overtime-requests/employee/${unref(employeeId)}/history`), {\n        key: `employee-overtime-history-${unref(employeeId)}`,\n        query: queryParams,\n        watch: [queryParams],\n        immediate: !!unref(employeeId),\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\nexport const useEmployeeTotalHours = (\n    employeeId: MaybeRef<string | number>,\n    filters: MaybeRef<TotalHoursFilters>\n) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const f = unref(filters)\n        const params: Record<string, any> = {\n            startDate: f.startDate,\n            endDate: f.endDate\n        }\n        if (f.status) params.status = f.status\n        return params\n    })\n\n    const { data, pending, error, refresh } = useFetch<TotalHoursResponse>(() => getUrl(`/overtime-requests/employee/${unref(employeeId)}/total-hours`), {\n        key: `employee-total-hours-${unref(employeeId)}`,\n        query: queryParams,\n        watch: [queryParams],\n        immediate: !!(unref(employeeId) && unref(filters).startDate && unref(filters).endDate),\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n"],"version":3}