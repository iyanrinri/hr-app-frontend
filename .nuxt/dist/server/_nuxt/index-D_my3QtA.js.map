{"version":3,"file":"index-D_my3QtA.js","sources":["../../../../pages/[tenant_slug]/dashboard/leaves/approvals/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { usePendingApprovals, useApproveLeaveRequest, useRejectLeaveRequest } from '@/composables/useLeaves'\nimport { Check, X } from 'lucide-vue-next'\nimport { format } from 'date-fns'\nimport type { LeaveRequest } from '@/types/leaves'\n\nconst { data: approvalsData, loading, refresh } = usePendingApprovals()\nconst { mutate: approve } = useApproveLeaveRequest()\nconst { mutate: reject } = useRejectLeaveRequest()\n\nconst requests = computed<LeaveRequest[]>(() => {\n     if (!approvalsData.value) return []\n     if (Array.isArray(approvalsData.value)) return approvalsData.value\n     return (approvalsData.value as any).data || []\n})\n\nconst handleApprove = async (id: string) => {\n    await approve(id)\n    refresh()\n}\n\nconst handleReject = async (id: string) => {\n    const reason = prompt('Please enter a rejection reason:')\n    if (reason !== null) {\n        await reject(id, reason)\n        refresh()\n    }\n}\n\ndefinePageMeta({\n  layout: 'dashboard'\n})\n</script>\n\n<template>\n    <div class=\"space-y-6\">\n      <div class=\"flex justify-between items-center\">\n        <div>\n           <h2 className=\"text-2xl font-bold text-gray-900\">Leave Approvals</h2>\n           <p className=\"text-sm text-gray-500\">Review and action pending leave requests.</p>\n        </div>\n      </div>\n\n      <UiCard>\n        <UiCardHeader><UiCardTitle>Pending Requests</UiCardTitle></UiCardHeader>\n        <UiCardContent>\n          <div class=\"overflow-x-auto\">\n             <div v-if=\"loading\" class=\"text-center py-8\">\n                 <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy mx-auto\"></div>\n             </div>\n             <table v-else class=\"w-full text-sm text-left\">\n               <thead class=\"bg-gray-50 border-b\">\n                 <tr>\n                   <th class=\"px-4 py-3 font-medium text-gray-500\">Employee</th>\n                   <th class=\"px-4 py-3 font-medium text-gray-500\">Type</th>\n                   <th class=\"px-4 py-3 font-medium text-gray-500\">Dates</th>\n                   <th class=\"px-4 py-3 font-medium text-gray-500\">Days</th>\n                   <th class=\"px-4 py-3 font-medium text-gray-500\">Reason</th>\n                   <th class=\"px-4 py-3 font-medium text-right text-gray-500\">Actions</th>\n                 </tr>\n               </thead>\n               <tbody class=\"divide-y\">\n                 <tr v-if=\"requests.length === 0\">\n                    <td colspan=\"6\" class=\"p-4 text-center text-gray-500 italic\">No pending approvals.</td>\n                 </tr>\n                 <tr v-else v-for=\"req in requests\" :key=\"req.id\" class=\"hover:bg-gray-50\">\n                       <td class=\"px-4 py-3 font-medium text-gray-900\">{{ req.employeeName || 'Unknown' }}</td>\n                       <td class=\"px-4 py-3 text-gray-600\">{{ req.leaveTypeName }}</td>\n                       <td class=\"px-4 py-3 text-gray-600\">\n                         {{ format(new Date(req.startDate), 'MMM dd') }} - {{ format(new Date(req.endDate), 'MMM dd, yyyy') }}\n                       </td>\n                       <td class=\"px-4 py-3\">{{ req.totalDays }}</td>\n                       <td class=\"px-4 py-3 truncate max-w-[200px]\">{{ req.reason }}</td>\n                       <td class=\"px-4 py-3 text-right space-x-2\">\n                         <div class=\"flex justify-end gap-2\">\n                           <UiButton \n                             class=\"bg-green-600 hover:bg-green-700 text-white py-1 px-3 text-xs h-auto\"\n                             @click=\"handleApprove(req.id)\"\n                           >\n                             <Check class=\"w-4 h-4 mr-1\" /> Approve\n                           </UiButton>\n                           <UiButton \n                             variant=\"destructive\"\n                             class=\"py-1 px-3 text-xs h-auto\"\n                             @click=\"handleReject(req.id)\"\n                           >\n                             <X class=\"w-4 h-4 mr-1\" /> Reject\n                           </UiButton>\n                         </div>\n                       </td>\n                 </tr>\n               </tbody>\n             </table>\n          </div>\n        </UiCardContent>\n      </UiCard>\n    </div>\n</template>\n"],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_","_scopeId","_createVNode","_unref","_ssrRenderList","_ssrInterpolate","_ssrRenderComponent","_createBlock","_Fragment","_renderList","_toDisplayString"],"mappings":"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"}