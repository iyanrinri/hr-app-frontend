{"version":3,"file":"index-yZIXBZ0Y.js","sources":["../../../../types/settings.ts","../../../../composables/useSettings.ts","../../../../components/settings/SettingItem.vue","../../../../components/settings/AttendanceMap.vue","../../../../components/settings/SettingsTabContent.vue","../../../../pages/[tenant_slug]/dashboard/settings/index.vue"],"sourcesContent":["export enum SettingCategory {\n  COMPANY = 'COMPANY',\n  ATTENDANCE = 'ATTENDANCE',\n  GENERAL = 'GENERAL',\n  NOTIFICATION = 'NOTIFICATION',\n  SECURITY = 'SECURITY'\n}\n\nexport enum SettingDataType {\n  STRING = 'STRING',\n  BOOLEAN = 'BOOLEAN',\n  NUMBER = 'NUMBER',\n  JSON = 'JSON'\n}\n\nexport interface Setting {\n  id: string;\n  key: string;\n  value: string;\n  parsedValue: string | number | boolean | null | undefined;\n  category: SettingCategory;\n  description: string;\n  dataType: SettingDataType;\n  isPublic: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface SettingsResponse {\n  data: Setting[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\nexport interface UpdateSettingPayload {\n  key: string;\n  value: string | number | boolean;\n}\n\nexport interface CreateSettingPayload {\n  key: string;\n  value: string | number | boolean;\n  category: SettingCategory;\n  description: string;\n  dataType: SettingDataType;\n  isPublic: boolean;\n}\n","import type { SettingsResponse, UpdateSettingPayload, SettingCategory } from '@/types/settings'\n\n// Helper to construct URL with tenant slug\nconst useTenantUrl = () => {\n    const route = useRoute()\n    const tenantSlug = route.params.tenant_slug as string\n    \n    return (path: string) => {\n      const cleanPath = path.startsWith('/') ? path : `/${path}`\n      return tenantSlug ? `/api/${tenantSlug}${cleanPath}` : `/api${cleanPath}`\n    }\n}\n\nexport const useSettings = (\n    page: MaybeRef<number> = 1,\n    limit: MaybeRef<number> = 20,\n    category?: MaybeRef<SettingCategory | undefined>,\n    isPublic?: MaybeRef<boolean | undefined>\n) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const params: Record<string, any> = {\n            page: unref(page),\n            limit: unref(limit)\n        }\n        if (unref(category)) params.category = unref(category)\n        if (unref(isPublic) !== undefined) params.isPublic = unref(isPublic)\n        return params\n    })\n\n    const key = computed(() => `settings-${unref(page)}-${unref(limit)}-${unref(category)}-${unref(isPublic)}`)\n\n    const { data, pending, error, refresh } = useFetch<SettingsResponse>(() => getUrl('/settings'), {\n        key: key.value,\n        query: queryParams,\n        watch: [queryParams],\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\nexport const useUpdateSetting = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async (payload: UpdateSettingPayload) => {\n        loading.value = true\n        try {\n            await $fetch(getUrl(`/settings/${payload.key}`), {\n                method: 'PATCH',\n                body: { value: payload.value }\n            })\n            // Invalidate ALL settings queries to refresh UI\n            // This key matching logic invalidates any useFetch with key starting with \"settings-\"\n            refreshNuxtData((key) => typeof key === 'string' && key.startsWith('settings-'))\n        } catch (error) {\n            throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n\nexport const useInitializeSettings = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async () => {\n        loading.value = true\n        try {\n            await $fetch(getUrl('/settings/initialize'), {\n                method: 'POST'\n            })\n            refreshNuxtData((key) => typeof key === 'string' && key.startsWith('settings-'))\n        } catch (error) {\n            throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n","<script setup lang=\"ts\">\nimport { ref, watch, computed } from 'vue'\nimport { type Setting, SettingDataType } from '@/types/settings'\nimport { useUpdateSetting } from '@/composables/useSettings'\nimport { Loader2, Save } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  setting: Setting\n}>()\n\nconst { mutate: updateSetting, loading: isUpdating } = useUpdateSetting()\n\nconst value = ref<string | number | boolean>(props.setting.value)\nconst isDirty = ref(false)\n\n// Sync from props if updated externally\nwatch(() => props.setting.value, (newVal) => {\n    value.value = newVal\n    isDirty.value = false\n})\n\nconst formatSettingName = (key: string): string => {\n  return key\n    .replace(/_/g, ' ')\n    .replace(/([A-Z])/g, ' $1')\n    .replace(/^./, (str) => str.toUpperCase())\n    .trim();\n}\n\nconst isBoolean = props.setting.dataType === SettingDataType.BOOLEAN\nconst isTrue = computed(() => String(value.value) === 'true' || value.value === true)\n\nconst handleSave = async () => {\n    let valToSave = value.value\n    if (props.setting.dataType === SettingDataType.NUMBER) {\n        valToSave = Number(value.value)\n    }\n\n    try {\n        await updateSetting({ key: props.setting.key, value: valToSave })\n        isDirty.value = false\n    } catch (e) {\n        // Handle error (maybe toast)\n        console.error(\"Failed to save setting\", e)\n        alert('Failed to save setting')\n    }\n}\n\nconst toggleBoolean = async () => {\n    if (isUpdating.value) return\n    \n    const newVal = !isTrue.value\n    value.value = newVal\n    \n    try {\n        await updateSetting({ key: props.setting.key, value: String(newVal) })\n        isDirty.value = false \n    } catch (e) {\n        // Revert on failure\n        value.value = !newVal\n        console.error(\"Failed to toggle setting\", e)\n        alert('Failed to update setting')\n    }\n}\n</script>\n\n<template>\n    <div class=\"bg-gray-50 p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors\">\n      <div class=\"flex items-start justify-between mb-2\">\n        <div>\n          <label class=\"block text-sm font-semibold text-gray-900\">\n            {{ formatSettingName(setting.key) }}\n          </label>\n          <p class=\"text-xs text-gray-500 mt-1\">{{ setting.description }}</p>\n        </div>\n      </div>\n\n      <div class=\"mt-3 flex items-center gap-3\">\n        <div v-if=\"isBoolean\" class=\"flex items-center\">\n             <button\n               type=\"button\"\n               @click=\"toggleBoolean\"\n               :class=\"[\n                 'relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-navy focus:ring-offset-2',\n                 isTrue ? 'bg-brand-navy' : 'bg-gray-200'\n               ]\"\n             >\n               <span\n                 :class=\"[\n                   'pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out',\n                   isTrue ? 'translate-x-5' : 'translate-x-0'\n                 ]\"\n               />\n             </button>\n             <span class=\"ml-3 text-sm text-gray-900\">\n                {{ isTrue ? 'Enabled' : 'Disabled' }}\n                <Loader2 v-if=\"isUpdating\" class=\"w-3 h-3 animate-spin inline ml-2\" />\n             </span>\n        </div>\n\n        <div v-else class=\"flex-1 flex gap-2\">\n             <input\n               :type=\"setting.dataType === SettingDataType.NUMBER ? 'number' : 'text'\"\n               v-model=\"value\"\n               @input=\"isDirty = true\"\n               class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-navy focus:ring-brand-navy sm:text-sm p-2 border\"\n               :placeholder=\"setting.description\"\n             />\n             <button\n               v-if=\"isDirty\"\n               @click=\"handleSave\"\n               :disabled=\"isUpdating\"\n               class=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-brand-navy hover:bg-brand-navy/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy disabled:opacity-50\"\n             >\n                <Loader2 v-if=\"isUpdating\" class=\"w-4 h-4 animate-spin\" />\n                <Save v-else class=\"w-4 h-4\" />\n             </button>\n        </div>\n      </div>\n    </div>\n</template>\n","<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { LMap, LTileLayer, LMarker, LCircle } from \"@vue-leaflet/vue-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\n// Dynamic import for Leaflet to avoid SSR issues\nconst L = ref<any>(null)\n\nonMounted(async () => {\n    // Fix Leaflet's default icon path issues with webpack/vite\n    const leaflet = await import('leaflet');\n    L.value = leaflet.default || leaflet;\n    \n    // Fix icons\n    delete (L.value.Icon.Default.prototype as any)._getIconUrl;\n    L.value.Icon.Default.mergeOptions({\n        iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n        iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n        shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\n    });\n});\n\nconst props = defineProps<{\n  latitude: number;\n  longitude: number;\n  radius: number;\n}>()\n\nconst emit = defineEmits<{\n  (e: 'locationSelect', lat: number, lng: number): void\n}>()\n\nconst zoom = ref(15)\nconst hasLocation = computed(() => !!(props.latitude && props.longitude))\n\n// Internal position state that syncs with props but can be optimistic\nconst currentPosition = ref<[number, number]>(\n    hasLocation.value ? [props.latitude, props.longitude] : [-6.2088, 106.8456]\n)\n\n// Sync with props when they change\nwatch(() => [props.latitude, props.longitude], ([newLat, newLng]) => {\n     if (newLat && newLng) {\n         currentPosition.value = [newLat, newLng]\n         // Also verify center isn't too far? Optional.\n     }\n})\n\nconst pendingLocation = ref<[number, number] | null>(null)\nconst center = ref<[number, number]>(currentPosition.value)\n\n// Keep center in sync with currentPosition primarily\nwatch(currentPosition, (newPos) => {\n    if (!pendingLocation.value) {\n        center.value = newPos\n    }\n})\n\nconst onMapClick = (e: any) => {\n    // e.latlng contains lat and lng\n    if (e.latlng) {\n        pendingLocation.value = [e.latlng.lat, e.latlng.lng]\n        // Center view on click? maybe not forced, but let's do it for visibility\n        // center.value = [e.latlng.lat, e.latlng.lng] \n    }\n}\n\nconst confirmLocation = () => {\n    if (pendingLocation.value) {\n        // Optimistic update\n        const newPos = pendingLocation.value\n        currentPosition.value = newPos\n        \n        emit('locationSelect', newPos[0], newPos[1])\n        pendingLocation.value = null\n    }\n}\n\nconst cancelLocation = () => {\n    pendingLocation.value = null\n    // Revert center to saved position\n    center.value = currentPosition.value\n}\n</script>\n\n<template>\n  <div class=\"space-y-4 relative\">\n    <div class=\"h-[400px] w-full rounded-lg overflow-hidden border border-gray-300 relative z-0\">\n      <ClientOnly>\n          <l-map\n            ref=\"map\"\n            v-model:zoom=\"zoom\"\n            :center=\"center\"\n            :use-global-leaflet=\"false\"\n            @click=\"onMapClick\"\n            style=\"cursor: crosshair;\"\n          >\n            <l-tile-layer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              layer-type=\"base\"\n              name=\"OpenStreetMap\"\n            ></l-tile-layer>\n\n            <!-- Show current confirmed position -->\n             <l-marker v-if=\"!pendingLocation\" :lat-lng=\"currentPosition\"></l-marker>\n             <l-circle \n                v-if=\"!pendingLocation\"\n                :lat-lng=\"currentPosition\" \n                :radius=\"radius\"\n                color=\"blue\"\n            ></l-circle>\n\n            <!-- Show pending position -->\n            <l-marker v-if=\"pendingLocation\" :lat-lng=\"pendingLocation\"></l-marker>\n            <l-circle \n                v-if=\"pendingLocation\"\n                :lat-lng=\"pendingLocation\" \n                :radius=\"radius\"\n                color=\"orange\"\n                dash-array=\"5, 10\"\n            ></l-circle>\n          </l-map>\n      </ClientOnly>\n\n       <!-- Confirmation Modal Overlay -->\n        <div v-if=\"pendingLocation\" class=\"absolute inset-0 z-[1000] flex items-end justify-center pb-6 bg-black/10 pointer-events-none\">\n             <div class=\"bg-white p-4 rounded-lg shadow-lg pointer-events-auto flex flex-col items-center gap-3 animate-in fade-in slide-in-from-bottom-4\">\n                <p class=\"text-sm font-medium text-gray-900\">Update Check Point Location?</p>\n                <div class=\"flex gap-2\">\n                  <button \n                    @click=\"cancelLocation\"\n                    class=\"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors pointer-events-auto\"\n                  >\n                    Cancel\n                  </button>\n                  <button \n                    @click=\"confirmLocation\"\n                    class=\"px-3 py-1.5 text-xs font-medium text-white bg-brand-navy hover:opacity-90 rounded-md transition-colors pointer-events-auto\"\n                  >\n                    Save Location\n                  </button>\n                </div>\n             </div>\n        </div>\n    </div>\n    <p class=\"text-xs text-gray-500\">\n        Click on the map to set the attendance check-point center. You will be asked to confirm.\n      </p>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useSettings, useUpdateSetting } from '@/composables/useSettings'\nimport { SettingCategory } from '@/types/settings'\nimport { Loader2 } from 'lucide-vue-next'\nimport SettingItem from './SettingItem.vue'\nimport AttendanceMap from './AttendanceMap.vue'\n\nconst props = defineProps<{\n  category: SettingCategory\n}>()\n\nconst { data: response, loading, error } = useSettings(1, 100, computed(() => props.category))\nconst { mutate: updateSetting } = useUpdateSetting()\n\nconst settings = computed(() => response.value?.data || [])\n\nconst locationKeys = ['attendance_checkpoint_lat', 'attendance_checkpoint_lng', 'attendance_checkpoint_radius', 'attendance_checkpoint_address']\nconst showMap = computed(() => props.category === SettingCategory.ATTENDANCE)\n\nconst latSetting = computed(() => settings.value.find(s => s.key === 'attendance_checkpoint_lat'))\nconst lngSetting = computed(() => settings.value.find(s => s.key === 'attendance_checkpoint_lng'))\nconst radiusSetting = computed(() => settings.value.find(s => s.key === 'attendance_checkpoint_radius'))\nconst addressSetting = computed(() => settings.value.find(s => s.key === 'attendance_checkpoint_address'))\n\nconst otherSettings = computed(() => showMap.value \n    ? settings.value.filter(s => !locationKeys.includes(s.key))\n    : settings.value\n)\n\nconst onLocationSelect = async (lat: number, lng: number) => {\n    try {\n        await updateSetting({ key: 'attendance_checkpoint_lat', value: String(lat) })\n        await updateSetting({ key: 'attendance_checkpoint_lng', value: String(lng) })\n    } catch (e) {\n        console.error(\"Failed to update location settings\", e)\n        alert(\"Failed to save location\")\n    }\n}\n</script>\n\n<template>\n  <div class=\"space-y-6 max-w-4xl\">\n    <div v-if=\"loading\" class=\"flex justify-center items-center h-64\">\n        <Loader2 class=\"w-8 h-8 animate-spin text-brand-navy\" />\n    </div>\n\n    <div v-else-if=\"error\" class=\"text-center text-red-500 py-8\">\n        Failed to load settings. Please try again.\n    </div>\n\n    <template v-else>\n        <div v-if=\"settings.length === 0\">\n            <p class=\"text-gray-500 italic\">No settings found for this category.</p>\n        </div>\n        <div v-else class=\"grid gap-6\">\n             <SettingItem v-for=\"setting in otherSettings\" :key=\"`${setting.id}-${setting.value}`\" :setting=\"setting\" />\n        </div>\n\n        <div v-if=\"showMap\" class=\"mt-8 border-t pt-8\">\n            <h3 class=\"text-lg font-medium text-brand-navy mb-6\">Attendance Check Point</h3>\n            \n            <div class=\"mb-6 grid gap-6\">\n                <!-- Inputs for manual editing -->\n                <SettingItem v-if=\"addressSetting\" :key=\"`${addressSetting.id}-${addressSetting.value}`\" :setting=\"addressSetting\" />\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                     <SettingItem v-if=\"latSetting\" :key=\"`${latSetting.id}-${latSetting.value}`\" :setting=\"latSetting\" />\n                     <SettingItem v-if=\"lngSetting\" :key=\"`${lngSetting.id}-${lngSetting.value}`\" :setting=\"lngSetting\" />\n                </div>\n                 <SettingItem v-if=\"radiusSetting\" :key=\"`${radiusSetting.id}-${radiusSetting.value}`\" :setting=\"radiusSetting\" />\n            </div>\n\n            <div class=\"rounded-lg overflow-hidden border border-gray-200\">\n                <AttendanceMap \n                   :latitude=\"parseFloat(String(latSetting?.value || '0'))\"\n                   :longitude=\"parseFloat(String(lngSetting?.value || '0'))\"\n                   :radius=\"parseFloat(String(radiusSetting?.value || '100'))\"\n                   @locationSelect=\"onLocationSelect\"\n                />\n            </div>\n        </div>\n    </template>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { \n  Building2, \n  Calendar, \n  Shield, \n  Bell, \n  Settings as SettingsIcon,\n  Loader2\n} from 'lucide-vue-next'\nimport { SettingCategory } from '@/types/settings'\nimport { useInitializeSettings } from '@/composables/useSettings'\nimport SettingsTabContent from '@/components/settings/SettingsTabContent.vue'\n\nconst tabs = [\n  { id: SettingCategory.GENERAL, label: 'General', icon: SettingsIcon },\n  { id: SettingCategory.COMPANY, label: 'Company', icon: Building2 },\n  { id: SettingCategory.ATTENDANCE, label: 'Attendance', icon: Calendar },\n  { id: SettingCategory.NOTIFICATION, label: 'Notifications', icon: Bell },\n  { id: SettingCategory.SECURITY, label: 'Security', icon: Shield },\n]\n\nconst activeTab = ref<SettingCategory>(SettingCategory.GENERAL)\nconst { mutate: initializeSettings, loading: isInitializing } = useInitializeSettings()\n\nconst handleInitialize = async () => {\n    try {\n        await initializeSettings()\n    } catch (e) {\n        // error handled in composable/toast\n    }\n}\n\ndefinePageMeta({\n  layout: 'dashboard'\n})\n</script>\n\n<template>\n  <div class=\"space-y-6\">\n    <div class=\"border-b border-gray-200 bg-white rounded-t-lg\">\n      <div class=\"flex items-center justify-between px-6 py-4\">\n        <!-- Tab Navigation -->\n        <nav class=\"flex space-x-4 overflow-x-auto no-scrollbar\" aria-label=\"Tabs\">\n          <button\n            v-for=\"tab in tabs\"\n            :key=\"tab.id\"\n            @click=\"activeTab = tab.id\"\n            :class=\"[\n              'flex items-center px-3 py-2 text-sm font-medium rounded-md whitespace-nowrap transition-colors',\n              activeTab === tab.id\n                ? 'bg-brand-light text-brand-navy'\n                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'\n            ]\"\n          >\n            <component :is=\"tab.icon\" class=\"w-4 h-4 mr-2\" />\n            {{ tab.label }}\n          </button>\n        </nav>\n\n        <!-- Init Defaults Button -->\n        <button\n           @click=\"handleInitialize\"\n           :disabled=\"isInitializing\"\n           class=\"ml-4 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy disabled:opacity-50 inline-flex items-center\"\n        >\n           <Loader2 v-if=\"isInitializing\" class=\"w-4 h-4 animate-spin mr-2\" />\n           Initialize Defaults\n        </button>\n      </div>\n    </div>\n\n    <div class=\"p-6 bg-white rounded-b-lg shadow-sm border border-t-0 border-gray-200\">\n      <SettingsTabContent :category=\"activeTab\" />\n    </div>\n  </div>\n</template>\n"],"names":["SettingCategory","SettingDataType","_ssrRenderAttrs","_mergeProps","_ssrInterpolate","_unref","_ssrRenderComponent","Loader2","_ssrRenderAttr","_ssrRenderDynamicModel","_ssrRenderList","SettingsIcon","_ssrRenderVNode","_createVNode","_resolveDynamicComponent","SettingsTabContent"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAO,IAAK,oCAAAA,qBAAL;AACLA,mBAAA,SAAA,IAAU;AACVA,mBAAA,YAAA,IAAa;AACbA,mBAAA,SAAA,IAAU;AACVA,mBAAA,cAAA,IAAe;AACfA,mBAAA,UAAA,IAAW;AALD,SAAAA;AAAA,GAAA,mBAAA,CAAA,CAAA;AAQL,IAAK,oCAAAC,qBAAL;AACLA,mBAAA,QAAA,IAAS;AACTA,mBAAA,SAAA,IAAU;AACVA,mBAAA,QAAA,IAAS;AACTA,mBAAA,MAAA,IAAO;AAJG,SAAAA;AAAA,GAAA,mBAAA,CAAA,CAAA;ACLZ,MAAM,eAAe,MAAM;AACvB,QAAM,QAAQ,SAAA;AACd,QAAM,aAAa,MAAM,OAAO;AAEhC,SAAO,CAAC,SAAiB;AACvB,UAAM,YAAY,KAAK,WAAW,GAAG,IAAI,OAAO,IAAI,IAAI;AACxD,WAAO,aAAa,QAAQ,UAAU,GAAG,SAAS,KAAK,OAAO,SAAS;AAAA,EACzE;AACJ;AAEO,MAAM,cAAc,CACvB,OAAyB,GACzB,QAA0B,IAC1B,UACA,aACC;AACD,QAAM,SAAS,aAAA;AAEf,QAAM,cAAc,SAAS,MAAM;AAC/B,UAAM,SAA8B;AAAA,MAChC,MAAM,MAAM,IAAI;AAAA,MAChB,OAAO,MAAM,KAAK;AAAA,IAAA;AAEtB,QAAI,MAAM,QAAQ,EAAG,QAAO,WAAW,MAAM,QAAQ;AACrD,QAAI,MAAM,QAAQ,MAAM,OAAW,QAAO,WAAW,MAAM,QAAQ;AACnE,WAAO;AAAA,EACX,CAAC;AAED,QAAM,MAAM,SAAS,MAAM,YAAY,MAAM,IAAI,CAAC,IAAI,MAAM,KAAK,CAAC,IAAI,MAAM,QAAQ,CAAC,IAAI,MAAM,QAAQ,CAAC,EAAE;AAE1G,QAAM,EAAE,MAAM,SAAS,OAAO,QAAA,IAAY,SAA2B,MAAM,OAAO,WAAW,GAAG;AAAA,IAC5F,KAAK,IAAI;AAAA,IACT,OAAO;AAAA,IACP,OAAO,CAAC,WAAW;AAAA,IACnB,QAAQ;AAAA,EAAA,gBACX;AAED,SAAO;AAAA,IACH;AAAA,IACA,SAAS;AAAA,IACT;AAAA,IACA;AAAA,EAAA;AAER;AAEO,MAAM,mBAAmB,MAAM;AAClC,QAAM,SAAS,aAAA;AACf,QAAM,UAAU,IAAI,KAAK;AAEzB,QAAM,SAAS,OAAO,YAAkC;AACpD,YAAQ,QAAQ;AAChB,QAAI;AACA,YAAM,OAAO,OAAO,aAAa,QAAQ,GAAG,EAAE,GAAG;AAAA,QAC7C,QAAQ;AAAA,QACR,MAAM,EAAE,OAAO,QAAQ,MAAA;AAAA,MAAM,CAChC;AAGD,sBAAgB,CAAC,QAAQ,OAAO,QAAQ,YAAY,IAAI,WAAW,WAAW,CAAC;AAAA,IACnF,SAAS,OAAO;AACZ,YAAM;AAAA,IACV,UAAA;AACI,cAAQ,QAAQ;AAAA,IACpB;AAAA,EACJ;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EAAA;AAER;AAEO,MAAM,wBAAwB,MAAM;AACvC,QAAM,SAAS,aAAA;AACf,QAAM,UAAU,IAAI,KAAK;AAEzB,QAAM,SAAS,YAAY;AACvB,YAAQ,QAAQ;AAChB,QAAI;AACA,YAAM,OAAO,OAAO,sBAAsB,GAAG;AAAA,QACzC,QAAQ;AAAA,MAAA,CACX;AACD,sBAAgB,CAAC,QAAQ,OAAO,QAAQ,YAAY,IAAI,WAAW,WAAW,CAAC;AAAA,IACnF,SAAS,OAAO;AACZ,YAAM;AAAA,IACV,UAAA;AACI,cAAQ,QAAQ;AAAA,IACpB;AAAA,EACJ;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EAAA;AAER;;;;;;;;AC3FA,UAAM,QAAQ;AAId,UAAM,EAAyB,SAAS,WAAA,IAAe,iBAAA;AAEvD,UAAM,QAAQ,IAA+B,MAAM,QAAQ,KAAK;AAChE,UAAM,UAAU,IAAI,KAAK;AAGzB,UAAM,MAAM,MAAM,QAAQ,OAAO,CAAC,WAAW;AACzC,YAAM,QAAQ;AACd,cAAQ,QAAQ;AAAA,IACpB,CAAC;AAED,UAAM,oBAAoB,CAAC,QAAwB;AACjD,aAAO,IACJ,QAAQ,MAAM,GAAG,EACjB,QAAQ,YAAY,KAAK,EACzB,QAAQ,MAAM,CAAC,QAAQ,IAAI,YAAA,CAAa,EACxC,KAAA;AAAA,IACL;AAEA,UAAM,YAAY,MAAM,QAAQ,aAAa,gBAAgB;AAC7D,UAAM,SAAS,SAAS,MAAM,OAAO,MAAM,KAAK,MAAM,UAAU,MAAM,UAAU,IAAI;;mBAqC3EC,eAAAC,WAAA,EAAA,OAAM,8FAA0F,MAAA,CAAA,qIAI1F,kBAAkB,QAAA,QAAQ,GAAG,CAAA,kDAEOC,eAAA,QAAA,QAAQ,WAAW;UAKnD,WAAS;;;UAI2P,OAAA,QAAM,kBAAA;AAAA,QAAA;;UAM9F,OAAA,QAAM,kBAAA;AAAA,QAAA,+EAOlL,OAAA,QAAM,YAAA,UAAA;YACMC,MAAA,UAAA,GAAU;AAAE,gBAAAC,mBAAAD,MAAAE,YAAA,GAAA,EAAA,OAAM,mCAAA,GAAkC,MAAA,OAAA,CAAA;AAAA;;;;;sDAMnEC,cAAA,QAAM,QAAA,QAAQ,aAAaH,MAAA,eAAA,EAAgB,SAAM,WAAA,MAAA,IAA3CI,sBAAA,QAAA,QAAQ,aAAaJ,uBAAgB,4BACnC,MAAA,OAAK,IAAA,gJAGb,eAAa,QAAA,QAAQ,WAAW;YAG3B,QAAA,OAAO;gDAEFA,MAAA,UAAA,CAAU,IAAA,cAAA,EAAA,+PAAA;cAGLA,MAAA,UAAA,GAAU;AAAE,kBAAAC,mBAAAD,MAAAE,YAAA,GAAA,EAAA,OAAM,uBAAA,GAAsB,MAAA,OAAA,CAAA;AAAA;AAC1C,kBAAAD,mBAAAD,MAAA,IAAA,GAAA,EAAA,OAAM,UAAA,GAAS,MAAA,OAAA,CAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GlC,QAAS,IAAI;AAgBvB,UAAM,QAAQ;AAUD,QAAI,EAAE;AACnB,UAAM,cAAc,SAAS,MAAM,CAAC,EAAE,MAAM,YAAY,MAAM,UAAU;AAGxE,UAAM,kBAAkB;AAAA,MACpB,YAAY,QAAQ,CAAC,MAAM,UAAU,MAAM,SAAS,IAAI,CAAC,SAAS,QAAQ;AAAA,IAAA;AAI9E,UAAM,MAAM,CAAC,MAAM,UAAU,MAAM,SAAS,GAAG,CAAC,CAAC,QAAQ,MAAM,MAAM;AAChE,UAAI,UAAU,QAAQ;AAClB,wBAAgB,QAAQ,CAAC,QAAQ,MAAM;AAAA,MAE3C;AAAA,IACL,CAAC;AAED,UAAM,kBAAkB,IAA6B,IAAI;AACzD,UAAM,SAAS,IAAsB,gBAAgB,KAAK;AAG1D,UAAM,iBAAiB,CAAC,WAAW;AAC/B,UAAI,CAAC,gBAAgB,OAAO;AACxB,eAAO,QAAQ;AAAA,MACnB;AAAA,IACJ,CAAC;;;AA8BM,YAAA,OAAAH,eAAAC,WAAA,EAAA,OAAM,wBAAoB,MAAA,CAAA,CAAA,gGAAA;;UAuCd,gBAAA,OAAe;;;;;;;;;;;;;;;;;;;;;;ACrHlC,UAAM,QAAQ;AAId,UAAM,EAAE,MAAM,UAAU,SAAS,MAAA,IAAU,YAAY,GAAG,KAAK,SAAS,MAAM,MAAM,QAAQ,CAAC;AAC7F,UAAM,EAAE,QAAQ,cAAA,IAAkB,iBAAA;AAElC,UAAM,WAAW,SAAS,MAAM,SAAS,OAAO,QAAQ,EAAE;AAE1D,UAAM,eAAe,CAAC,6BAA6B,6BAA6B,gCAAgC,+BAA+B;AAC/I,UAAM,UAAU,SAAS,MAAM,MAAM,aAAa,gBAAgB,UAAU;AAE5E,UAAM,aAAa,SAAS,MAAM,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,QAAQ,2BAA2B,CAAC;AACjG,UAAM,aAAa,SAAS,MAAM,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,QAAQ,2BAA2B,CAAC;AACjG,UAAM,gBAAgB,SAAS,MAAM,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,QAAQ,8BAA8B,CAAC;AACvG,UAAM,iBAAiB,SAAS,MAAM,SAAS,MAAM,KAAK,CAAA,MAAK,EAAE,QAAQ,+BAA+B,CAAC;AAEzG,UAAM,gBAAgB;AAAA,MAAS,MAAM,QAAQ,QACvC,SAAS,MAAM,OAAO,CAAA,MAAK,CAAC,aAAa,SAAS,EAAE,GAAG,CAAC,IACxD,SAAS;AAAA,IAAA;AAGf,UAAM,mBAAmB,OAAO,KAAa,QAAgB;AACzD,UAAI;AACA,cAAM,cAAc,EAAE,KAAK,6BAA6B,OAAO,OAAO,GAAG,GAAG;AAC5E,cAAM,cAAc,EAAE,KAAK,6BAA6B,OAAO,OAAO,GAAG,GAAG;AAAA,MAChF,SAAS,GAAG;AACR,gBAAQ,MAAM,sCAAsC,CAAC;AACrD,cAAM,yBAAyB;AAAA,MACnC;AAAA,IACJ;;AAIO,YAAA,OAAAD,eAAAC,WAAA,EAAA,OAAM,yBAAqB,MAAA,CAAA,CAAA,GAAA;UACnBE,MAAA,OAAA,GAAO;;AACL,cAAAC,mBAAAD,MAAAE,YAAA,GAAA,EAAA,OAAM,uCAAA,GAAsC,MAAA,OAAA,CAAA;;iBAGzCF,MAAA,KAAA,GAAK;;;;AAKN,YAAA,SAAA,MAAS,WAAM,GAAA;;;;AAIUK,wBAAA,cAAA,QAAX,YAAO;;cAAoB,QAAQ,QAAQ,EAAE,IAAI,QAAQ,KAAK;AAAA,cAAK;AAAA,YAAA;;;;YAGjF,QAAA,OAAO;;cAKS,eAAA,OAAc;;cAAG,QAAQ,eAAA,MAAe,EAAE,IAAI,eAAA,MAAe,KAAK;AAAA,cAAK,SAAS,eAAA;AAAA,YAAA;;;;;cAE3E,WAAA,OAAU;;cAAG,QAAQ,WAAA,MAAW,EAAE,IAAI,WAAA,MAAW,KAAK;AAAA,cAAK,SAAS,WAAA;AAAA,YAAA;;;;cACpE,WAAA,OAAU;;cAAG,QAAQ,WAAA,MAAW,EAAE,IAAI,WAAA,MAAW,KAAK;AAAA,cAAK,SAAS,WAAA;AAAA,YAAA;;;;;cAExE,cAAA,OAAa;;cAAG,QAAQ,cAAA,MAAc,EAAE,IAAI,cAAA,MAAc,KAAK;AAAA,cAAK,SAAS,cAAA;AAAA,YAAA;;;;;;YAK7F,UAAU,WAAW,OAAO,WAAA,OAAY,SAAK,GAAA,CAAA;AAAA,YAC7C,WAAW,WAAW,OAAO,WAAA,OAAY,SAAK,GAAA,CAAA;AAAA,YAC9C,QAAQ,WAAW,OAAO,cAAA,OAAe,SAAK,KAAA,CAAA;AAAA,YAC9C;AAAA,UAAA;;;;;;;;;;;;;;;;;;;;;AC/DpB,UAAM,OAAO;AAAA,MACX,EAAE,IAAI,gBAAgB,SAAS,OAAO,WAAW,MAAMC,SAAA;AAAA,MACvD,EAAE,IAAI,gBAAgB,SAAS,OAAO,WAAW,MAAM,UAAA;AAAA,MACvD,EAAE,IAAI,gBAAgB,YAAY,OAAO,cAAc,MAAM,SAAA;AAAA,MAC7D,EAAE,IAAI,gBAAgB,cAAc,OAAO,iBAAiB,MAAM,KAAA;AAAA,MAClE,EAAE,IAAI,gBAAgB,UAAU,OAAO,YAAY,MAAM,OAAA;AAAA,IAAO;AAGlE,UAAM,YAAY,IAAqB,gBAAgB,OAAO;AAC9D,UAAM,EAA8B,SAAS,eAAA,IAAmB,sBAAA;;AAgBzD,YAAA,OAAAT,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,CAAA,2MAAA;AAMEO,oBAAA,OAAP,QAAG;;;UAG8H,UAAA,UAAc,IAAI;;AAO1IE,uBAAA,OAAAC,YAAAC,wBAAA,IAAI,IAAI,GAAA,EAAE,OAAM,eAAA,GAAc,IAAA,GAAA,OAAA;AAC3C,cAAA,IAAAV,eAAA,IAAI,KAAK,CAAA,WAAA;AAAA;0DAOFC,MAAA,cAAA,CAAc,IAAA,cAAA,EAAA,+OAAA;UAGVA,MAAA,cAAA,GAAc;AAAE,cAAAC,mBAAAD,MAAAE,YAAA,GAAA,EAAA,OAAM,4BAAA,GAA2B,MAAA,OAAA,CAAA;AAAA;;;;AAOhD,YAAAD,mBAAAS,aAAA,EAAA,UAAU,UAAA,MAAA,GAAS,MAAA,OAAA,CAAA;;;;;;;;;;;"}