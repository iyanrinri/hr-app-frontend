{"file":"dashboard-BCu4nyEL.js","mappings":"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","names":["CheckSquare","BarChart3","_ssrRenderAttr","_ssrRenderComponent","_unref","_ssrRenderList","_push","_parent","_ssrRenderVNode","_createVNode","_resolveDynamicComponent","_ssrInterpolate","_createBlock","_toDisplayString","_ssrRenderAttrs","_mergeProps"],"sources":["../../../../components/layout/Sidebar.vue","../../../../components/layout/TopBar.vue","../../../../composables/useWebSocket.ts","../../../../layouts/dashboard.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useAuthStore } from '@/stores/auth'\nimport { useNotificationStore } from '@/stores/notifications'\nimport { useAuth } from '@/composables/useAuth'\nimport { \n  LayoutDashboard, \n  Users, \n  Clock, \n  Settings, \n  LogOut, \n  Bell, \n  Calendar, \n  CalendarClock, \n  ChevronLeft, \n  ChevronRight, \n  FileText, \n  CheckSquare, \n  Timer, \n  Hourglass, \n  BarChart3, \n  Banknote, \n  Wallet \n} from 'lucide-vue-next'\n\nconst route = useRoute()\nconst authStore = useAuthStore()\nconst notificationStore = useNotificationStore()\nconst { logout } = useAuth()\nconst isCollapsed = ref(false)\n\nconst user = computed(() => authStore.user)\nconst unreadCount = computed(() => notificationStore.unreadCount)\nconst tenantSlug = route.params.tenant_slug as string\n\nconst navigation = [\n  { name: 'Dashboard', href: '/dashboard', icon: LayoutDashboard, roles: ['SUPER', 'ADMIN', 'HR', 'EMPLOYEE'] },\n  { name: 'My Attendance', href: '/dashboard/attendance', icon: Clock, roles: ['SUPER', 'ADMIN', 'HR', 'EMPLOYEE'] },\n  { name: \"Today's Attendance\", href: '/dashboard/attendance/today', icon: Bell, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'Employees', href: '/dashboard/employees', icon: Users, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'Attendance Periods', href: '/dashboard/attendance-periods', icon: Calendar, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'Settings', href: '/dashboard/settings', icon: Settings, roles: ['SUPER', 'ADMIN'] },\n  { name: 'Leave Config', href: '/dashboard/leaves/periods', icon: CalendarClock, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'My Leaves', href: '/dashboard/leaves/my', icon: FileText }, // All roles\n  { name: 'Approvals', href: '/dashboard/leaves/approvals', icon: CheckSquare, roles: ['SUPER', 'ADMIN', 'HR', 'MANAGER'] },\n  { name: 'Leave Admin', href: '/dashboard/leaves/admin', icon: BarChart3, roles: ['SUPER', 'ADMIN', 'HR'] },\n  // Overtime\n  { name: 'My Overtime', href: '/dashboard/overtime/my', icon: Timer }, // All roles\n  { name: 'Pending Overtime', href: '/dashboard/overtime/pending', icon: Hourglass, roles: ['SUPER', 'ADMIN', 'HR', 'MANAGER'] },\n  { name: 'Approval History', href: '/dashboard/overtime/approvals', icon: CheckSquare, roles: ['SUPER', 'ADMIN', 'HR', 'MANAGER'] },\n  { name: 'Overtime Admin', href: '/dashboard/overtime/admin', icon: BarChart3, roles: ['SUPER', 'ADMIN', 'HR'] },\n  // Payroll\n  { name: 'Payroll', href: '/dashboard/payroll', icon: Banknote, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'Payslips', href: '/dashboard/payslips', icon: FileText, roles: ['SUPER', 'ADMIN', 'HR'] },\n  { name: 'My Salary', href: '/dashboard/payroll/my', icon: Wallet }, // All roles\n  { name: 'My Payslips', href: '/dashboard/payslips/my', icon: FileText }, // All roles\n]\n\nconst filteredNavigation = computed(() => {\n  return navigation.filter((item) => {\n    if (item.name === 'Approvals' && user.value?.hasSubordinates) {\n      return true\n    }\n    return !item.roles || (user.value?.role && item.roles.includes(user.value.role))\n  }).map(item => ({\n    ...item,\n    href: tenantSlug ? `/${tenantSlug}${item.href}` : item.href\n  }))\n})\n\nconst handleLogout = () => {\n  logout()\n}\n</script>\n\n<template>\n  <div \n    class=\"flex flex-col bg-white border-r border-gray-200 min-h-screen transition-all duration-300\"\n    :class=\"isCollapsed ? 'w-20' : 'w-64'\"\n  >\n    <div class=\"flex items-center justify-between h-16 border-b border-gray-200 px-4\">\n      <span v-if=\"!isCollapsed\" class=\"text-xl font-bold text-brand-navy\">HR Portal</span>\n      <button\n        @click=\"isCollapsed = !isCollapsed\"\n        class=\"p-2 rounded-md hover:bg-gray-100 transition-colors ml-auto\"\n        :title=\"isCollapsed ? 'Expand Sidebar' : 'Collapse Sidebar'\"\n      >\n        <ChevronRight v-if=\"isCollapsed\" class=\"w-5 h-5 text-gray-600\" />\n        <ChevronLeft v-else class=\"w-5 h-5 text-gray-600\" />\n      </button>\n    </div>\n    \n    <nav class=\"flex-1 px-2 py-4 space-y-1 overflow-y-auto\">\n      <NuxtLink\n        v-for=\"item in filteredNavigation\"\n        :key=\"item.name\"\n        :to=\"item.href\"\n        class=\"flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors relative\"\n        :class=\"[\n          route.path === item.href\n            ? 'bg-brand-light text-brand-navy'\n            : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n          isCollapsed && 'justify-center'\n        ]\"\n        :title=\"isCollapsed ? item.name : ''\"\n      >\n        <component :is=\"item.icon\" class=\"w-5 h-5\" :class=\"!isCollapsed && 'mr-3'\" />\n        <span v-if=\"!isCollapsed\">{{ item.name }}</span>\n        \n        <span \n            v-if=\"item.name === 'Today\\'s Attendance' && unreadCount > 0\" \n            class=\"ml-auto bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\"\n        >\n            {{ unreadCount > 9 ? '9+' : unreadCount }}\n        </span>\n      </NuxtLink>\n    </nav>\n    \n    <div class=\"p-4 border-t border-gray-200 space-y-2\">\n      <NuxtLink \n        v-if=\"!isCollapsed && user\" \n        :to=\"tenantSlug ? `/${tenantSlug}/dashboard/profile` : '/dashboard/profile'\" \n        class=\"flex items-center p-2 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors mb-2\"\n      >\n        <div class=\"h-8 w-8 rounded-full bg-brand-navy flex items-center justify-center text-white shrink-0\">\n          <span class=\"text-xs font-bold\">{{ (user.name || 'U').charAt(0).toUpperCase() }}</span>\n        </div>\n        <div class=\"ml-3 overflow-hidden\">\n          <p class=\"text-sm font-medium text-gray-900 truncate\">{{ user.name }}</p>\n          <p class=\"text-xs text-gray-500 truncate\">{{ user.role }}</p>\n        </div>\n      </NuxtLink>\n      \n      <button\n        @click=\"handleLogout\"\n        class=\"flex items-center w-full px-4 py-2 text-sm font-medium text-red-600 rounded-md hover:bg-red-50 transition-colors\"\n        :class=\"isCollapsed && 'justify-center'\"\n        :title=\"isCollapsed ? 'Logout' : ''\"\n      >\n        <LogOut class=\"w-5 h-5\" :class=\"!isCollapsed && 'mr-3'\" />\n        <span v-if=\"!isCollapsed\">Logout</span>\n      </button>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { useAuthStore } from '@/stores/auth'\n\nconst authStore = useAuthStore()\n</script>\n\n<template>\n  <header class=\"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6\">\n    <h1 class=\"text-lg font-semibold text-gray-800\">\n      Welcome back, {{ authStore.user?.name || 'User' }}\n    </h1>\n    <div class=\"flex items-center space-x-4\">\n      <div class=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold\">\n        {{ (authStore.user?.name?.charAt(0) || 'U').toUpperCase() }}\n      </div>\n    </div>\n  </header>\n</template>\n","import { io, type Socket } from 'socket.io-client'\nimport { useAuthStore } from '@/stores/auth'\nimport { useNotificationStore } from '@/stores/notifications'\nimport type { TodayAttendanceDashboard } from '@/types/attendance'\nimport { useToast } from '@/composables/useToast'\n\nexport const useWebSocket = () => {\n    const authStore = useAuthStore()\n    const notificationStore = useNotificationStore()\n    const runtimeConfig = useRuntimeConfig()\n    const toast = useToast()\n    \n    let socket: Socket | null = null\n\n    // We only want to run this on client side\n    const connect = () => {\n        if (!import.meta.client) return\n\n        const token = authStore.token\n        const user = authStore.user\n\n        if (!token) return\n\n        // Only connect for allowed roles\n        const allowedRoles = ['SUPER', 'ADMIN', 'HR']\n        if (!user || !allowedRoles.includes(user.role)) {\n            console.log('â„¹ï¸ WebSocket disabled for role:', user?.role || 'unknown')\n            return\n        }\n\n        // Get tenantSlug from route\n        const route = useRoute()\n        const tenantSlug = route.params.tenant_slug as string\n        \n        if (!tenantSlug) {\n             // Try to extract from path if params missing (e.g. middleware issue?)\n             // But usually useRoute is reliable in setup\n             console.warn('âš ï¸ No tenantSlug found for WebSocket')\n             // return; // Don't return, maybe we are on a page where slug is available differently? \n             // Actually if we are in dashboard/[tenant_slug], it should be there.\n        }\n        \n        if (socket?.connected) return\n\n        console.log('ðŸ”Œ Initializing WebSocket connection to /attendance namespace...')\n\n        // Force connection to relative path '/attendance' \n        // This ensures:\n        // 1. It uses the current origin (Request URL will be domain/socket.io) -> Satisfies \"socket ke origin\"\n        // 2. It goes through the Nuxt proxy defined in nuxt.config.ts\n        // 3. It connects to the correct namespace '/attendance' (Critical for events)\n        socket = io('/attendance', {\n            path: '/socket.io',\n            auth: {\n                token: `Bearer ${token}`\n            },\n            transports: ['websocket', 'polling'], \n            reconnection: true,\n            reconnectionAttempts: 5,\n            reconnectionDelay: 1000\n        })\n\n        socket.on('connect_error', (error) => {\n             // Suppress annoying transport errors in console if it's just negotiating\n             if (error.message !== 'xhr poll error') {\n                console.warn('âš ï¸ [WebSocket] Connection Issue:', error.message)\n             }\n             notificationStore.setConnected(false)\n        })\n\n        socket.on('connect', () => {\n            console.log('âœ… Connected to attendance WebSocket')\n            notificationStore.setConnected(true)\n            \n            if (tenantSlug) {\n                socket?.emit('join-tenant', { tenantSlug })\n                console.log('ðŸ¢ Emitting join-tenant for:', tenantSlug)\n            }\n        })\n\n        socket.on('disconnect', () => {\n            console.log('âŒ Disconnected from attendance WebSocket')\n            notificationStore.setConnected(false)\n        })\n\n        socket.on('joined', (data: any) => {\n            console.log('âœ… Successfully joined tenant room:', data)\n        })\n\n        socket.on('attendance.dashboard_update', (data: any) => {\n             console.log('ðŸ”” [ATTENDANCE.DASHBOARD-UPDATE]', data)\n             notificationStore.incrementDashboardTrigger()\n\n             // Directly update the dashboard data cache for instant UI feedback\n             const { data: dashboardData } = useNuxtData<TodayAttendanceDashboard>('attendance-dashboard-today')\n             if (dashboardData.value) {\n                dashboardData.value = data\n                console.log('âœ… Dashboard data state updated directly')\n             } else {\n                 // Initialize if empty (e.g. user landed on other page but socket is active)\n                 dashboardData.value = data\n             }\n             \n             const { presentEmployees = [], lateEmployees = [] } = data\n             \n             if (presentEmployees.length > 0) {\n                 const latestEmployee = presentEmployees[0]\n                 const isLate = lateEmployees.some((emp: { id: string }) => emp.id === latestEmployee.id)\n                 \n                 const isClockOut = !!latestEmployee.checkOut\n                 const message = isClockOut \n                    ? 'Someone clocked out'\n                    : (isLate ? 'Someone clocked in (Late)' : 'Someone clocked in')\n                 \n                 notificationStore.addNotification({\n                     type: isClockOut ? 'CLOCK_OUT' : 'CLOCK_IN',\n                     employeeId: latestEmployee.id,\n                     employeeName: `${latestEmployee.firstName} ${latestEmployee.lastName}`,\n                     timestamp: (isClockOut ? latestEmployee.checkOut : latestEmployee.checkIn) || new Date().toISOString(),\n                     message\n                 })\n                 \n                 // Show Toast\n                 if (isLate && !isClockOut) {\n                    toast.warning(message, 'Late Clock In')\n                 } else {\n                    toast.success(message, isClockOut ? 'Clock Out' : 'Clock In')\n                 }\n             } else {\n                // If it was just a general update (e.g. someone clocked out, or just period update)\n                // We can show a generic toast or none. Original code showed \"Dashboard updated\"\n                toast.info('Attendance Dashboard Updated', 'Real-time Update')\n             }\n        })\n\n        socket.onAny((eventName, ...args) => {\n            console.log('ðŸ“¡ [WEBSOCKET EVENT]', eventName, args)\n        })\n\n        notificationStore.setSocket(socket)\n    }\n\n    const disconnect = () => {\n        if (socket) {\n            socket.disconnect()\n            socket = null\n            notificationStore.setSocket(null)\n            notificationStore.setConnected(false)\n        }\n    }\n\n    return {\n        connect,\n        disconnect\n    }\n}\n","<script setup lang=\"ts\">\nimport Sidebar from '@/components/layout/Sidebar.vue'\nimport TopBar from '@/components/layout/TopBar.vue'\nimport { onMounted, onUnmounted } from 'vue'\nimport { useWebSocket } from '@/composables/useWebSocket'\nimport { useAuthStore } from '@/stores/auth'\n\nconst { connect, disconnect } = useWebSocket()\nconst authStore = useAuthStore()\n\n// Profile Sync Logic\n// Since we don't have a specific Hook yet, we can do a simple check\n// Ideally this should be a middleware or plugin\nonMounted(async () => {\n    connect()\n    \n    // Simple profile sync\n    await authStore.fetchProfile()\n})\n\nonUnmounted(() => {\n    disconnect()\n})\n</script>\n\n<template>\n  <div class=\"flex min-h-screen bg-gray-50\">\n    <Sidebar />\n    <div class=\"flex-1 flex flex-col h-screen overflow-hidden\">\n      <TopBar />\n      <main class=\"flex-1 p-6 overflow-auto bg-gray-50\">\n        <slot />\n      </main>\n    </div>\n  </div>\n</template>\n"],"version":3}