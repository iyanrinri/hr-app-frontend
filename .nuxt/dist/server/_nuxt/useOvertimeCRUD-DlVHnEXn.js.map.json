{"file":"useOvertimeCRUD-DlVHnEXn.js","mappings":";;;AASA,MAAM,eAAe,MAAM;AACvB,QAAM,QAAQ,SAAA;AACd,QAAM,aAAa,MAAM,OAAO;AAEhC,SAAO,CAAC,SAAiB;AACvB,UAAM,YAAY,KAAK,WAAW,GAAG,IAAI,OAAO,IAAI,IAAI;AACxD,WAAO,aAAa,QAAQ,UAAU,GAAG,SAAS,KAAK,OAAO,SAAS;AAAA,EACzE;AACJ;AAIO,MAAM,sBAAsB,CAAC,UAAqC,OAAO;AAC5E,QAAM,SAAS,aAAA;AAEf,QAAM,cAAc,SAAS,MAAM;AAC/B,UAAM,IAAI,MAAM,OAAO;AACvB,UAAM,SAA8B,CAAA;AACpC,QAAI,EAAE,SAAS,OAAW,QAAO,OAAO,EAAE;AAC1C,QAAI,EAAE,SAAS,OAAW,QAAO,OAAO,EAAE;AAC1C,QAAI,EAAE,OAAQ,QAAO,SAAS,EAAE;AAChC,QAAI,EAAE,UAAW,QAAO,YAAY,EAAE;AACtC,QAAI,EAAE,QAAS,QAAO,UAAU,EAAE;AAClC,QAAI,EAAE,WAAY,QAAO,aAAa,EAAE;AACxC,WAAO;AAAA,EACX,CAAC;AAED,QAAM,EAAE,MAAM,SAAS,OAAO,QAAA,IAAY,SAA+B,MAAM,OAAO,oBAAoB,GAAG;AAAA,IACzG,KAAK;AAAA,IACL,OAAO;AAAA,IACP,OAAO,CAAC,WAAW;AAAA,IACnB,QAAQ;AAAA,EAAA,gBACX;AAED,SAAO;AAAA,IACH;AAAA,IACA,SAAS;AAAA,IACT;AAAA,IACA;AAAA,EAAA;AAER;AAmBO,MAAM,2BAA2B,MAAM;AAC1C,QAAM,SAAS,aAAA;AACf,QAAM,UAAU,IAAI,KAAK;AAEzB,QAAM,SAAS,OAAO,SAAgC,YAAyE;AAC3H,YAAQ,QAAQ;AAChB,QAAI;AACA,YAAM,OAAO,OAAO,oBAAoB,GAAG;AAAA,QACvC,QAAQ;AAAA,QACR,MAAM;AAAA,MAAA,CACT;AACD,UAAI,SAAS,UAAW,SAAQ,UAAA;AAAA,IACpC,SAAS,OAAO;AACZ,UAAI,SAAS,QAAS,SAAQ,QAAQ,KAAK;AAC3C,YAAM;AAAA,IACV,UAAA;AACI,cAAQ,QAAQ;AAAA,IACpB;AAAA,EACJ;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EAAA;AAER;AAEO,MAAM,2BAA2B,MAAM;AAC1C,QAAM,SAAS,aAAA;AACf,QAAM,UAAU,IAAI,KAAK;AAEzB,QAAM,SAAS,OAAO,IAAqB,SAAgC,YAAyE;AAChJ,YAAQ,QAAQ;AAChB,QAAI;AACA,YAAM,OAAO,OAAO,sBAAsB,EAAE,EAAE,GAAG;AAAA,QAC7C,QAAQ;AAAA,QACR,MAAM;AAAA,MAAA,CACT;AACD,UAAI,SAAS,UAAW,SAAQ,UAAA;AAAA,IACpC,SAAS,OAAO;AACZ,UAAI,SAAS,QAAS,SAAQ,QAAQ,KAAK;AAC1C,YAAM;AAAA,IACX,UAAA;AACI,cAAQ,QAAQ;AAAA,IACpB;AAAA,EACJ;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EAAA;AAER;AAEO,MAAM,2BAA2B,MAAM;AAC1C,QAAM,SAAS,aAAA;AACf,QAAM,UAAU,IAAI,KAAK;AAEzB,QAAM,SAAS,OAAO,OAAwB;AAC1C,YAAQ,QAAQ;AAChB,QAAI;AACA,YAAM,OAAO,OAAO,sBAAsB,EAAE,EAAE,GAAG;AAAA,QAC7C,QAAQ;AAAA,MAAA,CACX;AAAA,IACL,SAAS,OAAO;AACZ,YAAM;AAAA,IACV,UAAA;AACI,cAAQ,QAAQ;AAAA,IACpB;AAAA,EACJ;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EAAA;AAER;","names":[],"sources":["../../../../composables/useOvertimeCRUD.ts"],"sourcesContent":["import type { \n    OvertimeRequest, \n    CreateOvertimePayload,\n    UpdateOvertimePayload,\n    OvertimeListResponse,\n    OvertimeFilters\n} from '@/types/overtime'\n\n// Helper to construct URL with tenant slug\nconst useTenantUrl = () => {\n    const route = useRoute()\n    const tenantSlug = route.params.tenant_slug as string\n    \n    return (path: string) => {\n      const cleanPath = path.startsWith('/') ? path : `/${path}`\n      return tenantSlug ? `/api/${tenantSlug}${cleanPath}` : `/api${cleanPath}`\n    }\n}\n\n// --- Overtime Requests (CRUD) ---\n\nexport const useOvertimeRequests = (filters: MaybeRef<OvertimeFilters> = {}) => {\n    const getUrl = useTenantUrl()\n\n    const queryParams = computed(() => {\n        const f = unref(filters)\n        const params: Record<string, any> = {}\n        if (f.skip !== undefined) params.skip = f.skip\n        if (f.take !== undefined) params.take = f.take\n        if (f.status) params.status = f.status\n        if (f.startDate) params.startDate = f.startDate\n        if (f.endDate) params.endDate = f.endDate\n        if (f.employeeId) params.employeeId = f.employeeId\n        return params\n    })\n\n    const { data, pending, error, refresh } = useFetch<OvertimeListResponse>(() => getUrl('/overtime-requests'), {\n        key: 'overtime-requests',\n        query: queryParams,\n        watch: [queryParams],\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\nexport const useOvertimeRequestDetail = (id: MaybeRef<string | number>) => {\n    const getUrl = useTenantUrl()\n\n    const { data, pending, error, refresh } = useFetch<OvertimeRequest>(() => getUrl(`/overtime-requests/${unref(id)}`), {\n        key: `overtime-request-${unref(id)}`,\n        immediate: !!unref(id),\n        server: false\n    })\n\n    return {\n        data,\n        loading: pending,\n        error,\n        refresh\n    }\n}\n\nexport const useCreateOvertimeRequest = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async (payload: CreateOvertimePayload, options?: { onSuccess?: () => void, onError?: (error: any) => void }) => {\n        loading.value = true\n        try {\n            await $fetch(getUrl('/overtime-requests'), {\n                method: 'POST',\n                body: payload\n            })\n            if (options?.onSuccess) options.onSuccess()\n        } catch (error) {\n            if (options?.onError) options.onError(error)\n            throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n\nexport const useUpdateOvertimeRequest = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async (id: string | number, payload: UpdateOvertimePayload, options?: { onSuccess?: () => void, onError?: (error: any) => void }) => {\n        loading.value = true\n        try {\n            await $fetch(getUrl(`/overtime-requests/${id}`), {\n                method: 'PATCH',\n                body: payload\n            })\n            if (options?.onSuccess) options.onSuccess()\n        } catch (error) {\n            if (options?.onError) options.onError(error)\n             throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n\nexport const useDeleteOvertimeRequest = () => {\n    const getUrl = useTenantUrl()\n    const loading = ref(false)\n\n    const mutate = async (id: string | number) => {\n        loading.value = true\n        try {\n            await $fetch(getUrl(`/overtime-requests/${id}`), {\n                method: 'DELETE'\n            })\n        } catch (error) {\n            throw error\n        } finally {\n            loading.value = false\n        }\n    }\n\n    return {\n        mutate,\n        loading\n    }\n}\n"],"version":3}