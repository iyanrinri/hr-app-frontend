{"file":"index-CxL_MVrY.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,UAAM,EAAE,MAAM,SAAS,SAAS,WAAW,QAAA,IAAY,aAAA;AACvD,UAAM,EAAE,QAAQ,eAAe,SAAS,WAAA,IAAe,mBAAA;AACvD,UAAM,EAAE,QAAQ,eAAe,SAAS,YAAA,IAAgB,0BAAA;AACxD,UAAM,EAAE,QAAQ,eAAe,SAAS,WAAA,IAAe,0BAAA;AAEvD,UAAM,YAAY,IAAI,KAAK;AAE3B,UAAM,eAAe,OAAO,SAAe;AACvC,YAAM,cAAc,IAAI;AACxB,cAAA;AAAA,IACJ;AAEA,UAAM,sBAAsB,YAAY;AACpC,YAAM,cAAA;AACN,cAAA;AAAA,IACJ;AAEA,UAAM,sBAAsB,OAAO,SAAc;AAC7C,YAAM,cAAc,MAAM;AAAA,QACtB,WAAW,MAAM;AACZ,oBAAU,QAAQ;AAClB,kBAAA;AAAA,QACL;AAAA,MAAA,CACH;AAAA,IACL;;AAIe,UAAAA,MAAA,SAAA,MAAcA,MAAA,OAAA,GAAO;AAAE,cAAA,OAAAC,eAAAC,WAAA,EAAA,OAAM,oDAAgD,MAAA,CAAA,CAAA,2FAAA;AAAA;AAI5E,cAAA,OAAAD,eAAAC,WAAA,EAAA,OAAM,2DAAuD,MAAA,CAAA,CAAA,yTAAA;aAYzD,UAAA,OAAS;;AAIP,gBAAAC,mBAAAH,MAAA,MAAA,GAAA,EAAA,OAAM,eAAA,GAAc,MAAA,OAAA,CAAA;;;;;;AAWlB,cAAAG,mBAAAH,MAAA,UAAA,GAAA,EAAA,OAAM,2CAAA,GAA0C,MAAA,OAAA,CAAA;;;UASvD,iBAAiBA,MAAA,OAAA,EAAQ,kBAAkBA,MAAA,OAAA,EAAQ;AAAA,UACnD,YAAYA,MAAA,OAAA,EAAQ,SAAS,IAAIA,MAAA,OAAA,EAAQ,QAAQ;AAAA,UACjD,aAAaA,MAAA,WAAA;AAAA,UACb,YAAYA,MAAA,UAAA;AAAA,UACZ,SAAS;AAAA,UACV,MAAK;AAAA,UACJ,UAAQ;AAAA,UACR,UAAQ;AAAA,QAAA;6FAMNI,eAAAJ,MAAA,OAAA,EAAQ,SAAS,KAAOI,eAAAJ,MAAA,OAAA,EAAQ,QAAQ;AAIjC,cAAAG,mBAAAH,MAAA,MAAA,GAAA,EAAA,OAAM,mCAAA,GAAkC,MAAA,OAAA,CAAA;AAC7C,cAAA,IAAAI,eAAAJ,MAAA,OAAA,EAAQ,MAAM,QAAQA,MAAA,OAAA,EAAQ,IAAI,CAAA,iHAAA;AAG/B,cAAAG,mBAAAH,MAAA,IAAA,GAAA,EAAA,OAAM,mCAAA,GAAkC,MAAA,OAAA,CAAA;AAC3C,cAAA,IAAAI,eAAAJ,MAAA,OAAA,EAAQ,MAAM,SAASA,MAAA,OAAA,EAAQ,KAAK,CAAA,iHAAA;AAG3B,cAAAG,mBAAAH,MAAA,UAAA,GAAA,EAAA,OAAM,mCAAA,GAAkC,MAAA,OAAA,CAAA;AAChD,cAAA,KAAAI,eAAAJ,MAAA,OAAA,EAAQ,kBAAkBA,MAAA,OAAA,EAAQ,EAAE,CAAA,4CAAA;aAOlC,UAAA,OAAS;;AAIP,gBAAAG,mBAAAH,MAAA,MAAA,GAAA,EAAA,OAAM,eAAA,GAAc,MAAA,OAAA,CAAA;;;;;;YASzB,UAAA,OAAS;;;YAMb,aAAaA,MAAA,OAAA;AAAA,YACb,WAAWA,MAAA,UAAA;AAAA,YACX,SAAS;AAAA,YACT,UAAQ;AAAA,YACR,sBAAQ,UAAA,QAAS;AAAA,UAAA;;;AAGH,gBAAAG,mBAAAE,aAAA,EAAA,SAASL,MAAA,OAAA,EAAA,GAAO,MAAA,OAAA,CAAA;AAAA;;;;;;;;;;;;","names":["_unref","_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_ssrInterpolate","ProfileView"],"sources":["../../../../pages/[tenant_slug]/dashboard/profile/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { useMyProfile, useUpdateMyProfile, useUploadMyProfilePicture, useDeleteMyProfilePicture } from '@/composables/useEmployeeProfile'\nimport ProfileView from '@/components/profile/ProfileView.vue'\nimport ProfileForm from '@/components/profile/ProfileForm.vue'\nimport ProfilePictureUpload from '@/components/profile/ProfilePictureUpload.vue'\nimport { Mail, Shield, BadgeCheck, Pencil } from 'lucide-vue-next'\n\ndefinePageMeta({\n  layout: 'dashboard'\n})\n\nconst { data: profile, loading: isLoading, refresh } = useMyProfile()\nconst { mutate: updateProfile, loading: isUpdating } = useUpdateMyProfile()\nconst { mutate: uploadPicture, loading: isUploading } = useUploadMyProfilePicture()\nconst { mutate: deletePicture, loading: isDeleting } = useDeleteMyProfilePicture()\n\nconst isEditing = ref(false)\n\nconst handleUpload = async (file: File) => {\n    await uploadPicture(file)\n    refresh()\n}\n\nconst handleDeletePicture = async () => {\n    await deletePicture()\n    refresh()\n}\n\nconst handleUpdateProfile = async (data: any) => {\n    await updateProfile(data, {\n        onSuccess: () => {\n             isEditing.value = false\n             refresh()\n        }\n    })\n}\n</script>\n\n<template>\n    <div v-if=\"isLoading || !profile\" class=\"min-h-[400px] flex items-center justify-center\">\n        <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy\"></div>\n    </div>\n\n    <div v-else class=\"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div class=\"md:flex md:items-center md:justify-between\">\n        <div class=\"flex-1 min-w-0\">\n          <h2 class=\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate\">\n            My Profile\n          </h2>\n          <p class=\"mt-1 text-sm text-gray-500\">\n            View and manage your personal information\n          </p>\n        </div>\n        <div class=\"mt-4 flex md:mt-0 md:ml-4\">\n           <button \n             v-if=\"!isEditing\"\n             @click=\"isEditing = true\"\n             class=\"inline-flex items-center px-4 py-2 border border-transparent shadow-lg shadow-brand-navy/20 text-sm font-medium rounded-md text-white bg-brand-navy hover:bg-brand-navy/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy\"\n           >\n              <Pencil class=\"w-4 h-4 mr-2\" />\n              Edit Profile\n           </button>\n        </div>\n      </div>\n\n      <div class=\"relative mb-8\">\n        <!-- Decorative Background -->\n        <div class=\"h-48 rounded-xl bg-gradient-to-r from-brand-navy/90 via-blue-600/90 to-indigo-600/90 shadow-xl overflow-hidden relative\">\n          <div class=\"absolute inset-0 opacity-20 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay\"></div>\n          <div class=\"absolute top-0 right-0 p-8 opacity-10\">\n            <BadgeCheck class=\"w-64 h-64 text-white transform rotate-12\" />\n          </div>\n        </div>\n        \n        <!-- Profile Header Info -->\n        <div class=\"px-8 relative\">\n           <div class=\"flex flex-col md:flex-row items-end gap-6 -mt-12\">\n            <div class=\"relative z-10\">\n              <ProfilePictureUpload \n                :currentImageUrl=\"profile.profilePicture || profile.profilePictureUrl\" \n                :altText=\"`${profile.firstName} ${profile.lastName}`\"\n                :isUploading=\"isUploading\"\n                :isDeleting=\"isDeleting\"\n                :canEdit=\"true\"\n                size=\"lg\"\n                @upload=\"handleUpload\"\n                @delete=\"handleDeletePicture\"\n              />\n            </div>\n            \n            <div class=\"flex-1 pb-2\">\n              <h1 class=\"text-3xl font-bold text-gray-900\">\n                {{ profile.firstName }} {{ profile.lastName }}\n              </h1>\n              <div class=\"flex flex-wrap items-center text-sm text-gray-600 gap-3 mt-2 font-medium\">\n                <span class=\"flex items-center bg-gray-100 px-3 py-1 rounded-full border border-gray-200 text-gray-700\">\n                  <Shield class=\"w-3.5 h-3.5 mr-2 text-brand-navy\" />\n                  {{ profile.user?.role || profile.role }}\n                </span>\n                <span class=\"flex items-center bg-gray-100 px-3 py-1 rounded-full border border-gray-200 text-gray-700\">\n                  <Mail class=\"w-3.5 h-3.5 mr-2 text-brand-navy\" />\n                  {{ profile.user?.email || profile.email }}\n                </span>\n                <span class=\"flex items-center bg-gray-100 px-3 py-1 rounded-full border border-gray-200 text-gray-700\">\n                  <BadgeCheck class=\"w-3.5 h-3.5 mr-2 text-brand-navy\" />\n                  #{{ profile.employeeNumber || profile.id }}\n                </span>\n              </div>\n            </div>\n\n            <div class=\"pb-4 z-10\">\n               <button \n                 v-if=\"!isEditing\"\n                 @click=\"isEditing = true\"\n                 class=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-md text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy\"\n               >\n                  <Pencil class=\"w-4 h-4 mr-2\" />\n                  Edit Profile\n               </button>\n            </div>\n           </div>\n        </div>\n      </div>\n\n      <div class=\"mt-16 pt-2\">\n          <div v-if=\"isEditing\" class=\"bg-white rounded-xl shadow-lg border border-gray-100 p-8\">\n              <div class=\"mb-6 pb-6 border-b border-gray-100\">\n                  <h2 class=\"text-xl font-bold text-gray-900\">Edit Profile Information</h2>\n                  <p class=\"text-sm text-gray-500 mt-1\">Update your personal and contact details</p>\n              </div>\n              <ProfileForm \n                :initialData=\"profile\" \n                :isLoading=\"isUpdating\"\n                :isAdmin=\"false\" \n                @submit=\"handleUpdateProfile\"\n                @cancel=\"isEditing = false\"\n              />\n          </div>\n          <ProfileView v-else :profile=\"profile\" />\n      </div>\n    </div>\n</template>\n"],"version":3}