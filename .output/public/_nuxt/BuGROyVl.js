import{_ as J}from"./Dnm_KAh1.js";import{a as Z,_ as ee}from"./B-kHxmq3.js";import{_ as ie}from"./-LiBT2fH.js";import{_ as te}from"./BfigT44c.js";import{_ as se}from"./B9YZYzJt.js";import{g as L,j as V,c as a,o as t,a as e,F as j,l as F,t as n,b as s,w as m,d as $,v as W,k as o,U as de,p as h,K as z,I as A,aH as ue,s as ce,V as me,$ as pe,aI as ge,x as ae,W as ye,z as O,aJ as fe,aK as ve,G as be,a7 as xe,y as _e,a8 as he,n as we}from"./DX_cbf2s.js";import{d as le,u as $e,e as ke,f as Se,g as Ne}from"./crM-xtPk.js";import{f as Ce,g as Ie,h as Ue,i as De,_ as Ee,d as Ve,e as Pe}from"./CbFtUkUC.js";import{c as Y}from"./uRmCsCMF.js";import{u as je}from"./H1PkYqcn.js";import"./D2JNKblU.js";import"./czVTDFG8.js";const Me={key:0,class:"space-y-4"},Be={class:"max-h-[200px] overflow-y-auto border rounded-md p-2 space-y-1"},Ae=["checked","onChange"],Fe={class:"text-sm"},Le={class:"text-xs text-gray-400"},Te={class:"flex gap-2 justify-end"},He={key:1},ze={class:"mb-4 max-h-[150px] overflow-y-auto space-y-2"},qe={key:0,class:"text-sm text-gray-500 italic"},Oe={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 text-xs font-bold"},Re={class:"text-sm font-medium"},We={class:"text-xs text-gray-500"},Je=L({__name:"SubordinateManager",props:{employeeId:{},currentSubordinates:{},allEmployees:{},isSaving:{type:Boolean}},emits:["save"],setup(p,{emit:u}){const g=p,_=u,b=V(!1),d=V([]),P=()=>{d.value=g.currentSubordinates.map(w=>Number(w.id)),b.value=!0},k=()=>{_("save",d.value),b.value=!1},S=w=>{d.value.includes(w)?d.value=d.value.filter(i=>i!==w):d.value.push(w)};return(w,i)=>{const l=J;return b.value?(t(),a("div",Me,[e("div",Be,[(t(!0),a(j,null,F(p.allEmployees,c=>(t(),a("label",{key:c.id,class:"flex items-center gap-2 p-1 hover:bg-gray-50 rounded cursor-pointer"},[e("input",{type:"checkbox",checked:d.value.includes(Number(c.id)),onChange:T=>S(Number(c.id)),class:"rounded border-gray-300 text-brand-navy focus:ring-brand-navy"},null,40,Ae),e("span",Fe,n(c.firstName)+" "+n(c.lastName),1),e("span",Le,"("+n(c.position)+")",1)]))),128))]),e("div",Te,[s(l,{variant:"ghost",onClick:i[0]||(i[0]=c=>b.value=!1)},{default:m(()=>[...i[1]||(i[1]=[$("Cancel",-1)])]),_:1}),s(l,{onClick:k,isLoading:p.isSaving},{default:m(()=>[...i[2]||(i[2]=[$("Save Assignment",-1)])]),_:1},8,["isLoading"])])])):(t(),a("div",He,[e("div",ze,[p.currentSubordinates.length===0?(t(),a("div",qe," No direct reports. ")):(t(!0),a(j,{key:1},F(p.currentSubordinates,c=>(t(),a("div",{key:c.id,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-md border border-gray-100"},[e("div",Oe,n(c.firstName[0])+n(c.lastName[0]),1),e("div",null,[e("p",Re,n(c.firstName)+" "+n(c.lastName),1),e("p",We,n(c.position),1)])]))),128))]),s(l,{variant:"secondary",class:"w-full",onClick:P},{default:m(()=>[...i[3]||(i[3]=[$(" Manage Subordinates ",-1)])]),_:1})]))}}}),Ke={class:"font-semibold text-sm text-gray-900 text-center"},Ge={class:"text-xs text-gray-500 text-center"},R=L({__name:"NodeCard",props:{name:{},position:{},isCurrent:{type:Boolean,default:!1},isManager:{type:Boolean,default:!1},isSubordinate:{type:Boolean,default:!1}},setup(p){return(u,g)=>(t(),a("div",{class:W(o(Y)("flex flex-col items-center p-3 rounded-lg border shadow-sm min-w-[150px] bg-white transition-all hover:shadow-md",p.isCurrent?"border-brand-navy ring-2 ring-brand-navy/20 bg-brand-navy/5":"border-gray-200",p.isManager?"border-purple-200 bg-purple-50":"",p.isSubordinate?"border-green-200 bg-green-50":""))},[e("div",{class:W(o(Y)("w-10 h-10 rounded-full flex items-center justify-center mb-2",p.isCurrent?"bg-brand-navy text-white":"bg-gray-100 text-gray-500",p.isManager?"bg-purple-100 text-purple-600":"",p.isSubordinate?"bg-green-100 text-green-600":""))},[s(o(de),{class:"w-5 h-5"})],2),e("p",Ke,n(p.name),1),e("p",Ge,n(p.position),1)],2))}}),Qe={key:0,class:"p-8 text-center text-gray-500"},Xe={key:1,class:"p-8 text-center text-red-500"},Ye={key:2,class:"flex flex-col items-center space-y-8 p-6 overflow-auto bg-gray-50 rounded-xl min-h-[400px]"},Ze={key:0,class:"flex flex-col items-center"},et={key:1,class:"text-xs text-gray-400 mb-4 italic"},tt={class:"flex flex-col items-center relative z-10"},st={key:0,class:"h-8 w-px bg-gray-300"},at={key:2,class:"flex gap-6 items-start justify-center relative"},lt={key:0,class:"absolute -top-4 left-10 right-10 h-px bg-gray-300"},ot={key:3,class:"text-xs text-gray-400 italic"},rt=L({__name:"OrgChart",props:{employeeId:{}},setup(p){return(u,g)=>u.loading?(t(),a("div",Qe,"Loading organization chart...")):u.error||!u.tree?(t(),a("div",Xe,"Failed to load organization chart")):(t(),a("div",Ye,[u.tree.manager?(t(),a("div",Ze,[s(R,{name:`${u.tree.manager.firstName} ${u.tree.manager.lastName}`,position:u.tree.manager.position,isManager:""},null,8,["name","position"]),g[0]||(g[0]=e("div",{class:"h-8 w-px bg-gray-300"},null,-1))])):(t(),a("div",et,"No Manager (Root)")),e("div",tt,[s(R,{name:`${u.tree.employee.firstName} ${u.tree.employee.lastName}`,position:u.tree.employee.position,isCurrent:""},null,8,["name","position"]),u.tree.subordinates.length>0?(t(),a("div",st)):h("",!0)]),u.tree.subordinates.length>0?(t(),a("div",at,[u.tree.subordinates.length>1?(t(),a("div",lt)):h("",!0),(t(!0),a(j,null,F(u.tree.subordinates,_=>(t(),a("div",{key:_.id,class:"flex flex-col items-center relative"},[g[1]||(g[1]=e("div",{class:"h-4 w-px bg-gray-300 absolute -top-4"},null,-1)),s(R,{name:`${_.firstName} ${_.lastName}`,position:_.position,isSubordinate:""},null,8,["name","position"])]))),128))])):h("",!0),u.tree.subordinates.length===0?(t(),a("div",ot,"No direct subordinates")):h("",!0)]))}}),nt={key:0,class:"space-y-6"},it={class:"flex justify-between items-center bg-gray-50 p-4 rounded-lg border border-gray-200"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ut={key:0,class:"space-y-3"},ct=["value"],mt={class:"flex gap-2"},pt={key:1,class:"flex justify-between items-center"},gt={key:0},yt={class:"font-medium text-gray-900"},ft={class:"text-xs text-gray-500"},vt={key:1,class:"text-gray-500 italic"},bt={key:1,class:"text-gray-500 italic"},xt=L({__name:"HierarchyManager",props:{employeeId:{}},setup(p){const u=p,{data:g}=le(u.employeeId),{data:_}=$e(),{mutate:b,loading:d}=ke(),{mutate:P,loading:k}=Se(),S=V(!1),w=V(!1),i=V(null),l=z(()=>_.value?.filter(U=>U.id!==u.employeeId)||[]),c=async()=>{await b(u.employeeId,{managerId:i.value}),w.value=!1},T=()=>{i.value=g.value?.managerId||null,w.value=!0},M=U=>_.value?.find(D=>String(D.id)===String(U)),q=async U=>{await P(u.employeeId,{subordinateIds:U})};return(U,y)=>{const D=J,C=Z,I=ee,x=te,B=se;return o(g)?(t(),a("div",nt,[e("div",it,[y[3]||(y[3]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Organization Hierarchy"),e("p",{class:"text-sm text-gray-500"},"Manage reporting lines and view structure")],-1)),s(D,{variant:"secondary",onClick:y[0]||(y[0]=N=>S.value=!S.value)},{default:m(()=>[s(o(ue),{class:"w-4 h-4 mr-2"}),$(" "+n(S.value?"Hide Org Chart":"View Inheritance"),1)]),_:1})]),S.value?(t(),A(B,{key:0},{default:m(()=>[s(I,null,{default:m(()=>[s(C,null,{default:m(()=>[...y[4]||(y[4]=[$("Organization Chart",-1)])]),_:1})]),_:1}),s(x,null,{default:m(()=>[s(rt,{employeeId:p.employeeId},null,8,["employeeId"])]),_:1})]),_:1})):h("",!0),e("div",dt,[s(B,null,{default:m(()=>[s(I,{class:"pb-2"},{default:m(()=>[s(C,{class:"text-base flex items-center gap-2"},{default:m(()=>[s(o(ce),{class:"w-4 h-4 text-purple-600"}),y[5]||(y[5]=$(" Reports To (Manager) ",-1))]),_:1})]),_:1}),s(x,null,{default:m(()=>[w.value?(t(),a("div",ut,[me(e("select",{"onUpdate:modelValue":y[1]||(y[1]=N=>i.value=N),class:"w-full p-2 border rounded-md text-sm bg-white text-black"},[y[6]||(y[6]=e("option",{value:null},"-- No Manager --",-1)),(t(!0),a(j,null,F(l.value,N=>(t(),a("option",{key:N.id,value:Number(N.id)},n(N.firstName)+" "+n(N.lastName)+" ("+n(N.position)+") ",9,ct))),128))],512),[[pe,i.value]]),e("div",mt,[s(D,{onClick:c,isLoading:o(d)},{default:m(()=>[...y[7]||(y[7]=[$("Save",-1)])]),_:1},8,["isLoading"]),s(D,{variant:"ghost",onClick:y[2]||(y[2]=N=>w.value=!1)},{default:m(()=>[...y[8]||(y[8]=[$("Cancel",-1)])]),_:1})])])):(t(),a("div",pt,[e("div",null,[o(g).managerId?(t(),a(j,{key:0},[M(o(g).managerId)?(t(),a("div",gt,[e("p",yt,n(M(o(g).managerId)?.firstName)+" "+n(M(o(g).managerId)?.lastName),1),e("p",ft,n(M(o(g).managerId)?.position),1)])):(t(),a("p",vt,"Unknown Manager (ID: "+n(o(g).managerId)+")",1))],64)):(t(),a("p",bt,"No manager assigned"))]),s(D,{variant:"secondary",onClick:T},{default:m(()=>[...y[9]||(y[9]=[$(" Change ",-1)])]),_:1})]))]),_:1})]),_:1}),s(B,null,{default:m(()=>[s(I,{class:"pb-2"},{default:m(()=>[s(C,{class:"text-base flex items-center gap-2"},{default:m(()=>[s(o(ge),{class:"w-4 h-4 text-green-600"}),y[10]||(y[10]=$(" Direct Reports (Subordinates) ",-1))]),_:1})]),_:1}),s(x,null,{default:m(()=>[s(Je,{employeeId:p.employeeId,currentSubordinates:o(_)?.filter(N=>String(N.managerId)===String(p.employeeId))||[],allEmployees:l.value,onSave:q,isSaving:o(k)},null,8,["employeeId","currentSubordinates","allEmployees","isSaving"])]),_:1})]),_:1})])])):h("",!0)}}}),_t=()=>{const u=ae().params.tenant_slug;return g=>{const _=g.startsWith("/")?g:`/${g}`;return u?`/api/${u}${_}`:`/api${_}`}},ht=p=>{const u=_t(),{data:g,pending:_,error:b,refresh:d}=je(()=>u(`/salaries/employee/${o(p)}/history`),{key:`salary-history-${o(p)}`,immediate:!!o(p)},"$2Uc16ObuBf");return{data:g,loading:_,error:b,refresh:d}},wt={class:"space-y-6"},$t={key:0,class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg"},kt={class:"flex items-center justify-between mb-4"},St={class:"text-4xl font-bold"},Nt={key:0,class:"text-white/90 text-sm mt-2"},Ct={class:"text-white text-lg font-semibold mt-2"},It={class:"bg-white/20 p-3 rounded-lg backdrop-blur-sm"},Ut={class:"flex items-center justify-between text-sm"},Dt={class:"flex items-center gap-2 text-white/80"},Et={key:0,class:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full"},Vt={class:"font-medium"},Pt={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},jt={class:"px-6 py-5 border-b border-gray-200 bg-gray-50"},Mt={class:"flex items-center justify-between"},Bt={class:"text-lg font-medium leading-6 text-gray-900 flex items-center gap-2"},At={class:"flex items-center gap-2 text-sm text-gray-500"},Ft={key:0,class:"p-12 text-center"},Lt={key:1,class:"p-12 text-center"},Tt={key:2,class:"p-6"},Ht={class:"space-y-4"},zt={key:0,class:"relative pl-8 pb-8 border-l-2 border-green-400"},qt={class:"bg-green-50 rounded-lg border-2 border-green-200 p-5"},Ot={class:"flex items-start justify-between mb-3"},Rt={class:"flex items-center gap-2 mb-2"},Wt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Jt={class:"flex items-center gap-2 text-sm text-gray-600"},Kt={class:"grid grid-cols-3 gap-4 mb-3"},Gt={class:"bg-white rounded-lg p-3 border border-gray-200"},Qt={class:"font-semibold text-gray-900"},Xt={class:"bg-white rounded-lg p-3 border border-gray-200"},Yt={class:"font-semibold text-gray-900"},Zt={class:"bg-white rounded-lg p-3 border border-green-200 bg-green-50"},es={class:"font-bold text-green-600"},ts={key:0,class:"bg-white rounded-lg p-3 border border-gray-200"},ss={class:"text-sm text-gray-700"},as={class:"bg-gray-50 rounded-lg border-2 border-gray-200 p-5"},ls={class:"flex items-start justify-between mb-3"},os={class:"flex items-center gap-2 mb-2"},rs={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ns={class:"flex items-center gap-2 text-sm text-gray-600"},is={class:"grid grid-cols-3 gap-4 mb-3"},ds={class:"bg-white rounded-lg p-3 border border-gray-200"},us={class:"font-semibold text-gray-900"},cs={class:"bg-white rounded-lg p-3 border border-gray-200"},ms={class:"font-semibold text-gray-900"},ps={class:"bg-white rounded-lg p-3 border border-gray-200"},gs={class:"font-semibold text-gray-900"},ys={key:0,class:"bg-white rounded-lg p-3 border border-gray-200"},fs={class:"text-sm text-gray-700"},vs=L({__name:"EmployeeSalaryAdjustmentHistory",props:{employeeId:{},currentBaseSalary:{}},setup(p){const u=p,{data:g,loading:_}=ht(u.employeeId),b=z(()=>g.value||[]),d=z(()=>b.value.find(i=>i.isActive)),P=z(()=>b.value.filter(i=>!i.isActive).sort((i,l)=>new Date(l.effectiveDate).getTime()-new Date(i.effectiveDate).getTime())),k=i=>{const l=typeof i=="string"?parseFloat(i):i;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)},S=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),w=(i,l)=>parseFloat(i)+parseFloat(l);return(i,l)=>(t(),a("div",wt,[d.value?(t(),a("div",$t,[e("div",kt,[e("div",null,[l[0]||(l[0]=e("p",{class:"text-white/80 text-sm font-medium mb-1"},"Current Base Salary",-1)),e("p",St,n(k(d.value.baseSalary)),1),parseFloat(d.value.allowances)>0?(t(),a("p",Nt," + Allowances: "+n(k(d.value.allowances)),1)):h("",!0),e("p",Ct," Total: "+n(k(w(d.value.baseSalary,d.value.allowances))),1)]),e("div",It,[s(o(ye),{class:"w-10 h-10 text-white"})])]),e("div",Ut,[e("div",Dt,[s(o(O),{class:"w-4 h-4"}),e("span",null,"Effective since "+n(S(d.value.effectiveDate)),1)]),d.value.grade?(t(),a("div",Et,[s(o(fe),{class:"w-4 h-4"}),e("span",Vt,n(d.value.grade),1)])):h("",!0)])])):h("",!0),e("div",Pt,[e("div",jt,[e("div",Mt,[e("div",null,[e("h3",Bt,[s(o(ve),{class:"w-5 h-5"}),l[1]||(l[1]=$(" Salary History ",-1))]),l[2]||(l[2]=e("p",{class:"mt-1 text-sm text-gray-500"},"Complete history of salary changes",-1))]),e("div",At,[e("span",null,n(b.value.length)+" total records",1)])])]),o(_)?(t(),a("div",Ft,[...l[3]||(l[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-4"},"Loading salary history...",-1)])])):b.value.length===0?(t(),a("div",Lt,[s(o(be),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),l[4]||(l[4]=e("p",{class:"text-gray-500 text-lg"},"No salary records found",-1)),l[5]||(l[5]=e("p",{class:"text-gray-400 text-sm mt-1"},"Salary history will appear here once created",-1))])):(t(),a("div",Tt,[e("div",Ht,[d.value?(t(),a("div",zt,[l[11]||(l[11]=e("div",{class:"absolute left-[-9px] top-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white shadow"},null,-1)),e("div",qt,[e("div",Ot,[e("div",null,[e("div",Rt,[l[6]||(l[6]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Current ",-1)),d.value.grade?(t(),a("span",Wt,n(d.value.grade),1)):h("",!0)]),e("div",Jt,[s(o(O),{class:"w-4 h-4"}),e("span",null,"Effective: "+n(S(d.value.effectiveDate)),1)])])]),e("div",Kt,[e("div",Gt,[l[7]||(l[7]=e("p",{class:"text-xs text-gray-500 mb-1"},"Base Salary",-1)),e("p",Qt,n(k(d.value.baseSalary)),1)]),e("div",Xt,[l[8]||(l[8]=e("p",{class:"text-xs text-gray-500 mb-1"},"Allowances",-1)),e("p",Yt,n(k(d.value.allowances)),1)]),e("div",Zt,[l[9]||(l[9]=e("p",{class:"text-xs text-gray-500 mb-1"},"Total",-1)),e("p",es,n(k(w(d.value.baseSalary,d.value.allowances))),1)])]),d.value.notes?(t(),a("div",ts,[l[10]||(l[10]=e("p",{class:"text-xs text-gray-500 mb-1"},"Notes",-1)),e("p",ss,n(d.value.notes),1)])):h("",!0)])])):h("",!0),(t(!0),a(j,null,F(P.value,(c,T)=>(t(),a("div",{key:c.id,class:"relative pl-8 pb-8 border-l-2 border-gray-300 last:border-l-0 last:pb-0"},[l[17]||(l[17]=e("div",{class:"absolute left-[-9px] top-0 w-4 h-4 bg-gray-400 rounded-full border-2 border-white shadow"},null,-1)),e("div",as,[e("div",ls,[e("div",null,[e("div",os,[l[12]||(l[12]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"}," Historical ",-1)),c.grade?(t(),a("span",rs,n(c.grade),1)):h("",!0)]),e("div",ns,[s(o(O),{class:"w-4 h-4"}),e("span",null,n(S(c.effectiveDate))+" "+n(c.endDate?` - ${S(c.endDate)}`:""),1)])])]),e("div",is,[e("div",ds,[l[13]||(l[13]=e("p",{class:"text-xs text-gray-500 mb-1"},"Base Salary",-1)),e("p",us,n(k(c.baseSalary)),1)]),e("div",cs,[l[14]||(l[14]=e("p",{class:"text-xs text-gray-500 mb-1"},"Allowances",-1)),e("p",ms,n(k(c.allowances)),1)]),e("div",ps,[l[15]||(l[15]=e("p",{class:"text-xs text-gray-500 mb-1"},"Total",-1)),e("p",gs,n(k(w(c.baseSalary,c.allowances))),1)])]),c.notes?(t(),a("div",ys,[l[16]||(l[16]=e("p",{class:"text-xs text-gray-500 mb-1"},"Notes",-1)),e("p",fs,n(c.notes),1)])):h("",!0)])]))),128))])]))])]))}}),bs={class:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xs={class:"flex items-center space-x-4"},_s={class:"flex gap-4 border-b border-gray-200 overflow-x-auto"},hs=["onClick"],ws={class:"mt-6"},$s={key:0,class:"text-center py-12"},ks={key:1,class:"text-center py-12 text-red-500"},Ss={key:2},Ns={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Cs={class:"flex justify-end space-x-4"},Is={key:0,class:"py-12 flex justify-center"},Us={key:1,class:"py-12 text-center text-gray-500"},Ds={key:2},Es={class:"mb-8 flex justify-center pb-6 border-b border-gray-100"},Vs={key:2},Ps={key:3},Js=L({__name:"index",setup(p){const u=ae(),g=xe(),_=u.params.tenant_slug,b=u.params.id,{data:d,loading:P,error:k}=le(b),{mutate:S,loading:w}=Ne(),{data:i,loading:l,refresh:c}=Ce(b),{mutate:T,loading:M}=Ie(),{mutate:q,loading:U}=Ue(),{mutate:y,loading:D}=De(),C=V("details"),I=V(!1),x=V({firstName:"",lastName:"",email:"",password:"",position:"",department:"",joinDate:"",baseSalary:0});_e(d,v=>{v&&(x.value={firstName:v.firstName,lastName:v.lastName,email:v.user?.email||"",password:"",position:v.position,department:v.department,joinDate:v.joinDate?v.joinDate.split("T")[0]:"",baseSalary:v.baseSalary})},{immediate:!0});const B=()=>{g.push(`/${_}/dashboard/employees`)},N=async()=>{const v={...x.value};v.password||delete v.password,v.joinDate&&(v.joinDate=new Date(v.joinDate).toISOString());try{await S(b,v),alert("Employee updated successfully")}catch(r){console.error(r),alert("Failed to update employee")}},oe=async v=>{try{await q(b,v),await c(),alert("Profile picture uploaded")}catch(r){console.error(r),alert("Failed to upload profile picture")}},re=async()=>{try{await y(b),await c(),alert("Profile picture removed")}catch(v){console.error(v),alert("Failed to remove profile picture")}},ne=async v=>{try{await T(b,v),await c(),I.value=!1,alert("Profile updated successfully")}catch(r){console.error(r),alert("Failed to update profile")}};return(v,r)=>{const H=J,K=Z,G=ee,E=ie,Q=te,X=se;return t(),a("div",bs,[e("div",xs,[s(H,{variant:"ghost",onClick:B},{default:m(()=>[s(o(he),{class:"w-4 h-4 mr-2"}),r[10]||(r[10]=$(" Back ",-1))]),_:1}),r[11]||(r[11]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Edit Employee",-1))]),e("div",_s,[(t(),a(j,null,F(["details","profile","management","salary"],f=>e("button",{key:f,class:W(["px-4 py-2 font-medium text-sm transition-colors border-b-2 whitespace-nowrap capitalize",C.value===f?"border-brand-navy text-brand-navy":"border-transparent text-gray-500 hover:text-gray-700"]),onClick:js=>C.value=f},n(f==="details"?"Account Settings":f==="profile"?"Profile Information":f==="management"?"Management & Hierarchy":"Salary & History"),11,hs)),64))]),e("div",ws,[o(P)&&!o(d)?(t(),a("div",$s,"Loading...")):o(k)||!o(d)?(t(),a("div",ks,"Error loading employee")):(t(),a("div",Ss,[C.value==="details"?(t(),A(X,{key:0},{default:m(()=>[s(G,null,{default:m(()=>[s(K,null,{default:m(()=>[...r[12]||(r[12]=[$("Account Settings",-1)])]),_:1})]),_:1}),s(Q,null,{default:m(()=>[e("form",{onSubmit:we(N,["prevent"]),class:"space-y-6"},[e("div",Ns,[s(E,{label:"First Name",modelValue:x.value.firstName,"onUpdate:modelValue":r[0]||(r[0]=f=>x.value.firstName=f),required:""},null,8,["modelValue"]),s(E,{label:"Last Name",modelValue:x.value.lastName,"onUpdate:modelValue":r[1]||(r[1]=f=>x.value.lastName=f),required:""},null,8,["modelValue"]),s(E,{label:"Email Address",type:"email",modelValue:x.value.email,"onUpdate:modelValue":r[2]||(r[2]=f=>x.value.email=f),required:""},null,8,["modelValue"]),s(E,{label:"Password (leave empty to keep current)",type:"password",modelValue:x.value.password,"onUpdate:modelValue":r[3]||(r[3]=f=>x.value.password=f),placeholder:"Enter new password or leave empty"},null,8,["modelValue"]),s(E,{label:"Position",modelValue:x.value.position,"onUpdate:modelValue":r[4]||(r[4]=f=>x.value.position=f),required:""},null,8,["modelValue"]),s(E,{label:"Department",modelValue:x.value.department,"onUpdate:modelValue":r[5]||(r[5]=f=>x.value.department=f),required:""},null,8,["modelValue"]),s(E,{label:"Join Date",type:"date",modelValue:x.value.joinDate,"onUpdate:modelValue":r[6]||(r[6]=f=>x.value.joinDate=f),required:""},null,8,["modelValue"]),s(E,{label:"Base Salary",type:"number",modelValue:x.value.baseSalary,"onUpdate:modelValue":r[7]||(r[7]=f=>x.value.baseSalary=f),required:""},null,8,["modelValue"])]),e("div",Cs,[s(H,{type:"button",variant:"secondary",onClick:B},{default:m(()=>[...r[13]||(r[13]=[$(" Cancel ",-1)])]),_:1}),s(H,{type:"submit",disabled:o(w)},{default:m(()=>[$(n(o(w)?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})):h("",!0),C.value==="profile"?(t(),A(X,{key:1},{default:m(()=>[s(G,{class:"flex flex-row items-center justify-between"},{default:m(()=>[s(K,null,{default:m(()=>[...r[14]||(r[14]=[$("Extended Profile",-1)])]),_:1}),I.value?h("",!0):(t(),A(H,{key:0,onClick:r[8]||(r[8]=f=>I.value=!0),variant:"secondary",class:"py-1 px-3 h-8 text-xs"},{default:m(()=>[...r[15]||(r[15]=[$(" Edit Profile ",-1)])]),_:1}))]),_:1}),s(Q,null,{default:m(()=>[o(l)?(t(),a("div",Is,[...r[16]||(r[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy"},null,-1)])])):o(i)?(t(),a("div",Ds,[e("div",Es,[s(Ee,{currentImageUrl:o(i).profilePicture||o(i).profilePictureUrl,altText:`${o(i).firstName} ${o(i).lastName}`,onUpload:oe,onDelete:re,isUploading:o(U),isDeleting:o(D),canEdit:!0,size:"xl"},null,8,["currentImageUrl","altText","isUploading","isDeleting"])]),I.value?(t(),A(Ve,{key:0,initialData:o(i),onSubmit:ne,onCancel:r[9]||(r[9]=f=>I.value=!1),isLoading:o(M),isAdmin:!0},null,8,["initialData","isLoading"])):(t(),A(Pe,{key:1,profile:o(i)},null,8,["profile"]))])):(t(),a("div",Us," Profile not found or could not be loaded. "))]),_:1})]),_:1})):h("",!0),C.value==="management"?(t(),a("div",Vs,[s(xt,{employeeId:o(b)},null,8,["employeeId"])])):h("",!0),C.value==="salary"?(t(),a("div",Ps,[s(vs,{employeeId:o(b),currentBaseSalary:o(d)?.baseSalary},null,8,["employeeId","currentBaseSalary"])])):h("",!0)]))])])}}});export{Js as default};
