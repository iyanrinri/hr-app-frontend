import{j as _,K as w,x as qe,k as f,g as E,y as ee,c as C,a as g,t as oe,v as ue,d as de,I as T,p as A,V as He,a9 as We,o as m,aa as se,ab as Je,ac as q,ad as Ye,ae as B,af as z,ag as R,ah as H,ai as D,aj as pe,i as M,ak as ve,al as Ke,b as Z,w as Se,F as ce,l as Ae,am as Xe,B as Qe,z as et,an as tt,a5 as at,N as nt}from"./DX_cbf2s.js";import{u as ot}from"./H1PkYqcn.js";import{r as Oe,_ as lt}from"./czVTDFG8.js";var j=(e=>(e.COMPANY="COMPANY",e.ATTENDANCE="ATTENDANCE",e.GENERAL="GENERAL",e.NOTIFICATION="NOTIFICATION",e.SECURITY="SECURITY",e))(j||{}),le=(e=>(e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.NUMBER="NUMBER",e.JSON="JSON",e))(le||{});const ye=()=>{const t=qe().params.tenant_slug;return n=>{const a=n.startsWith("/")?n:`/${n}`;return t?`/api/${t}${a}`:`/api${a}`}},st=(e=1,t=20,n,a)=>{const l=ye(),s=w(()=>{const u={page:f(e),limit:f(t)};return f(n)&&(u.category=f(n)),f(a)!==void 0&&(u.isPublic=f(a)),u}),i=w(()=>`settings-${f(e)}-${f(t)}-${f(n)}-${f(a)}`),{data:r,pending:o,error:c,refresh:p}=ot(()=>l("/settings"),{key:i.value,query:s,watch:[s],server:!1},"$U09R3Uuj5h");return{data:r,loading:o,error:c,refresh:p}},Re=()=>{const e=ye(),t=_(!1);return{mutate:async a=>{t.value=!0;try{await $fetch(e(`/settings/${a.key}`),{method:"PATCH",body:{value:a.value}}),Oe(l=>typeof l=="string"&&l.startsWith("settings-"))}catch(l){throw l}finally{t.value=!1}},loading:t}},rt=()=>{const e=ye(),t=_(!1);return{mutate:async()=>{t.value=!0;try{await $fetch(e("/settings/initialize"),{method:"POST"}),Oe(a=>typeof a=="string"&&a.startsWith("settings-"))}catch(a){throw a}finally{t.value=!1}},loading:t}},it={class:"bg-gray-50 p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors"},ut={class:"flex items-start justify-between mb-2"},dt={class:"block text-sm font-semibold text-gray-900"},ct={class:"text-xs text-gray-500 mt-1"},pt={class:"mt-3 flex items-center gap-3"},vt={key:0,class:"flex items-center"},yt={class:"ml-3 text-sm text-gray-900"},mt={key:1,class:"flex-1 flex gap-2"},ft=["type","placeholder"],gt=["disabled"],Q=E({__name:"SettingItem",props:{setting:{}},setup(e){const t=e,{mutate:n,loading:a}=Re(),l=_(t.setting.value),s=_(!1);ee(()=>t.setting.value,u=>{l.value=u,s.value=!1});const i=u=>u.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase()).trim(),r=t.setting.dataType===le.BOOLEAN,o=w(()=>String(l.value)==="true"||l.value===!0),c=async()=>{let u=l.value;t.setting.dataType===le.NUMBER&&(u=Number(l.value));try{await n({key:t.setting.key,value:u}),s.value=!1}catch(y){console.error("Failed to save setting",y),alert("Failed to save setting")}},p=async()=>{if(a.value)return;const u=!o.value;l.value=u;try{await n({key:t.setting.key,value:String(u)}),s.value=!1}catch(y){l.value=!u,console.error("Failed to toggle setting",y),alert("Failed to update setting")}};return(u,y)=>(m(),C("div",it,[g("div",ut,[g("div",null,[g("label",dt,oe(i(e.setting.key)),1),g("p",ct,oe(e.setting.description),1)])]),g("div",pt,[r?(m(),C("div",vt,[g("button",{type:"button",onClick:p,class:ue(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-navy focus:ring-offset-2",o.value?"bg-brand-navy":"bg-gray-200"])},[g("span",{class:ue(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",o.value?"translate-x-5":"translate-x-0"])},null,2)],2),g("span",yt,[de(oe(o.value?"Enabled":"Disabled")+" ",1),f(a)?(m(),T(f(se),{key:0,class:"w-3 h-3 animate-spin inline ml-2"})):A("",!0)])])):(m(),C("div",mt,[He(g("input",{type:e.setting.dataType===f(le).NUMBER?"number":"text","onUpdate:modelValue":y[0]||(y[0]=d=>l.value=d),onInput:y[1]||(y[1]=d=>s.value=!0),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-navy focus:ring-brand-navy sm:text-sm p-2 border",placeholder:e.setting.description},null,40,ft),[[We,l.value]]),s.value?(m(),C("button",{key:0,onClick:c,disabled:f(a),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-brand-navy hover:bg-brand-navy/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy disabled:opacity-50"},[f(a)?(m(),T(f(se),{key:0,class:"w-4 h-4 animate-spin"})):(m(),T(f(Je),{key:1,class:"w-4 h-4"}))],8,gt)):A("",!0)]))])]))}}),Le=(e,t)=>{for(const n of Object.keys(t))e.on(n,t[n])},Ne=e=>{for(const t of Object.keys(e)){const n=e[t];n&&U(n.cancel)&&n.cancel()}},bt=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),U=e=>typeof e=="function",V=(e,t,n)=>{for(const a in n){const l="set"+bt(a);e[l]?ee(()=>n[a],(s,i)=>{e[l](s,i)}):t[l]&&ee(()=>n[a],s=>{t[l](s)})}},P=(e,t,n={})=>{const a={...n};for(const l in e){const s=t[l],i=e[l];s&&(s&&s.custom===!0||i!==void 0&&(a[l]=i))}return a},W=e=>{const t={},n={};for(const a in e)if(a.startsWith("on")&&!a.startsWith("onUpdate")&&a!=="onReady"){const l=a.slice(2).toLocaleLowerCase();t[l]=e[a]}else n[a]=e[a];return{listeners:t,attrs:n}},ht=async e=>{const t=await Promise.all([R(()=>import("./D4k_ikNW.js"),[],import.meta.url),R(()=>import("./C2eJqgqv.js"),[],import.meta.url),R(()=>import("./DU6CIJ0p.js"),[],import.meta.url)]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},ae=e=>{const t=_((...a)=>console.warn(`Method ${e} has been invoked without being replaced`)),n=(...a)=>t.value(...a);return n.wrapped=t,B(e,n),n},ne=(e,t)=>e.wrapped.value=t,I=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,N=e=>{const t=M(e);if(t===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},F=Symbol("useGlobalLeaflet"),J=Symbol("addLayer"),me=Symbol("removeLayer"),Ee=Symbol("registerControl"),_t=Symbol("registerLayerControl"),Pe=Symbol("canSetParentHtml"),$e=Symbol("setParentHtml"),Be=Symbol("setIcon"),St=Symbol("bindPopup"),Lt=Symbol("bindTooltip"),kt=Symbol("unbindPopup"),wt=Symbol("unbindTooltip"),te={options:{type:Object,default:()=>({}),custom:!0}},re=e=>({options:e.options,methods:{}}),Y={...te,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},fe=(e,t,n)=>{const a=N(J),l=N(me),{options:s,methods:i}=re(e),r=P(e,Y,s),o=()=>a({leafletObject:t.value}),c=()=>l({leafletObject:t.value}),p={...i,setAttribution(u){c(),t.value.options.attribution=u,e.visible&&o()},setName(){c(),e.visible&&o()},setLayerType(){c(),e.visible&&o()},setVisible(u){t.value&&(u?o():c())},bindPopup(u){if(!t.value||!U(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(u)},bindTooltip(u){if(!t.value||!U(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(u)},unbindTooltip(){t.value&&(U(t.value.closeTooltip)&&t.value.closeTooltip(),U(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(U(t.value.closePopup)&&t.value.closePopup(),U(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(u){n.emit("update:visible",u)}};return B(St,p.bindPopup),B(Lt,p.bindTooltip),B(kt,p.unbindPopup),B(wt,p.unbindTooltip),ve(()=>{p.unbindPopup(),p.unbindTooltip(),c()}),{options:r,methods:p}},Ie=(e,t)=>{if(e&&t.default)return q("div",{style:{display:"none"}},t.default())},je={...Y,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Ct=(e,t,n)=>{const{options:a,methods:l}=fe(e,t,n);return{options:P(e,je,a),methods:l}},ge={...je,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},xt=(e,t,n)=>{const{options:a,methods:l}=Ct(e,t,n),s=P(e,ge,a),i=N(me),r={...l,setStroke(o){t.value.setStyle({stroke:o})},setColor(o){t.value.setStyle({color:o})},setWeight(o){t.value.setStyle({weight:o})},setOpacity(o){t.value.setStyle({opacity:o})},setLineCap(o){t.value.setStyle({lineCap:o})},setLineJoin(o){t.value.setStyle({lineJoin:o})},setDashArray(o){t.value.setStyle({dashArray:o})},setDashOffset(o){t.value.setStyle({dashOffset:o})},setFill(o){t.value.setStyle({fill:o})},setFillColor(o){t.value.setStyle({fillColor:o})},setFillOpacity(o){t.value.setStyle({fillOpacity:o})},setFillRule(o){t.value.setStyle({fillRule:o})},setClassName(o){t.value.setStyle({className:o})}};return pe(()=>{i({leafletObject:t.value})}),{options:s,methods:r}},Ue={...ge,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},Tt=(e,t,n)=>{const{options:a,methods:l}=xt(e,t,n),s=P(e,Ue,a),i={...l,setRadius(r){t.value.setRadius(r)},setLatLng(r){t.value.setLatLng(r)}};return{options:s,methods:i}},De={...Ue,radius:{type:Number}},At=(e,t,n)=>{const{options:a,methods:l}=Tt(e,t,n),s=P(e,De,a),i={...l};return{options:s,methods:i}},ke=E({name:"LCircle",props:De,setup(e,t){const n=_(),a=_(!1),l=M(F),s=N(J),{options:i,methods:r}=At(e,n,t);return z(async()=>{const{circle:o}=l?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url);n.value=H(o(e.latLng,i));const{listeners:c}=W(t.attrs);n.value.on(c),V(r,n.value,e),s({...e,...r,leafletObject:n.value}),a.value=!0,D(()=>t.emit("ready",n.value))}),{ready:a,leafletObject:n}},render(){return Ie(this.ready,this.$slots)}}),K={...te,position:{type:String}},Ot=(e,t)=>{const{options:n,methods:a}=re(e),l=P(e,K,n),s={...a,setPosition(i){t.value&&t.value.setPosition(i)}};return ve(()=>{t.value&&t.value.remove()}),{options:l,methods:s}},Rt=e=>e.default?q("div",{ref:"root"},e.default()):null;E({name:"LControl",props:{...K,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const n=_(),a=_(),l=M(F),s=N(Ee),{options:i,methods:r}=Ot(e,n);return z(async()=>{const{Control:o,DomEvent:c}=l?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url),p=o.extend({onAdd(){return a.value}});n.value=H(new p(i)),V(r,n.value,e),s({leafletObject:n.value}),e.disableClickPropagation&&a.value&&c.disableClickPropagation(a.value),e.disableScrollPropagation&&a.value&&c.disableScrollPropagation(a.value),D(()=>t.emit("ready",n.value))}),{root:a,leafletObject:n}},render(){return Rt(this.$slots)}});({...K});({...K});({...K});({...K});const ze={...Y};({...ze});({...ze});const be={...Y,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Me=(e,t,n)=>{const{options:a,methods:l}=fe(e,t,n),s=P(e,be,a),i={...l,setTileComponent(){var r;(r=t.value)==null||r.redraw()}};return ve(()=>{t.value.off()}),{options:s,methods:i}},Nt=(e,t,n,a)=>e.extend({initialize(l){this.tileComponents={},this.on("tileunload",this._unloadTile),n.setOptions(this,l)},createTile(l){const s=this._tileCoordsToKey(l);this.tileComponents[s]=t.create("div");const i=q({setup:a,props:["coords"]},{coords:l});return Ke(i,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(l){const s=this._tileCoordsToKey(l.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}});E({props:{...be,childRender:{type:Function,required:!0}},setup(e,t){const n=_(),a=_(null),l=_(!1),s=M(F),i=N(J),{options:r,methods:o}=Me(e,n,t);return z(async()=>{const{GridLayer:c,DomUtil:p,Util:u}=s?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url),y=Nt(c,p,u,e.childRender);n.value=H(new y(r));const{listeners:d}=W(t.attrs);n.value.on(d),V(o,n.value,e),i({...e,...o,leafletObject:n.value}),l.value=!0,D(()=>t.emit("ready",n.value))}),{root:a,ready:l,leafletObject:n}},render(){return this.ready?q("div",{style:{display:"none"},ref:"root"}):null}});const we={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}};E({name:"LIcon",props:{...we,...te},setup(e,t){const n=_(),a=M(F),l=N(Pe),s=N($e),i=N(Be);let r,o,c,p,u;const y=(k,b,x)=>{const O=k&&k.innerHTML;if(!b){x&&u&&l()&&s(O);return}const{listeners:G}=W(t.attrs);u&&o(u,G);const{options:ie}=re(e),$=P(e,we,ie);O&&($.html=O),u=$.html?c($):p($),r(u,G),i(u)},d=()=>{D(()=>y(n.value,!0,!1))},h=()=>{D(()=>y(n.value,!1,!0))},S={setIconUrl:d,setIconRetinaUrl:d,setIconSize:d,setIconAnchor:d,setPopupAnchor:d,setTooltipAnchor:d,setShadowUrl:d,setShadowRetinaUrl:d,setShadowAnchor:d,setBgPos:d,setClassName:d,setHtml:d};return z(async()=>{const{DomEvent:k,divIcon:b,icon:x}=a?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url);r=k.on,o=k.off,c=b,p=x,V(S,{},e),new MutationObserver(h).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),d()}),{root:n}},render(){const e=this.$slots.default?this.$slots.default():void 0;return q("div",{ref:"root"},e)}});({...Y});function Ve(e,t,n){var a,l,s;t===void 0&&(t=50),n===void 0&&(n={});var i=(a=n.isImmediate)!=null&&a,r=(l=n.callback)!=null&&l,o=n.maxWait,c=Date.now(),p=[];function u(){if(o!==void 0){var d=Date.now()-c;if(d+t>=o)return o-d}return t}var y=function(){var d=[].slice.call(arguments),h=this;return new Promise(function(S,k){var b=i&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,c=Date.now(),!i){var O=e.apply(h,d);r&&r(O),p.forEach(function(G){return(0,G.resolve)(O)}),p=[]}},u()),b){var x=e.apply(h,d);return r&&r(x),S(x)}p.push({resolve:S,reject:k})})};return y.cancel=function(d){s!==void 0&&clearTimeout(s),p.forEach(function(h){return(0,h.reject)(d)}),p=[]},y}const Ce={...te,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Et=E({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Ce,setup(e,t){const n=_(),a=Ye({ready:!1,layersToAdd:[],layersInControl:[]}),{options:l}=re(e),s=P(e,Ce,l),{listeners:i,attrs:r}=W(t.attrs),o=ae(J),c=ae(me),p=ae(Ee),u=ae(_t);B(F,e.useGlobalLeaflet);const y=w(()=>{const b={};return e.noBlockingAnimations&&(b.animate=!1),b}),d=w(()=>{const b=y.value;return e.padding&&(b.padding=e.padding),e.paddingTopLeft&&(b.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(b.paddingBottomRight=e.paddingBottomRight),b}),h={moveend:Ve(b=>{a.leafletRef&&(t.emit("update:zoom",a.leafletRef.getZoom()),t.emit("update:center",a.leafletRef.getCenter()),t.emit("update:bounds",a.leafletRef.getBounds()))}),overlayadd(b){const x=a.layersInControl.find(O=>O.name===b.name);x&&x.updateVisibleProp(!0)},overlayremove(b){const x=a.layersInControl.find(O=>O.name===b.name);x&&x.updateVisibleProp(!1)}};z(async()=>{e.useGlobalLeaflet&&(I.L=I.L||await R(()=>import("./CjPBq9Bq.js").then(v=>v.l),[],import.meta.url));const{map:b,CRS:x,Icon:O,latLngBounds:G,latLng:ie,stamp:$}=e.useGlobalLeaflet?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url);try{s.beforeMapMount&&await s.beforeMapMount()}catch(v){console.error(`The following error occurred running the provided beforeMapMount hook ${v.message}`)}await ht(O);const Ze=typeof s.crs=="string"?x[s.crs]:s.crs;s.crs=Ze||x.EPSG3857;const X={addLayer(v){v.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd.push(v):a.layersInControl.find(L=>$(L.leafletObject)===$(v.leafletObject))||(a.layerControl.addLayer(v),a.layersInControl.push(v))),v.visible!==!1&&a.leafletRef.addLayer(v.leafletObject)},removeLayer(v){v.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd=a.layersToAdd.filter(L=>L.name!==v.name):(a.layerControl.removeLayer(v.leafletObject),a.layersInControl=a.layersInControl.filter(L=>$(L.leafletObject)!==$(v.leafletObject)))),a.leafletRef.removeLayer(v.leafletObject)},registerLayerControl(v){a.layerControl=v,a.layersToAdd.forEach(L=>{a.layerControl.addLayer(L)}),a.layersToAdd=[],p(v)},registerControl(v){a.leafletRef.addControl(v.leafletObject)},setZoom(v){const L=a.leafletRef.getZoom();v!==L&&a.leafletRef.setZoom(v,y.value)},setCrs(v){const L=a.leafletRef.getBounds();a.leafletRef.options.crs=v,a.leafletRef.fitBounds(L,{animate:!1,padding:[0,0]})},fitBounds(v){a.leafletRef.fitBounds(v,d.value)},setBounds(v){if(!v)return;const L=G(v);L.isValid()&&!(a.lastSetBounds||a.leafletRef.getBounds()).equals(L,0)&&(a.lastSetBounds=L,a.leafletRef.fitBounds(L))},setCenter(v){if(v==null)return;const L=ie(v),_e=a.lastSetCenter||a.leafletRef.getCenter();(_e.lat!==L.lat||_e.lng!==L.lng)&&(a.lastSetCenter=L,a.leafletRef.panTo(L,y.value))}};ne(o,X.addLayer),ne(c,X.removeLayer),ne(p,X.registerControl),ne(u,X.registerLayerControl),a.leafletRef=H(b(n.value,s)),V(X,a.leafletRef,e),Le(a.leafletRef,h),Le(a.leafletRef,i),a.ready=!0,D(()=>t.emit("ready",a.leafletRef))}),pe(()=>{Ne(h),a.leafletRef&&(a.leafletRef.off(),a.leafletRef.remove())});const S=w(()=>a.leafletRef),k=w(()=>a.ready);return{root:n,ready:k,leafletObject:S,attrs:r}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),q("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Pt=["Symbol(Comment)","Symbol(Text)"],$t=["LTooltip","LPopup"],Fe={...Y,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Bt=(e,t,n)=>{const{options:a,methods:l}=fe(e,t,n),s=P(e,Fe,a),i={...l,setDraggable(r){t.value.dragging&&(r?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(r){n.emit("update:latLng",r.latlng),n.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&t.value){const o=t.value.getLatLng();(!o||!o.equals(r))&&t.value.setLatLng(r)}}};return{options:s,methods:i}},It=(e,t)=>{const n=t.slots.default&&t.slots.default();return n&&n.length&&n.some(jt)};function jt(e){return!(Pt.includes(e.type.toString())||$t.includes(e.type.name))}const xe=E({name:"LMarker",props:Fe,setup(e,t){const n=_(),a=_(!1),l=M(F),s=N(J);B(Pe,()=>{var c;return!!((c=n.value)!=null&&c.getElement())}),B($e,c=>{var p,u;const y=U((p=n.value)==null?void 0:p.getElement)&&((u=n.value)==null?void 0:u.getElement());y&&(y.innerHTML=c)}),B(Be,c=>{var p;return((p=n.value)==null?void 0:p.setIcon)&&n.value.setIcon(c)});const{options:i,methods:r}=Bt(e,n,t),o={moveHandler:Ve(r.latLngSync)};return z(async()=>{const{marker:c,divIcon:p}=l?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url);It(i,t)&&(i.icon=p({className:""})),n.value=H(c(e.latLng,i));const{listeners:u}=W(t.attrs);n.value.on(u),n.value.on("move",o.moveHandler),V(r,n.value,e),s({...e,...r,leafletObject:n.value}),a.value=!0,D(()=>t.emit("ready",n.value))}),pe(()=>Ne(o)),{ready:a,leafletObject:n}},render(){return Ie(this.ready,this.$slots)}}),Ut={...ge,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Te={...Ut},Ge={...te,content:{type:String,default:null}};({...Ge});({...Te,latLngs:{...Te.latLngs}});const he={...be,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},Dt=(e,t,n)=>{const{options:a,methods:l}=Me(e,t,n),s=P(e,he,a),i={...l};return{options:s,methods:i}},zt=E({props:he,setup(e,t){const n=_(),a=M(F),l=N(J),{options:s,methods:i}=Dt(e,n,t);return z(async()=>{const{tileLayer:r}=a?I.L:await R(()=>import("./C210bVOb.js"),[],import.meta.url);n.value=H(r(e.url,s));const{listeners:o}=W(t.attrs);n.value.on(o),V(i,n.value,e),l({...e,...i,leafletObject:n.value}),D(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});({...Ge});({...he});const Mt={class:"space-y-4 relative"},Vt={class:"h-[400px] w-full rounded-lg overflow-hidden border border-gray-300 relative z-0"},Ft={key:0,class:"absolute inset-0 z-[1000] flex items-end justify-center pb-6 bg-black/10 pointer-events-none"},Gt=E({__name:"AttendanceMap",props:{latitude:{},longitude:{},radius:{}},emits:["locationSelect"],setup(e,{emit:t}){const n=_(null);z(async()=>{const d=await R(()=>import("./CjPBq9Bq.js").then(h=>h.l),[],import.meta.url);n.value=d.default||d,delete n.value.Icon.Default.prototype._getIconUrl,n.value.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"})});const a=e,l=t,s=_(15),i=w(()=>!!(a.latitude&&a.longitude)),r=_(i.value?[a.latitude,a.longitude]:[-6.2088,106.8456]);ee(()=>[a.latitude,a.longitude],([d,h])=>{d&&h&&(r.value=[d,h])});const o=_(null),c=_(r.value);ee(r,d=>{o.value||(c.value=d)});const p=d=>{d.latlng&&(o.value=[d.latlng.lat,d.latlng.lng])},u=()=>{if(o.value){const d=o.value;r.value=d,l("locationSelect",d[0],d[1]),o.value=null}},y=()=>{o.value=null,c.value=r.value};return(d,h)=>{const S=lt;return m(),C("div",Mt,[g("div",Vt,[Z(S,null,{default:Se(()=>[Z(f(Et),{ref:"map",zoom:s.value,"onUpdate:zoom":h[0]||(h[0]=k=>s.value=k),center:c.value,"use-global-leaflet":!1,onClick:p,style:{cursor:"crosshair"}},{default:Se(()=>[Z(f(zt),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),o.value?A("",!0):(m(),T(f(xe),{key:0,"lat-lng":r.value},null,8,["lat-lng"])),o.value?A("",!0):(m(),T(f(ke),{key:1,"lat-lng":r.value,radius:e.radius,color:"blue"},null,8,["lat-lng","radius"])),o.value?(m(),T(f(xe),{key:2,"lat-lng":o.value},null,8,["lat-lng"])):A("",!0),o.value?(m(),T(f(ke),{key:3,"lat-lng":o.value,radius:e.radius,color:"orange","dash-array":"5, 10"},null,8,["lat-lng","radius"])):A("",!0)]),_:1},8,["zoom","center"])]),_:1}),o.value?(m(),C("div",Ft,[g("div",{class:"bg-white p-4 rounded-lg shadow-lg pointer-events-auto flex flex-col items-center gap-3 animate-in fade-in slide-in-from-bottom-4"},[h[1]||(h[1]=g("p",{class:"text-sm font-medium text-gray-900"},"Update Check Point Location?",-1)),g("div",{class:"flex gap-2"},[g("button",{onClick:y,class:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors pointer-events-auto"}," Cancel "),g("button",{onClick:u,class:"px-3 py-1.5 text-xs font-medium text-white bg-brand-navy hover:opacity-90 rounded-md transition-colors pointer-events-auto"}," Save Location ")])])])):A("",!0)]),h[2]||(h[2]=g("p",{class:"text-xs text-gray-500"}," Click on the map to set the attendance check-point center. You will be asked to confirm. ",-1))])}}}),Zt={class:"space-y-6 max-w-4xl"},qt={key:0,class:"flex justify-center items-center h-64"},Ht={key:1,class:"text-center text-red-500 py-8"},Wt={key:0},Jt={key:1,class:"grid gap-6"},Yt={key:2,class:"mt-8 border-t pt-8"},Kt={class:"mb-6 grid gap-6"},Xt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qt={class:"rounded-lg overflow-hidden border border-gray-200"},ea=E({__name:"SettingsTabContent",props:{category:{}},setup(e){const t=e,{data:n,loading:a,error:l}=st(1,100,w(()=>t.category)),{mutate:s}=Re(),i=w(()=>n.value?.data||[]),r=["attendance_checkpoint_lat","attendance_checkpoint_lng","attendance_checkpoint_radius","attendance_checkpoint_address"],o=w(()=>t.category===j.ATTENDANCE),c=w(()=>i.value.find(S=>S.key==="attendance_checkpoint_lat")),p=w(()=>i.value.find(S=>S.key==="attendance_checkpoint_lng")),u=w(()=>i.value.find(S=>S.key==="attendance_checkpoint_radius")),y=w(()=>i.value.find(S=>S.key==="attendance_checkpoint_address")),d=w(()=>o.value?i.value.filter(S=>!r.includes(S.key)):i.value),h=async(S,k)=>{try{await s({key:"attendance_checkpoint_lat",value:String(S)}),await s({key:"attendance_checkpoint_lng",value:String(k)})}catch(b){console.error("Failed to update location settings",b),alert("Failed to save location")}};return(S,k)=>(m(),C("div",Zt,[f(a)?(m(),C("div",qt,[Z(f(se),{class:"w-8 h-8 animate-spin text-brand-navy"})])):f(l)?(m(),C("div",Ht," Failed to load settings. Please try again. ")):(m(),C(ce,{key:2},[i.value.length===0?(m(),C("div",Wt,[...k[0]||(k[0]=[g("p",{class:"text-gray-500 italic"},"No settings found for this category.",-1)])])):(m(),C("div",Jt,[(m(!0),C(ce,null,Ae(d.value,b=>(m(),T(Q,{key:`${b.id}-${b.value}`,setting:b},null,8,["setting"]))),128))])),o.value?(m(),C("div",Yt,[k[1]||(k[1]=g("h3",{class:"text-lg font-medium text-brand-navy mb-6"},"Attendance Check Point",-1)),g("div",Kt,[y.value?(m(),T(Q,{key:`${y.value.id}-${y.value.value}`,setting:y.value},null,8,["setting"])):A("",!0),g("div",Xt,[c.value?(m(),T(Q,{key:`${c.value.id}-${c.value.value}`,setting:c.value},null,8,["setting"])):A("",!0),p.value?(m(),T(Q,{key:`${p.value.id}-${p.value.value}`,setting:p.value},null,8,["setting"])):A("",!0)]),u.value?(m(),T(Q,{key:`${u.value.id}-${u.value.value}`,setting:u.value},null,8,["setting"])):A("",!0)]),g("div",Qt,[Z(Gt,{latitude:parseFloat(String(c.value?.value||"0")),longitude:parseFloat(String(p.value?.value||"0")),radius:parseFloat(String(u.value?.value||"100")),onLocationSelect:h},null,8,["latitude","longitude","radius"])])])):A("",!0)],64))]))}}),ta={class:"space-y-6"},aa={class:"border-b border-gray-200 bg-white rounded-t-lg"},na={class:"flex items-center justify-between px-6 py-4"},oa={class:"flex space-x-4 overflow-x-auto no-scrollbar","aria-label":"Tabs"},la=["onClick"],sa=["disabled"],ra={class:"p-6 bg-white rounded-b-lg shadow-sm border border-t-0 border-gray-200"},ca=E({__name:"index",setup(e){const t=[{id:j.GENERAL,label:"General",icon:Xe},{id:j.COMPANY,label:"Company",icon:Qe},{id:j.ATTENDANCE,label:"Attendance",icon:et},{id:j.NOTIFICATION,label:"Notifications",icon:tt},{id:j.SECURITY,label:"Security",icon:at}],n=_(j.GENERAL),{mutate:a,loading:l}=rt(),s=async()=>{try{await a()}catch{}};return(i,r)=>(m(),C("div",ta,[g("div",aa,[g("div",na,[g("nav",oa,[(m(),C(ce,null,Ae(t,o=>g("button",{key:o.id,onClick:c=>n.value=o.id,class:ue(["flex items-center px-3 py-2 text-sm font-medium rounded-md whitespace-nowrap transition-colors",n.value===o.id?"bg-brand-light text-brand-navy":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},[(m(),T(nt(o.icon),{class:"w-4 h-4 mr-2"})),de(" "+oe(o.label),1)],10,la)),64))]),g("button",{onClick:s,disabled:f(l),class:"ml-4 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy disabled:opacity-50 inline-flex items-center"},[f(l)?(m(),T(f(se),{key:0,class:"w-4 h-4 animate-spin mr-2"})):A("",!0),r[0]||(r[0]=de(" Initialize Defaults ",-1))],8,sa)])]),g("div",ra,[Z(ea,{category:n.value},null,8,["category"])])]))}});export{ca as default};
