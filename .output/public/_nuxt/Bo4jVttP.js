import{_ as R}from"./Dnm_KAh1.js";import{_ as Y}from"./D2JNKblU.js";import{g as $,c as i,o as n,p as f,a as t,t as l,v as A,k as m,F as j,l as F,aW as L,I as V,w as o,b as a,d as v,X as K,j as k,K as b,aV as M,z as W,E as q,x as Q,aw as Z}from"./DX_cbf2s.js";import{_ as ee}from"./-LiBT2fH.js";import{c as S}from"./uRmCsCMF.js";import{_ as te}from"./BfigT44c.js";import{_ as se}from"./B9YZYzJt.js";import{_ as ae,a as le}from"./B-kHxmq3.js";import{h as P,G as oe,V as ne,J as de,Y as ie,S as re}from"./Cr8YxTBK.js";import{e as ue}from"./D7V6xLk_.js";import{_ as ce}from"./B8QOIkXi.js";import"./H1PkYqcn.js";import"./czVTDFG8.js";import"./crM-xtPk.js";const me={class:"w-full"},pe=["for"],ye={class:"relative"},fe=["id","value","disabled"],ve={key:0,value:"",disabled:"",selected:""},xe=["value"],ge={key:1,class:"mt-1 text-sm text-red-600"},be=$({__name:"Select",props:{modelValue:{default:""},label:{},error:{},id:{},options:{},placeholder:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:r}){const y=r,u=p=>{y("update:modelValue",p.target.value)};return(p,_)=>(n(),i("div",me,[s.label?(n(),i("label",{key:0,for:s.id,class:"block text-sm font-bold text-gray-900 mb-1"},l(s.label),9,pe)):f("",!0),t("div",ye,[t("select",{id:s.id,value:s.modelValue,disabled:s.disabled,onChange:u,class:A(m(S)("block w-full px-3 py-2 bg-white text-black border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-brand-cyan focus:border-brand-cyan text-base disabled:bg-gray-100 disabled:text-gray-500",!s.modelValue&&"text-gray-400",s.error&&"border-red-500 focus:border-red-500 focus:ring-red-500",p.$attrs.class))},[s.placeholder?(n(),i("option",ve,l(s.placeholder),1)):f("",!0),(n(!0),i(j,null,F(s.options,x=>(n(),i("option",{key:x.value,value:x.value,class:"text-black"},l(x.label),9,xe))),128))],42,fe)]),s.error?(n(),i("p",ge,l(s.error),1)):f("",!0)]))}}),_e=$({__name:"Badge",props:{variant:{default:"default"},class:{}},setup(s){const r=s,y={default:"bg-brand-navy text-white hover:bg-brand-navy/80",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200/80",destructive:"bg-red-100 text-red-700 hover:bg-red-200/80",outline:"text-gray-900 border border-gray-200 hover:bg-gray-100",success:"bg-green-100 text-green-700 hover:bg-green-200/80",warning:"bg-yellow-100 text-yellow-700 hover:bg-yellow-200/80"};return(u,p)=>(n(),i("div",{class:A(m(S)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transiton-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",y[s.variant],r.class))},[L(u.$slots,"default")],2))}}),we={class:"fixed inset-0 overflow-y-auto"},he={class:"flex min-h-full items-center justify-center p-4 text-center"},ke={class:"flex justify-between items-center mb-4"},$e=$({__name:"Dialog",props:{open:{type:Boolean},title:{},description:{},className:{}},emits:["close"],setup(s,{emit:r}){const y=s;return(u,p)=>(n(),V(m(re),{appear:"",show:s.open,as:"template"},{default:o(()=>[a(m(ie),{as:"div",onClose:p[1]||(p[1]=_=>u.$emit("close")),class:"relative z-50"},{default:o(()=>[a(m(P),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:o(()=>[...p[2]||(p[2]=[t("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),t("div",we,[t("div",he,[a(m(P),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:o(()=>[a(m(oe),{class:A(m(S)("w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",y.className))},{default:o(()=>[t("div",ke,[s.title?(n(),V(m(ne),{key:0,as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:o(()=>[v(l(s.title),1)]),_:1})):f("",!0),t("button",{onClick:p[0]||(p[0]=_=>u.$emit("close")),class:"text-gray-400 hover:text-gray-500"},[a(m(K),{class:"w-5 h-5"})])]),s.description?(n(),V(m(de),{key:0,class:"mt-2 text-sm text-gray-500 mb-4"},{default:o(()=>[v(l(s.description),1)]),_:1})):f("",!0),L(u.$slots,"default")]),_:3},8,["class"])]),_:3})])])]),_:3})]),_:3},8,["show"]))}}),De={class:"space-y-6"},Ce={class:"space-y-4"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ae={class:"flex items-end gap-2"},Se={key:0,class:"flex justify-center py-12"},Ee={key:1,class:"min-w-full divide-y divide-gray-200"},Ne={class:"bg-gray-50"},Ue={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},Be={class:"bg-white divide-y divide-gray-200"},Ie={key:0},Te=["colspan"],Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Re={class:"flex items-center"},je={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Oe={class:"px-6 py-4 whitespace-nowrap"},ze={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Xe={key:2,class:"mt-4 flex justify-between items-center"},Ge={class:"text-sm text-gray-600"},Je={key:0,class:"space-y-4"},Ye={key:0,class:"bg-gray-50 p-3 rounded-lg text-sm mb-4"},Ke={class:"font-bold text-gray-900"},Me={class:"text-gray-500"},We={class:"grid grid-cols-2 gap-4 text-sm"},qe={key:0,class:"col-span-2"},Qe={class:"bg-gray-50 p-2 rounded border border-gray-100 mt-1"},Ze={class:"mt-6 flex justify-end"},et=$({__name:"AttendanceHistory",props:{isAdmin:{type:Boolean}},setup(s){const r=k({startDate:"",endDate:"",status:"",employeeId:""}),y=k({startDate:"",endDate:"",status:"",employeeId:""}),u=k(1),p=k(10),{data:_,loading:x}=ue(u,p,{startDate:b(()=>y.value.startDate),endDate:b(()=>y.value.endDate),status:b(()=>y.value.status),employeeId:b(()=>y.value.employeeId)}),D=b(()=>_.value?.data||[]),h=b(()=>_.value?.meta?.totalPages||0),H=()=>{y.value={...r.value},u.value=1},O=()=>{r.value={startDate:"",endDate:"",status:"",employeeId:""},y.value={...r.value},u.value=1},E=g=>{switch(g){case"PRESENT":return"success";case"LATE":return"warning";case"ABSENT":return"destructive";case"EXCUSED":return"default";default:return"secondary"}},C=g=>g?new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-",N=g=>new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=k(null);return(g,e)=>{const U=ee,z=be,w=R,B=te,I=se,X=le,G=ae,T=_e,J=$e;return n(),i("div",De,[a(I,null,{default:o(()=>[a(B,{class:"pt-6"},{default:o(()=>[t("div",Ce,[s.isAdmin?(n(),V(ce,{key:0,modelValue:r.value.employeeId,"onUpdate:modelValue":e[0]||(e[0]=d=>r.value.employeeId=d),class:"max-w-md"},null,8,["modelValue"])):f("",!0),t("div",Ve,[a(U,{label:"Start Date",type:"date",modelValue:r.value.startDate,"onUpdate:modelValue":e[1]||(e[1]=d=>r.value.startDate=d)},null,8,["modelValue"]),a(U,{label:"End Date",type:"date",modelValue:r.value.endDate,"onUpdate:modelValue":e[2]||(e[2]=d=>r.value.endDate=d)},null,8,["modelValue"]),a(z,{label:"Status",modelValue:r.value.status,"onUpdate:modelValue":e[3]||(e[3]=d=>r.value.status=d),options:[{label:"All Status",value:""},{label:"Present",value:"PRESENT"},{label:"Late",value:"LATE"},{label:"Absent",value:"ABSENT"},{label:"Excused",value:"EXCUSED"}]},null,8,["modelValue"]),t("div",Ae,[a(w,{onClick:H,class:"flex-1"},{default:o(()=>[a(m(M),{class:"w-4 h-4 mr-2"}),e[8]||(e[8]=v(" Apply ",-1))]),_:1}),a(w,{variant:"secondary",onClick:O,class:"flex-1"},{default:o(()=>[...e[9]||(e[9]=[v(" Reset ",-1)])]),_:1})])])])]),_:1})]),_:1}),a(I,null,{default:o(()=>[a(G,null,{default:o(()=>[a(X,null,{default:o(()=>[...e[10]||(e[10]=[v("Attendance Records",-1)])]),_:1})]),_:1}),a(B,{class:"overflow-x-auto"},{default:o(()=>[m(x)?(n(),i("div",Se,[...e[11]||(e[11]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy"},null,-1)])])):(n(),i("table",Ee,[t("thead",Ne,[t("tr",null,[e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date",-1)),s.isAdmin?(n(),i("th",Ue,"Employee")):f("",!0),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Clock In",-1)),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Clock Out",-1)),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Hours",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),t("tbody",Be,[D.value.length===0?(n(),i("tr",Ie,[t("td",{colspan:s.isAdmin?7:6,class:"px-6 py-8 text-center text-gray-500"}," No attendance records found ",8,Te)])):f("",!0),(n(!0),i(j,null,F(D.value,d=>(n(),i("tr",{key:d.id,class:"hover:bg-gray-50"},[t("td",Pe,[t("div",Re,[a(m(W),{class:"w-4 h-4 mr-2 text-gray-400"}),v(" "+l(N(d.date)),1)])]),s.isAdmin?(n(),i("td",je,l(d.employee?.firstName)+" "+l(d.employee?.lastName),1)):f("",!0),t("td",Fe,l(C(d.checkIn)),1),t("td",Le,l(C(d.checkOut)),1),t("td",He,l(d.workDuration?(d.workDuration/60).toFixed(1)+"h":"-"),1),t("td",Oe,[a(T,{variant:E(d.status)},{default:o(()=>[v(l(d.status),1)]),_:2},1032,["variant"])]),t("td",ze,[a(w,{variant:"secondary",class:"p-2 h-8 w-8",onClick:at=>c.value=d},{default:o(()=>[a(m(q),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])])),h.value>1?(n(),i("div",Xe,[a(w,{disabled:u.value<=1,onClick:e[4]||(e[4]=d=>u.value--),variant:"secondary"},{default:o(()=>[...e[18]||(e[18]=[v("Previous",-1)])]),_:1},8,["disabled"]),t("span",Ge,"Page "+l(u.value)+" of "+l(h.value),1),a(w,{disabled:u.value>=h.value,onClick:e[5]||(e[5]=d=>u.value++),variant:"secondary"},{default:o(()=>[...e[19]||(e[19]=[v("Next",-1)])]),_:1},8,["disabled"])])):f("",!0)]),_:1})]),_:1}),a(J,{open:!!c.value,onClose:e[7]||(e[7]=d=>c.value=null),title:"Attendance Details"},{default:o(()=>[c.value?(n(),i("div",Je,[c.value.employee?(n(),i("div",Ye,[t("p",Ke,l(c.value.employee.firstName)+" "+l(c.value.employee.lastName),1),t("p",Me,l(c.value.employee.position)+" - "+l(c.value.employee.department),1)])):f("",!0),t("div",We,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-gray-500 font-medium"},"Date",-1)),t("p",null,l(N(c.value.date)),1)]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-gray-500 font-medium"},"Status",-1)),a(T,{variant:E(c.value.status)},{default:o(()=>[v(l(c.value.status),1)]),_:1},8,["variant"])]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-gray-500 font-medium"},"Check In",-1)),t("p",null,l(C(c.value.checkIn)),1)]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-gray-500 font-medium"},"Check Out",-1)),t("p",null,l(C(c.value.checkOut)),1)]),c.value.notes?(n(),i("div",qe,[e[24]||(e[24]=t("p",{class:"text-gray-500 font-medium"},"Notes",-1)),t("p",Qe,l(c.value.notes),1)])):f("",!0)])])):f("",!0),t("div",Ze,[a(w,{variant:"secondary",onClick:e[6]||(e[6]=d=>c.value=null)},{default:o(()=>[...e[25]||(e[25]=[v("Close",-1)])]),_:1})])]),_:1},8,["open"])])}}}),tt={class:"space-y-6"},st={class:"flex justify-between items-center"},gt=$({__name:"index",setup(s){const r=Q(),y=Z(),u=r.params.tenant_slug,p=b(()=>["ADMIN","HR","SUPER"].includes(y.user?.role||""));return(_,x)=>{const D=R,h=Y;return n(),i("div",tt,[t("div",st,[x[1]||(x[1]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Attendance History",-1)),a(h,{to:`/${m(u)}/dashboard/attendance`},{default:o(()=>[a(D,{variant:"secondary"},{default:o(()=>[...x[0]||(x[0]=[v("Back to Attendance",-1)])]),_:1})]),_:1},8,["to"])]),a(et,{isAdmin:m(p)},null,8,["isAdmin"])])}}});export{gt as default};
