import{c as T,d as A}from"./BhMDYxe4.js";import{g as N,j as k,K as c,c as d,I as x,a as t,N as w,w as $,p as j,b as h,d as b,k as l,t as a,F as C,l as S,v as F,o,H as G,aF as H,a0 as L,aG as K,a2 as B,x as I,a7 as R,aw as E}from"./DX_cbf2s.js";import{f as n,t as J}from"./uRmCsCMF.js";import"./H1PkYqcn.js";import"./czVTDFG8.js";const O={id:"payslip-content",class:"bg-white shadow-lg rounded-lg overflow-hidden max-w-4xl mx-auto print:shadow-none print:max-w-none"},V={class:"bg-gray-50 px-6 py-4 flex justify-between items-center border-b border-gray-200 print:hidden"},M={class:"flex space-x-2"},z={class:"p-8 print:p-0"},U={class:"text-center mb-8 border-b-2 border-gray-800 pb-4"},q={class:"mt-2 text-sm text-gray-500"},Q={class:"text-xs text-gray-400 mt-1"},W={class:"grid grid-cols-2 gap-4 mb-8"},X={class:"w-full text-sm"},Y={class:"font-semibold"},Z={class:"font-semibold"},_={class:"font-semibold"},tt={class:"w-full text-sm"},st={class:"font-semibold"},et={class:"font-semibold"},at={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},lt={class:"w-full text-sm"},nt={class:"text-right font-medium"},ot={class:"py-1"},it={class:"text-right font-medium"},rt={class:"text-right font-medium"},dt={class:"text-right font-medium"},pt={class:"border-t border-gray-300 font-bold mt-2"},yt={class:"text-right pt-2"},ut={class:"w-full text-sm"},mt={class:"py-1"},gt={class:"text-right font-medium text-red-600"},bt={class:"border-t border-gray-300 font-bold mt-2"},xt={class:"text-right pt-2 text-red-600"},ct={class:"bg-brand-navy/5 p-6 rounded-lg text-center mb-8 print:border print:border-gray-300"},ft={class:"text-3xl font-bold text-brand-navy mb-2"},vt={class:"text-sm italic text-gray-600 capitalize"},wt={class:"space-y-4 print:block"},ht={key:0,class:"border border-gray-200 rounded-md"},Pt={class:"grid grid-cols-2 gap-x-8 gap-y-2"},Dt={class:"flex justify-between"},kt={class:"flex justify-between"},jt={class:"flex justify-between"},Ct={class:"flex justify-between"},St={class:"flex justify-between border-t border-gray-200 pt-1 font-medium bg-yellow-50 px-2 rounded"},Ft={class:"col-span-2 mt-2"},Kt={class:"border border-gray-200 rounded-md"},Bt={class:"w-full"},Nt={class:"text-right"},Tt={class:"text-right"},At={class:"text-right"},$t={class:"border-t border-gray-200 font-medium"},Gt={class:"text-right pt-2"},Ht={class:"hidden print:flex mt-12 justify-between px-12 text-center text-sm"},Lt={class:"font-bold underline"},It=N({__name:"PayslipDetail",props:{payslip:{},isAdmin:{type:Boolean}},emits:["delete"],setup(e,{emit:P}){const i=e,p=k(!1),y=k(!1),f=c(()=>i.payslip.totalGross||(parseFloat(i.payslip.grossSalary||"0")+parseFloat(i.payslip.overtimePay||"0")+parseFloat(i.payslip.bonuses||"0")+parseFloat(i.payslip.allowances||"0")).toString()),m=c(()=>i.payslip.totalDeductions||i.payslip.deductions?.reduce((u,s)=>u+parseFloat(String(s.amount)||"0"),0).toString()||(parseFloat(i.payslip.taxAmount||"0")+parseFloat(i.payslip.bpjsKesehatanEmployee||"0")+parseFloat(i.payslip.bpjsKetenagakerjaanEmployee||"0")+parseFloat(i.payslip.otherDeductions||"0")).toString()),g=()=>{window.print()};return(u,s)=>(o(),d("div",null,[(o(),x(w("style"),null,{default:$(()=>[...s[3]||(s[3]=[b(" @media print { body * { visibility: hidden; } #payslip-content, #payslip-content * { visibility: visible; } #payslip-content { position: absolute; left: 0; top: 0; width: 100%; } } ",-1)])]),_:1})),t("div",O,[t("div",V,[s[7]||(s[7]=t("h1",{class:"text-xl font-bold text-gray-800"},"Payslip Detail",-1)),t("div",M,[e.isAdmin?(o(),d("button",{key:0,onClick:s[0]||(s[0]=r=>u.$emit("delete")),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[h(l(G),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=b(" Delete ",-1))])):j("",!0),t("button",{onClick:g,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy"},[h(l(H),{class:"w-4 h-4 mr-2"}),s[5]||(s[5]=b(" Print ",-1))]),t("button",{onClick:g,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-navy"},[h(l(L),{class:"w-4 h-4 mr-2"}),s[6]||(s[6]=b(" Download PDF ",-1))])])]),t("div",z,[t("div",U,[s[8]||(s[8]=t("h2",{class:"text-2xl font-bold uppercase tracking-wide"},"Slip Gaji / Payslip",-1)),s[9]||(s[9]=t("p",{class:"text-gray-600"},"Company Name Inc.",-1)),t("div",q," Periode: "+a(e.payslip.payroll?.periodStart?new Date(e.payslip.payroll.periodStart).toLocaleDateString("id-ID",{month:"long",year:"numeric"}):"N/A"),1),t("div",Q," Generated: "+a(new Date(e.payslip.generatedAt).toLocaleString()),1)]),t("div",W,[t("div",null,[t("table",X,[t("tbody",null,[t("tr",null,[s[10]||(s[10]=t("td",{class:"text-gray-500 py-1",width:"100"},"Name",-1)),t("td",Y,": "+a(e.payslip.payroll?.employee?.firstName||"-")+" "+a(e.payslip.payroll?.employee?.lastName||""),1)]),t("tr",null,[s[11]||(s[11]=t("td",{class:"text-gray-500 py-1"},"Position",-1)),t("td",Z,": "+a(e.payslip.payroll?.employee?.position||"-"),1)]),t("tr",null,[s[12]||(s[12]=t("td",{class:"text-gray-500 py-1"},"Department",-1)),t("td",_,": "+a(e.payslip.payroll?.employee?.department||"-"),1)])])])]),t("div",null,[t("table",tt,[t("tbody",null,[t("tr",null,[s[13]||(s[13]=t("td",{class:"text-gray-500 py-1",width:"100"},"Status PTKP",-1)),t("td",st,": "+a(e.payslip.taxCalculationDetails?.ptkpCategory||"-"),1)]),t("tr",null,[s[14]||(s[14]=t("td",{class:"text-gray-500 py-1"},"Payment Date",-1)),t("td",et,": "+a(e.payslip.payroll?.processedAt?new Date(e.payslip.payroll.processedAt).toLocaleDateString():"-"),1)])])])])]),t("div",at,[t("div",null,[s[19]||(s[19]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 mb-3 border-b border-gray-200 pb-1"},"Penghasilan / Income",-1)),t("table",lt,[t("tbody",null,[t("tr",null,[s[15]||(s[15]=t("td",{class:"py-1"},"Gaji Pokok",-1)),t("td",nt,a(l(n)(e.payslip.grossSalary)),1)]),t("tr",null,[t("td",ot,"Lembur "+a(e.payslip.payroll?.overtimeHours?`(${e.payslip.payroll.overtimeHours} jam)`:""),1),t("td",it,a(l(n)(e.payslip.overtimePay)),1)]),t("tr",null,[s[16]||(s[16]=t("td",{class:"py-1"},"Allowance / Tunjangan",-1)),t("td",rt,a(l(n)(e.payslip.allowances)),1)]),t("tr",null,[s[17]||(s[17]=t("td",{class:"py-1"},"Bonus",-1)),t("td",dt,a(l(n)(e.payslip.bonuses)),1)]),t("tr",pt,[s[18]||(s[18]=t("td",{class:"pt-2"},"Total Penghasilan Kotor",-1)),t("td",yt,a(l(n)(f.value)),1)])])])]),t("div",null,[s[21]||(s[21]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 mb-3 border-b border-gray-200 pb-1"},"Potongan / Deductions",-1)),t("table",ut,[t("tbody",null,[(o(!0),d(C,null,S(e.payslip.deductions,r=>(o(),d("tr",{key:r.id},[t("td",mt,a(r.description),1),t("td",gt,"("+a(l(n)(r.amount))+")",1)]))),128)),t("tr",bt,[s[20]||(s[20]=t("td",{class:"pt-2"},"Total Potongan",-1)),t("td",xt,"("+a(l(n)(m.value))+")",1)])])])])]),t("div",ct,[s[22]||(s[22]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 mb-2"},"Gaji Bersih / Net Salary",-1)),t("p",ft,a(l(n)(e.payslip.takeHomePay)),1),t("p",vt,'"'+a(l(J)(Number(e.payslip.takeHomePay)))+'"',1)]),t("div",wt,[e.payslip.taxCalculationDetails?(o(),d("div",ht,[t("button",{onClick:s[1]||(s[1]=r=>p.value=!p.value),class:"w-full px-4 py-2 bg-gray-50 flex justify-between items-center text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors print:hidden"},[s[23]||(s[23]=t("span",null,"Detail Perhitungan Pajak",-1)),(o(),x(w(p.value?l(K):l(B)),{class:"w-4 h-4"}))]),t("div",{class:F([p.value?"block":"hidden","print:block","px-4","py-3","text-sm"])},[t("div",Pt,[t("div",Dt,[s[24]||(s[24]=t("span",{class:"text-gray-500"},"Kategori PTKP",-1)),t("span",null,a(e.payslip.taxCalculationDetails.ptkpCategory),1)]),t("div",kt,[s[25]||(s[25]=t("span",{class:"text-gray-500"},"PTKP setahun",-1)),t("span",null,a(l(n)(e.payslip.taxCalculationDetails.ptkp)),1)]),t("div",jt,[s[26]||(s[26]=t("span",{class:"text-gray-500"},"Penghasilan Bruto setahun",-1)),t("span",null,a(l(n)(e.payslip.taxCalculationDetails.annualGrossSalary||e.payslip.taxCalculationDetails.annualGross||0)),1)]),t("div",Ct,[s[27]||(s[27]=t("span",{class:"text-gray-500"},"Pengurang (Biaya Jabatan + BPJS)",-1)),t("span",null,a(l(n)(e.payslip.taxCalculationDetails.annualBpjs||0)),1)]),t("div",St,[s[28]||(s[28]=t("span",null,"Penghasilan Kena Pajak (PKP)",-1)),t("span",null,a(l(n)(e.payslip.taxCalculationDetails.taxableIncome||e.payslip.taxCalculationDetails.annualTaxableIncome||0)),1)]),s[30]||(s[30]=t("div",null,null,-1)),t("div",Ft,[s[29]||(s[29]=t("p",{class:"text-xs text-gray-400 mb-1"},"Rincian Lapisan Tarif Pajak:",-1)),(o(!0),d(C,null,S(e.payslip.taxCalculationDetails.taxBreakdown,(r,v)=>(o(),d("div",{key:v,class:"flex justify-between text-xs text-gray-600 ml-4"},[t("span",null,"â€¢ Lapisan "+a(r.bracket)+" ("+a(r.rate*100)+"%)",1),t("span",null,a(l(n)(r.amount)),1)]))),128))])])],2)])):j("",!0),t("div",Kt,[t("button",{onClick:s[2]||(s[2]=r=>y.value=!y.value),class:"w-full px-4 py-2 bg-gray-50 flex justify-between items-center text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors print:hidden"},[s[31]||(s[31]=t("span",null,"Kontribusi Perusahaan (Benefit bukan Tunai)",-1)),(o(),x(w(y.value?l(K):l(B)),{class:"w-4 h-4"}))]),t("div",{class:F([y.value?"block":"hidden","print:block","px-4","py-3","text-sm"])},[t("table",Bt,[t("tbody",null,[t("tr",null,[s[32]||(s[32]=t("td",{class:"py-1 text-gray-500"},"BPJS Kesehatan (4%)",-1)),t("td",Nt,a(l(n)(e.payslip.bpjsKesehatanCompany)),1)]),t("tr",null,[s[33]||(s[33]=t("td",{class:"py-1 text-gray-500"},"BPJS Ketenagakerjaan (JHT 3.7%)",-1)),t("td",Tt,a(l(n)(parseFloat(e.payslip.grossSalary||"0")*.037)),1)]),t("tr",null,[s[34]||(s[34]=t("td",{class:"py-1 text-gray-500"},"BPJS Ketenagakerjaan (Lainnya)",-1)),t("td",At,a(l(n)(Math.max(0,parseFloat(e.payslip.bpjsKetenagakerjaanCompany)-parseFloat(e.payslip.grossSalary||"0")*.037))),1)]),t("tr",$t,[s[35]||(s[35]=t("td",{class:"pt-2"},"Total Contribution",-1)),t("td",Gt,a(l(n)(parseFloat(e.payslip.bpjsKesehatanCompany)+parseFloat(e.payslip.bpjsKetenagakerjaanCompany))),1)])])])],2)])]),t("div",Ht,[t("div",null,[s[36]||(s[36]=t("p",{class:"mb-16"},"Diterima Ole,",-1)),t("p",Lt,a(e.payslip.payroll?.employee?.firstName||"-")+" "+a(e.payslip.payroll?.employee?.lastName||""),1),s[37]||(s[37]=t("p",null,"Employee",-1))]),s[38]||(s[38]=t("div",null,[t("p",{class:"mb-16"},"Disetujui Oleh,"),t("p",{class:"font-bold underline"},"HR Manager"),t("p",null,"Human Resources")],-1))])])])]))}}),Rt={class:"px-4 py-8"},Et={key:0,class:"flex justify-center py-12"},Jt={key:1,class:"text-center py-12 text-red-500"},Ot={key:3,class:"text-center py-12 text-gray-500"},Wt=N({__name:"index",setup(e){const P=I(),i=R(),p=P.params.id,{data:y,loading:f,error:m}=T(p),{mutate:g}=A(),u=E(),s=c(()=>u.user),r=c(()=>["ADMIN","SUPER","HR"].includes(s.value?.role||"")),v=async()=>{confirm("Are you sure you want to delete this payslip? This action cannot be undone.")&&await g(p,{onSuccess:()=>{i.push({path:".."})}})};return(Vt,D)=>(o(),d("div",Rt,[l(f)?(o(),d("div",Et,[...D[0]||(D[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy"},null,-1)])])):l(m)?(o(),d("div",Jt," Error loading payslip: "+a(l(m).message),1)):l(y)?(o(),x(It,{key:2,payslip:l(y),isAdmin:l(r),onDelete:v},null,8,["payslip","isAdmin"])):(o(),d("div",Ot," Payslip not found. "))]))}});export{Wt as default};
