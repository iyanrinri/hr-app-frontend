import{_ as j,a as A}from"./B-kHxmq3.js";import{_ as N}from"./Dnm_KAh1.js";import{_ as R}from"./BfigT44c.js";import{_ as $}from"./B9YZYzJt.js";import{i as M,j as U,k as B}from"./B1gHIjVw.js";import{g as L,K as T,c as o,a as t,b as a,w as n,o as r,d as c,k as i,F as P,l as V,t as l,aQ as E,X as F}from"./DX_cbf2s.js";import{f as x}from"./DEBy37vB.js";import"./uRmCsCMF.js";import"./D2JNKblU.js";import"./H1PkYqcn.js";import"./czVTDFG8.js";const H={class:"space-y-6"},K={class:"overflow-x-auto"},Q={key:0,class:"text-center py-8"},S={key:1,class:"w-full text-sm text-left"},X={class:"divide-y"},z={key:0},G={class:"px-4 py-3 font-medium text-gray-900"},I={class:"px-4 py-3 text-gray-600"},J={class:"px-4 py-3 text-gray-600"},O={class:"px-4 py-3"},W={class:"px-4 py-3 truncate max-w-[200px]"},Y={class:"px-4 py-3 text-right space-x-2"},Z={class:"flex justify-end gap-2"},ct=L({__name:"index",setup(q){const{data:d,loading:_,refresh:m}=M(),{mutate:f}=U(),{mutate:v}=B(),u=T(()=>d.value?Array.isArray(d.value)?d.value:d.value.data||[]:[]),g=async p=>{await f(p),m()},h=async p=>{const e=prompt("Please enter a rejection reason:");e!==null&&(await v(p,e),m())};return(p,e)=>{const w=A,b=j,y=N,k=R,C=$;return r(),o("div",H,[e[6]||(e[6]=t("div",{class:"flex justify-between items-center"},[t("div",null,[t("h2",{className:"text-2xl font-bold text-gray-900"},"Leave Approvals"),t("p",{className:"text-sm text-gray-500"},"Review and action pending leave requests.")])],-1)),a(C,null,{default:n(()=>[a(b,null,{default:n(()=>[a(w,null,{default:n(()=>[...e[0]||(e[0]=[c("Pending Requests",-1)])]),_:1})]),_:1}),a(k,null,{default:n(()=>[t("div",K,[i(_)?(r(),o("div",Q,[...e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy mx-auto"},null,-1)])])):(r(),o("table",S,[e[5]||(e[5]=t("thead",{class:"bg-gray-50 border-b"},[t("tr",null,[t("th",{class:"px-4 py-3 font-medium text-gray-500"},"Employee"),t("th",{class:"px-4 py-3 font-medium text-gray-500"},"Type"),t("th",{class:"px-4 py-3 font-medium text-gray-500"},"Dates"),t("th",{class:"px-4 py-3 font-medium text-gray-500"},"Days"),t("th",{class:"px-4 py-3 font-medium text-gray-500"},"Reason"),t("th",{class:"px-4 py-3 font-medium text-right text-gray-500"},"Actions")])],-1)),t("tbody",X,[u.value.length===0?(r(),o("tr",z,[...e[2]||(e[2]=[t("td",{colspan:"6",class:"p-4 text-center text-gray-500 italic"},"No pending approvals.",-1)])])):(r(!0),o(P,{key:1},V(u.value,s=>(r(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",G,l(s.employeeName||"Unknown"),1),t("td",I,l(s.leaveTypeName),1),t("td",J,l(i(x)(new Date(s.startDate),"MMM dd"))+" - "+l(i(x)(new Date(s.endDate),"MMM dd, yyyy")),1),t("td",O,l(s.totalDays),1),t("td",W,l(s.reason),1),t("td",Y,[t("div",Z,[a(y,{class:"bg-green-600 hover:bg-green-700 text-white py-1 px-3 text-xs h-auto",onClick:D=>g(s.id)},{default:n(()=>[a(i(E),{class:"w-4 h-4 mr-1"}),e[3]||(e[3]=c(" Approve ",-1))]),_:1},8,["onClick"]),a(y,{variant:"destructive",class:"py-1 px-3 text-xs h-auto",onClick:D=>h(s.id)},{default:n(()=>[a(i(F),{class:"w-4 h-4 mr-1"}),e[4]||(e[4]=c(" Reject ",-1))]),_:1},8,["onClick"])])])]))),128))])]))])]),_:1})]),_:1})])}}});export{ct as default};
