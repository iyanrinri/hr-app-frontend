import{_ as U}from"./Dnm_KAh1.js";import{_ as F}from"./D2JNKblU.js";import{g as z,x as M,j as f,c as x,o as d,a as t,p as D,F as I,l as L,t as o,b as a,I as E,w as u,k as n,E as H,ao as P,ap as K,H as q,X,v,d as y,K as Y,V as O,Y as W,a1 as Z,aq as tt,ar as et,as as st,U as at,M as lt,at as ot}from"./DX_cbf2s.js";import{_ as rt}from"./B9YZYzJt.js";import{a as nt,b as it,c as dt}from"./crM-xtPk.js";import"./uRmCsCMF.js";import"./H1PkYqcn.js";import"./czVTDFG8.js";const ct={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},xt={class:"bg-white divide-y divide-gray-200"},mt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},gt={class:"flex flex-col"},yt={key:0,class:"mt-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 w-fit"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ht={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},wt={class:"flex justify-end space-x-2"},_t={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},kt={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},$t={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},Ct={class:"p-6 space-y-6"},Dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Et={class:"text-gray-900"},Nt={class:"text-gray-900"},At={class:"text-gray-900"},jt={class:"text-gray-900 capitalize"},St={class:"text-gray-900"},Rt={class:"text-gray-900"},It={class:"text-gray-900"},Lt={class:"text-gray-900"},Tt={class:"text-gray-900"},Vt={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200"},Bt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ut={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},Ft={class:"text-lg font-bold text-gray-900 mb-2"},zt={class:"text-gray-600 mb-6"},Mt={class:"flex justify-end space-x-3"},Pt=z({__name:"EmployeeTable",props:{employees:{}},emits:["delete","restore"],setup(T,{emit:V}){const b=V,p=M().params.tenant_slug,r=f(null),i=f(null),_=()=>{r.value&&(r.value.type==="delete"?b("delete",r.value.id):b("restore",r.value.id),r.value=null)},N=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),C=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),A=m=>new Date(m).toLocaleDateString();return(m,e)=>{const g=U,j=F;return d(),x("div",null,[t("div",ct,[t("table",ut,[e[3]||(e[3]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Position"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Department"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Join Date"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",xt,[(d(!0),x(I,null,L(T.employees,c=>(d(),x("tr",{key:c.id,class:"hover:bg-gray-50"},[t("td",mt,[t("div",gt,[t("span",null,o(c.firstName)+" "+o(c.lastName),1),c.user?.deletedAt?(d(),x("span",yt," Inactive User ")):D("",!0)])]),t("td",pt,o(c.user?.email),1),t("td",vt,o(c.position),1),t("td",ft,o(c.department),1),t("td",bt,o(A(c.joinDate)),1),t("td",ht,[t("div",wt,[a(g,{variant:"secondary",class:"p-2",onClick:k=>i.value=c,title:"View Details"},{default:u(()=>[a(n(H),{class:"w-4 h-4"})]),_:1},8,["onClick"]),a(j,{to:`/${n(p)}/dashboard/employees/${c.id}`},{default:u(()=>[a(g,{variant:"secondary",class:"p-2",title:"Edit Employee"},{default:u(()=>[a(n(P),{class:"w-4 h-4"})]),_:1})]),_:1},8,["to"]),c.user?.deletedAt?(d(),E(g,{key:0,variant:"secondary",class:"p-2 bg-green-50 text-green-600 hover:bg-green-100 border-green-200",onClick:k=>r.value={type:"restore",id:c.id},title:"Restore Employee"},{default:u(()=>[a(n(K),{class:"w-4 h-4"})]),_:1},8,["onClick"])):(d(),E(g,{key:1,variant:"danger",class:"p-2",onClick:k=>r.value={type:"delete",id:c.id},title:"Delete Employee"},{default:u(()=>[a(n(q),{class:"w-4 h-4"})]),_:1},8,["onClick"]))])])]))),128))])])]),i.value?(d(),x("div",_t,[t("div",kt,[t("div",$t,[e[4]||(e[4]=t("h3",{class:"text-xl font-bold text-gray-900"},"Employee Details",-1)),t("button",{onClick:e[0]||(e[0]=c=>i.value=null),class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[a(n(X),{class:"w-5 h-5 text-gray-500"})])]),t("div",Ct,[t("div",Dt,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"First Name",-1)),t("p",Et,o(i.value.firstName),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Last Name",-1)),t("p",Nt,o(i.value.lastName),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Email",-1)),t("p",At,o(i.value.user?.email),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Role",-1)),t("p",jt,o(i.value.user?.role),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Position",-1)),t("p",St,o(i.value.position),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Department",-1)),t("p",Rt,o(i.value.department),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Join Date",-1)),t("p",It,o(C(i.value.joinDate)),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Base Salary",-1)),t("p",Lt,o(N(i.value.baseSalary)),1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Status",-1)),t("span",{class:v(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",i.value.user?.deletedAt?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},o(i.value.user?.deletedAt?"Inactive":"Active"),3)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-bold text-gray-700 mb-1"},"Created At",-1)),t("p",Tt,o(C(i.value.createdAt)),1)])])]),t("div",Vt,[a(g,{onClick:e[1]||(e[1]=c=>i.value=null),variant:"secondary",class:"w-full"},{default:u(()=>[...e[15]||(e[15]=[y(" Close ",-1)])]),_:1})])])])):D("",!0),r.value?(d(),x("div",Bt,[t("div",Ut,[t("h3",Ft,o(r.value.type==="delete"?"Delete Employee":"Restore Employee"),1),t("p",zt,o(r.value.type==="delete"?"Are you sure you want to delete this employee? This action will deactivate their account.":"Are you sure you want to restore this employee? This will reactivate their account."),1),t("div",Mt,[a(g,{variant:"secondary",onClick:e[2]||(e[2]=c=>r.value=null)},{default:u(()=>[...e[16]||(e[16]=[y(" Cancel ",-1)])]),_:1}),a(g,{variant:r.value.type==="delete"?"danger":"primary",onClick:_},{default:u(()=>[y(o(r.value.type==="delete"?"Delete":"Restore"),1)]),_:1},8,["variant"])])])])):D("",!0)])}}}),qt={class:"space-y-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gt={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},Jt={class:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col lg:flex-row gap-4 items-center justify-between"},Qt={class:"flex flex-col md:flex-row gap-4 w-full lg:w-auto flex-1"},Ht={class:"relative flex-1 max-w-md"},Kt={class:"flex items-center gap-2 bg-gray-50 p-1 rounded-lg self-start"},Xt={class:"flex gap-2"},Yt={class:"flex items-center bg-gray-50 p-1 rounded-lg border border-gray-100"},Ot={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Wt={key:1,class:"p-12 text-center text-red-600 bg-red-50 rounded-lg border border-red-100 mt-6 lg:mx-8"},Zt={key:2,class:"text-center py-20 bg-gray-50 rounded-xl border border-dashed border-gray-200"},te={class:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm"},ee={key:3},se={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ae={class:"absolute top-3 right-3 z-10"},le={class:"px-6 pb-6 pt-16 relative"},oe={class:"w-20 h-20 rounded-2xl bg-white p-1 absolute -top-10 left-6 shadow-md shadow-gray-200"},re={class:"w-full h-full rounded-xl bg-brand-navy text-white flex items-center justify-center text-2xl font-bold"},ne={class:"mb-4"},ie=["title"],de={class:"text-brand-cyan font-medium text-sm mt-1 truncate"},ce={class:"space-y-3 mb-6 pt-4 border-t border-gray-50"},ue={class:"flex items-center text-sm text-gray-500"},xe=["title"],me={class:"flex items-center text-sm text-gray-500"},ge=["title"],ye={class:"flex gap-2"},pe={class:"overflow-x-auto"},De=z({__name:"index",setup(T){const b=M().params.tenant_slug,h=f("grid"),p=f(""),r=f(""),i=f(""),_=f(""),{data:N,loading:C,error:A,refresh:m}=nt(1,50,i,_),{mutate:e}=it(),{mutate:g}=dt(),j=()=>{i.value=p.value,_.value=r.value},c=()=>{p.value="",r.value="",i.value="",_.value=""},k=async w=>{confirm("Are you sure you want to delete this employee?")&&(await e(w),m())},G=async w=>{await g(w),m()},B=w=>!w.user?.deletedAt,S=Y(()=>N.value?.data||[]);return(w,s)=>{const $=U,R=F,J=Pt,Q=rt;return d(),x("div",qt,[t("div",Gt,[s[7]||(s[7]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"Employee Directory"),t("p",{class:"text-gray-500 mt-1"},"Manage your organization's workforce and profiles.")],-1)),a(R,{to:`/${n(b)}/dashboard/employees/create`},{default:u(()=>[a($,{class:"shadow-lg shadow-brand-navy/20 h-10 px-6"},{default:u(()=>[a(n(Z),{class:"w-4 h-4 mr-2"}),s[6]||(s[6]=y(" Add Employee ",-1))]),_:1})]),_:1},8,["to"])]),t("div",Jt,[t("div",Qt,[t("div",Ht,[a(n(tt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),O(t("input",{type:"text",placeholder:"Search by name, email, position...","onUpdate:modelValue":s[0]||(s[0]=l=>p.value=l),class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border-0 rounded-lg focus:ring-2 focus:ring-brand-cyan/20 focus:bg-white transition-all text-sm"},null,512),[[W,p.value]])]),t("div",Kt,[t("button",{onClick:s[1]||(s[1]=l=>r.value=""),class:v(["px-4 py-1.5 text-sm font-medium rounded-md transition-all",r.value===""?"bg-white text-brand-navy shadow-sm":"text-gray-500 hover:text-gray-900"])}," All ",2),t("button",{onClick:s[2]||(s[2]=l=>r.value="active"),class:v(["px-4 py-1.5 text-sm font-medium rounded-md transition-all",r.value==="active"?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-900"])}," Active ",2),t("button",{onClick:s[3]||(s[3]=l=>r.value="inactive"),class:v(["px-4 py-1.5 text-sm font-medium rounded-md transition-all",r.value==="inactive"?"bg-white text-gray-700 shadow-sm":"text-gray-500 hover:text-gray-900"])}," Inactive ",2)]),t("div",Xt,[a($,{onClick:j,variant:"secondary",class:"px-4 shadow-sm border border-gray-200"},{default:u(()=>[...s[8]||(s[8]=[y("Apply",-1)])]),_:1}),p.value||r.value?(d(),E($,{key:0,onClick:c,variant:"ghost",class:"px-4 text-gray-500"},{default:u(()=>[...s[9]||(s[9]=[y("Reset",-1)])]),_:1})):D("",!0)])]),t("div",Yt,[t("button",{onClick:s[4]||(s[4]=l=>h.value="grid"),class:v(["p-2 rounded-md transition-all",h.value==="grid"?"bg-white text-brand-navy shadow-sm":"text-gray-400 hover:text-gray-600"]),title:"Grid View"},[a(n(et),{class:"w-5 h-5"})],2),t("button",{onClick:s[5]||(s[5]=l=>h.value="list"),class:v(["p-2 rounded-md transition-all",h.value==="list"?"bg-white text-brand-navy shadow-sm":"text-gray-400 hover:text-gray-600"]),title:"List View"},[a(n(st),{class:"w-5 h-5"})],2)])]),n(C)?(d(),x("div",Ot,[(d(),x(I,null,L(8,l=>t("div",{key:l,class:"h-64 bg-gray-100 rounded-xl animate-pulse"})),64))])):n(A)?(d(),x("div",Wt," Error loading employees. Please try refreshing the page. ")):S.value.length===0?(d(),x("div",Zt,[t("div",te,[a(n(at),{class:"w-8 h-8 text-gray-300"})]),s[10]||(s[10]=t("h3",{class:"text-lg font-medium text-gray-900"},"No employees found",-1)),s[11]||(s[11]=t("p",{class:"text-gray-500 mt-1"},"Try adjusting your filters or add a new employee.",-1))])):(d(),x("div",ee,[h.value==="grid"?(d(),x("div",se,[(d(!0),x(I,null,L(S.value,l=>(d(),x("div",{key:l.id,class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 overflow-hidden group relative"},[t("div",ae,[t("span",{class:v(["inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-bold tracking-wide uppercase shadow-sm backdrop-blur-md",B(l)?"bg-green-100/90 text-green-700":"bg-red-100/90 text-red-700"])},o(B(l)?"Active":"Inactive"),3)]),s[14]||(s[14]=t("div",{class:"h-24 bg-gradient-to-r from-gray-50 to-gray-100 relative border-b border-gray-100"},null,-1)),t("div",le,[t("div",oe,[t("div",re,o((l.firstName?.[0]||"")+(l.lastName?.[0]||"")),1)]),t("div",ne,[a(R,{to:`/${n(b)}/dashboard/employees/${l.id}`,class:"block hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-cyan rounded-md"},{default:u(()=>[t("h3",{class:"font-bold text-gray-900 text-xl leading-tight group-hover:text-brand-navy transition-colors truncate pr-2",title:`${l.firstName} ${l.lastName}`},o(l.firstName)+" "+o(l.lastName),9,ie)]),_:2},1032,["to"]),t("p",de,o(l.position||l.user?.role),1)]),t("div",ce,[t("div",ue,[a(n(lt),{class:"w-4 h-4 mr-3 text-gray-400 shrink-0"}),t("span",{class:"truncate",title:l.user?.email},o(l.user?.email),9,xe)]),t("div",me,[a(n(ot),{class:"w-4 h-4 mr-3 text-gray-400 shrink-0"}),t("span",{class:"truncate",title:l.department||"No Dept"},o(l.department||"No Dept"),9,ge)])]),t("div",ye,[a(R,{to:`/${n(b)}/dashboard/employees/${l.id}`,class:"flex-1"},{default:u(()=>[a($,{variant:"secondary",class:"w-full h-9 text-xs"},{default:u(()=>[a(n(P),{class:"w-3.5 h-3.5 mr-1.5"}),s[12]||(s[12]=y(" Edit ",-1))]),_:1})]),_:1},8,["to"]),a($,{variant:"danger",class:"flex-1 h-9 text-xs bg-red-50 text-red-600 hover:bg-red-100 border-red-100 shadow-sm",onClick:ve=>k(l.id)},{default:u(()=>[a(n(q),{class:"w-3.5 h-3.5 mr-1.5"}),s[13]||(s[13]=y(" Delete ",-1))]),_:1},8,["onClick"])])])]))),128))])):(d(),E(Q,{key:1,class:"border border-gray-100 shadow-sm overflow-hidden"},{default:u(()=>[t("div",pe,[a(J,{employees:S.value,onDelete:k,onRestore:G},null,8,["employees"])])]),_:1}))]))])}}});export{De as default};
